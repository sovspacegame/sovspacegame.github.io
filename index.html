<html>
<head>
<meta charset="UTF-8">
<link rel="icon" href="img/invadersfavicon.ico" />

<link rel="stylesheet" href="css/style.css?ttd=44we34" />

 <!-- BEGINN WALLET-INCLUDE-->

    <!-- Anchor js -->
    <script src="https://unpkg.com/anchor-link@next"></script>
    <script src="https://unpkg.com/anchor-link-browser-transport@next"></script>

    <!-- Mandel eosjs -->
  <!--
    <script src="js/dist-web/eosjs-api.js"></script>
    <script src="js/dist-web/eosjs-jsonrpc.js"></script>
    <script src="js/dist-web/eosjs-jssig.js"></script>
    <script src="js/dist-web/eosjs-numeric.js"></script>
-->
<script src='js/dist-web/eosjs-api.js'></script>
<script src='js/dist-web/eosjs-jsonrpc.js'></script>
<script src='js/dist-web/eosjs-jssig.js'></script>


    <!-- Scatter js -->

  <!--  <script src="https://cdn.jsdelivr.net/npm/eosjs@16.0.9/lib/eos.min.js"></script>
    <script src="js/bundles/scatterjs-core.min.js"></script>
    <script src="js/bundles/scatterjs-plugin-eosjs.min.js"></script>
    <script src="js/bundles/scatterjs-plugin-lynx.min.js"></script>    -->

    <script src='js/assets/scatterjs-core.min.js'></script>
    <script src='js/assets/scatterjs-plugin-eosjs2.min.js'></script>

    <script src="js/roaming/roaming.js"></script> 
    <script src="js/eosiowallet/wallet.js?dsd=75324"></script>

    <script src="js/admin.js?dsd=422553"></script>
    <script src="js/sovspacegame.js?dsd=423"></script>
    <script src="js/eosjs-account-name_2.2.1.js"></script>


  
    <script src="js/invadersscript/invadersscript.js?dsd=232"></script>

 <!-- END WALLET-INCLUDE-->

<script src="https://kit.fontawesome.com/22c7420d77.js" crossorigin="anonymous"></script>

<!-- font awesome kit for icons -->

</head>
<body class='bodyclass myimage' onload='loadaudio();'>
<script>
var config_invadersscript = false;
var config_noise = false;
var config_contract = "sovspacegame";
//var config_contract = "testinvaders";
</script>

<div id='logo1' class='logo1x' style='text-align:center;height:180px;background:url(img/space.jpg);background-size:cover;color:#ffffff;'>


<img src='img/logo2.svg?t=d5443s' style='margin-top:10px;height:160px;border:none;'>


<div style='position:absolute;right:20px;top:45px;border:none;'>
 <audio id="audiotag" controls loop autoplay>
 <source src= "audio/ambientgreys.mp3" type="audio/mp3">
 </audio>
</div>

<div style='position:absolute;right:180px;top:110px;color:#eeee7b;border:none;cursor:pointer;' onclick='powerup()'>
<div id='div_cpu'>....</div>
</div>

<div style='position:absolute;right:180px;top:130px;color:#007bff;border:none;'>
<div id='div_net'>....</div>
</div>



<div style='position:absolute;right:30px;top:110px;color:#007bff;border:none;'>
<div id='balance_eos'>....</div>
</div>

<div style='position:absolute;right:30px;top:130px;color:#007bff;border:none;'>
<div id='balance_sov'>....</div>
</div>

<div style='position:absolute;right:30px;top:150px;color:#007bff;border:none;'>
<div id='balance_svx'>....</div>
</div>



</div> <!-- logo1 -->






<!-- walletmenu -->

<div id='walletmenu' style='border:2px solid #000022;width:100%;height:90px;background:url(img/space2.jpg);background-size:cover;'>

<div id='walletmenu_left' style='float:left;position:relative;width:49%;text-align:center;margin-top:20px;background:#55ff55;'>

 <div id='walletmenu_accountname' style='position:absolute;width:100%;top:-5px;'>

 <div id='myaccountname' class='myaccountname' style='font-size:2em;color:#ddddff;font-weight:bold;'>...abc</div>
 <div id='userrace' style='font-size:1em;color:#ddddff;'>...</div>
 </div>

 <div id='walletmenu_anchor' style='position:absolute;width:100%;'>
 <div id='anchorbutton' onclick="login_anchor()" class='loginbutton_anchor noselect' style='margin-left:auto;margin-right:auto;' >ANCHOR</div>

 </div>


</div>





<div id='walletmenu_right' style='float:left;position:relative;width:49%;text-align:center;margin-top:20px;background:#5555ff;'>
  <div id='walletmenu_aa' style='position:absolute;width:100%;'>
  <div id='logoutbutton' onclick="logout_all()"  class='defaultbutton noselect' style='visibility:hidden;margin-left:auto;margin-right:auto;'><span data-lang="en">Logout</span><span data-lang="cn">注销</span></div>
  </div>

  <div id='walletmenu_scatter' style='position:absolute;width:100%;'>
  <div onclick="login_scatter()" class='defaultbutton noselect' style='margin-left:auto;margin-right:auto;'>SCATTER/TP/WOMBAT</div>
  </div>

</div>


<div style='clear:both;'></div>




</div> <!-- end walletmenu -->








<div class='menuarea'>

<div style='float:left;'>
<div id='menu1' class='menubutton_selected' onclick='setmenu(1)' style='margin-left:20px;'><span data-lang="en">Surface</span><span data-lang="cn">表面</span></div>
<div id='menu2' class='menubutton' onclick='setmenu(2)'><span data-lang="en">Mint</span><span data-lang="cn">铸造</span></div>
<div id='menu3' class='menubutton' onclick='setmenu(3)'><span data-lang="en">Rules</span><span data-lang="cn">规则</span></div>
<div id='menu4' class='menubutton' onclick='setmenu(4)'><span data-lang="en">Lore</span><span data-lang="cn">传说</span></div>
<div id='menu5' class='menubutton' onclick='setmenu(5)' style='visibility:hidden'>Admin</div>
</div>

<div style='float:right;margin-right:20px;'>
<select id="language-selector" style='font-size:20px;'>
  <option value="en">English</option>
  <option value="cn">中文</option>
</select>
</div>

<div style='clear:both;'></div>



</div> <!-- menuarea -->

<div style='margin-left:20px;width:100%;'>
<span data-lang="en" style='float:left;'>Advanced World-Viewer and tactical view:</span><span data-lang="cn" style='float:left;'>高级世界查看器和战术视图：</span> <a href='https://sovinvaders.fun/' style='color:#aaaaff;text-decoration:none;float:left;' target='_blank'> &raquo; https://sovinvaders.fun &laquo;</a>
</div>


  <div id='adminmenu2' class='' onclick='' style='visibility:hidden;height:0px;overflow:hidden;margin-left:20px;width:98%;border:1px dashed #aaaaaa'>
  <br>  

   <div onclick='dospecial(1)' class='adminbutton' style='margin-left:10px;'>CLEAN TILE</div>

  <div onclick='dospecial(2)' class='adminbutton' style='margin-left:10px;'>REMOVE TILE</div>

   <div onclick='dospecial(3)' class='adminbutton' style='margin-left:10px;'>ADD TILE</div>
  
    <div onclick='dospecial(4)' class='adminbutton' style='margin-left:10px;'>SELL ASSET AND REFUND</div>
   

  </div>

    <div style='clear:both;'></div> 
    
<div id='page1' style='overflow:hidden;'>


<div style='height:5px;'></div>


<!-- choose race area -->
<div id='chooserace' class='chooserace'  style='text-align:center;height:240px;visibility:visible;overflow:hidden;'>

<div class='chooseraceinner'  style='height:250px;border:none'>

<div id='chooseraceinner2' style='border:none;width:900px;margin-left:auto;margin-right:auto;overflow:hidden;'> <!-- chooseraceinner2 -->
<br>

<strong>
<span data-lang="en">Please choose your species. Note: you cannot undo your decision!<br>Think carefully about which species suits you.<br></span><span data-lang="cn">请选择您的物种。请注意：您不能撤消您的决定！<br>请仔细考虑哪种物种适合您。<br></span>
</strong>
<br>

<div id='' class='choosebutton race_humans' onclick='inituser(1)' style='width:160px;height:130px;float:left;margin-left:20px;margin-right:20px;'>
<span data-lang="en">Play Humans</span><span data-lang="cn">选择人类</span>
<br>
<img src='img/logo_human.png' style='width:70px;margin-left:auto;margin-right:auto;'>
</div>


<div id='' class='choosebutton race_greys' onclick='inituser(2)' style='width:160px;height:130px;float:left;margin-right:20px;'>
<span data-lang="en">Play Greys</span><span data-lang="cn">灰人</span>
<br>
<img src='img/logo_grey.png' style='width:70px;margin-left:auto;margin-right:auto;'>
</div>


<div id='' class='choosebutton race_greys' onclick='inituser(4)' style='width:160px;height:130px;float:left;margin-right:20px;'>
<span data-lang="en">Play Sirians</span><span data-lang="cn">西里安人</span>
<br>
<img src='img/logo_sirian.png' style='width:70px;margin-left:auto;margin-right:auto;'>
</div>


<div id='' class='choosebutton race_greys' onclick='inituser(5)' style='width:160px;height:130px;float:left;margin-right:20px;'>
<span data-lang="en">Play Reptos</span><span data-lang="cn">爬行人</span>
<br>
<img src='img/logo_reptos.png' style='width:70px;margin-left:auto;margin-right:auto;'>
</div>


</div> <!-- chooseraceinner2 -->

<br>
<br>

</div>

</div> <!-- choose race area -->

<div style='height:5px;'></div>

<!--
<div id='gameboardtag' ></div>
-->


<div id='mainpanel'>

<div id='mainpanelleft' style='margin-left:20px;min-height:400px;width:70%;float:left;background:none;;'>


<!-- nft menu -->

 <span onclick='loadinventory()' class='refreshboard' style='float:right;width:230px;margin-left:auto;margin-bottom:0px;cursor:pointer;margin-right:0px;'><p style="margin-top:2px; margin-bottom:2px;" data-lang="en">Update NFT Inventory &#8634;</p><p style="margin-top:2px; margin-bottom:2px;" data-lang="cn">更新NFT库存 &#8634;</p></span>
<div style='clear:both;'></div>


<!-- inventory -->
<div style='margin-left:0px;float:left;'>
   <span data-lang="en" id='inventory_openclose_en' class='canvasfolder_openclose' onclick='inventory_toggle()' style='width:200px;'>Your NFT Wallet &#9660;</span>
   <span data-lang="cn" id='inventory_openclose_cn' class='canvasfolder_openclose' onclick='inventory_toggle()' style='width:200px;'>您的NFT钱包 &#9660;</span>
 </div>
 
<div style='float:left;margin-left:10px;'>
<small><span data-lang="en">(Select an area on map the map first and place your NFT)</span><span data-lang="cn">(首先在地图上选择一个区域并放置你的 NFT)</span></small>
</div> 
 
<div id='inventorycontent' class='inventorycontent' style='overflow:hidden;margin-bottom:5px;'>
 



<div style='text-align:center;'>


 <div id='div_inventory' class='div_inventory' style='height:190px;border:none; '>

  <div id='div_inventory_inner' class='div_inventory_inner' style=''>
  </div> <!-- div_inventory_inner -->
 </div> <!-- div_inventory -->
</div> <!-- center -->

</div> <!-- inventorycontent -->


 
<div style='clear:both;'></div>


<!-- end - nft menu -->

<div id='gameboardmain'  class='gameboardmain' style='position:relative;margin-left:0px;width:100%; height:20px;   border:2px solid #666666;float:left;'>




<div id='gameboard' style='position:absolute; ;width:100%;height:300px;background:#404040;overflow:hidden;'>




</div> <!-- end gameboard -->


<div style='position:absolute;margin-left:0px;left:0px;top:0px;width:100%;height:100%; border:none;padding:0px;;color:#ffffff;'>

<svg id="mysvg" width="100%" height="100%" preserveAspectRatio="none" viewbox=" 0 0 1000 1000" style="position:absolute;border:none;z-Index:430;left:0px;top:0px;margin-top:0px;margin-left:0px;">\n


  <polygon id="tileb0"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,-50 100,0 0,50  -100,0   " />
      <polygon id="tileb1"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,50 100,100 0,150  -100,100   " />
      <polygon id="tileb2"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,0 200,50 100,100  0,50   " />
      <polygon id="tileb3"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,-50 300,0 200,50  100,0   " />
      <polygon id="tileb4"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,150 100,200 0,250  -100,200   " />
      <polygon id="tileb5"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,100 200,150 100,200  0,150   " />
      <polygon id="tileb6"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,50 300,100 200,150  100,100   " />
      <polygon id="tileb7"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,0 400,50 300,100  200,50   " />
      <polygon id="tileb8"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,-50 500,0 400,50  300,0   " />
      <polygon id="tileb9"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,250 100,300 0,350  -100,300   " />
      <polygon id="tileb10"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,200 200,250 100,300  0,250   " />
      <polygon id="tileb11"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,150 300,200 200,250  100,200   " />
      <polygon id="tileb12"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,100 400,150 300,200  200,150   " />
      <polygon id="tileb13"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,50 500,100 400,150  300,100   " />
      <polygon id="tileb14"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,0 600,50 500,100  400,50   " />
      <polygon id="tileb15"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,-50 700,0 600,50  500,0   " />
      <polygon id="tileb16"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,350 100,400 0,450  -100,400   " />
      <polygon id="tileb17"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,300 200,350 100,400  0,350   " />
      <polygon id="tileb18"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,250 300,300 200,350  100,300   " />
      <polygon id="tileb19"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,200 400,250 300,300  200,250   " />
      <polygon id="tileb20"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,150 500,200 400,250  300,200   " />
      <polygon id="tileb21"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,100 600,150 500,200  400,150   " />
      <polygon id="tileb22"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,50 700,100 600,150  500,100   " />
      <polygon id="tileb23"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,0 800,50 700,100  600,50   " />
      <polygon id="tileb24"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,-50 900,0 800,50  700,0   " />
      <polygon id="tileb25"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,450 100,500 0,550  -100,500   " />
      <polygon id="tileb26"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,400 200,450 100,500  0,450   " />
      <polygon id="tileb27"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,350 300,400 200,450  100,400   " />
      <polygon id="tileb28"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,300 400,350 300,400  200,350   " />
      <polygon id="tileb29"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,250 500,300 400,350  300,300   " />
      <polygon id="tileb30"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,200 600,250 500,300  400,250   " />
      <polygon id="tileb31"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,150 700,200 600,250  500,200   " />
      <polygon id="tileb32"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,100 800,150 700,200  600,150   " />
      <polygon id="tileb33"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,50 900,100 800,150  700,100   " />
      <polygon id="tileb34"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,0 1000,50 900,100  800,50   " />
      <polygon id="tileb35"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,-50 1100,0 1000,50  900,0   " />
      <polygon id="tileb36"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,550 100,600 0,650  -100,600   " />
      <polygon id="tileb37"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,500 200,550 100,600  0,550   " />
      <polygon id="tileb38"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,450 300,500 200,550  100,500   " />
      <polygon id="tileb39"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,400 400,450 300,500  200,450   " />
      <polygon id="tileb40"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,350 500,400 400,450  300,400   " />
      <polygon id="tileb41"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,300 600,350 500,400  400,350   " />
      <polygon id="tileb42"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,250 700,300 600,350  500,300   " />
      <polygon id="tileb43"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,200 800,250 700,300  600,250   " />
      <polygon id="tileb44"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,150 900,200 800,250  700,200   " />
      <polygon id="tileb45"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,100 1000,150 900,200  800,150   " />
      <polygon id="tileb46"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,50 1100,100 1000,150  900,100   " />
      <polygon id="tileb47"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,650 100,700 0,750  -100,700   " />
      <polygon id="tileb48"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,600 200,650 100,700  0,650   " />
      <polygon id="tileb49"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,550 300,600 200,650  100,600   " />
      <polygon id="tileb50"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,500 400,550 300,600  200,550   " />
      <polygon id="tileb51"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,450 500,500 400,550  300,500   " />
      <polygon id="tileb52"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,400 600,450 500,500  400,450   " />
      <polygon id="tileb53"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,350 700,400 600,450  500,400   " />
      <polygon id="tileb54"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,300 800,350 700,400  600,350   " />
      <polygon id="tileb55"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,250 900,300 800,350  700,300   " />
      <polygon id="tileb56"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,200 1000,250 900,300  800,250   " />
      <polygon id="tileb57"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,150 1100,200 1000,250  900,200   " />
      <polygon id="tileb58"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,750 100,800 0,850  -100,800   " />
      <polygon id="tileb59"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,700 200,750 100,800  0,750   " />
      <polygon id="tileb60"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,650 300,700 200,750  100,700   " />
      <polygon id="tileb61"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,600 400,650 300,700  200,650   " />
      <polygon id="tileb62"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,550 500,600 400,650  300,600   " />
      <polygon id="tileb63"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,500 600,550 500,600  400,550   " />
      <polygon id="tileb64"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,450 700,500 600,550  500,500   " />
      <polygon id="tileb65"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,400 800,450 700,500  600,450   " />
      <polygon id="tileb66"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,350 900,400 800,450  700,400   " />
      <polygon id="tileb67"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,300 1000,350 900,400  800,350   " />
      <polygon id="tileb68"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,250 1100,300 1000,350  900,300   " />
      <polygon id="tileb69"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,850 100,900 0,950  -100,900   " />
      <polygon id="tileb70"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,800 200,850 100,900  0,850   " />
      <polygon id="tileb71"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,750 300,800 200,850  100,800   " />
      <polygon id="tileb72"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,700 400,750 300,800  200,750   " />
      <polygon id="tileb73"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,650 500,700 400,750  300,700   " />
      <polygon id="tileb74"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,600 600,650 500,700  400,650   " />
      <polygon id="tileb75"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,550 700,600 600,650  500,600   " />
      <polygon id="tileb76"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,500 800,550 700,600  600,550   " />
      <polygon id="tileb77"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,450 900,500 800,550  700,500   " />
      <polygon id="tileb78"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,400 1000,450 900,500  800,450   " />
      <polygon id="tileb79"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,350 1100,400 1000,450  900,400   " />
      <polygon id="tileb80"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 0,950 100,1000 0,1050  -100,1000   " />
      <polygon id="tileb81"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 100,900 200,950 100,1000  0,950   " />
      <polygon id="tileb82"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,850 300,900 200,950  100,900   " />
      <polygon id="tileb83"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,800 400,850 300,900  200,850   " />
      <polygon id="tileb84"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,750 500,800 400,850  300,800   " />
      <polygon id="tileb85"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,700 600,750 500,800  400,750   " />
      <polygon id="tileb86"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,650 700,700 600,750  500,700   " />
      <polygon id="tileb87"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,600 800,650 700,700  600,650   " />
      <polygon id="tileb88"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,550 900,600 800,650  700,600   " />
      <polygon id="tileb89"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,500 1000,550 900,600  800,550   " />
      <polygon id="tileb90"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,450 1100,500 1000,550  900,500   " />
      <polygon id="tileb91"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 200,950 300,1000 200,1050  100,1000   " />
      <polygon id="tileb92"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 300,900 400,950 300,1000  200,950   " />
      <polygon id="tileb93"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,850 500,900 400,950  300,900   " />
      <polygon id="tileb94"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,800 600,850 500,900  400,850   " />
      <polygon id="tileb95"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,750 700,800 600,850  500,800   " />
      <polygon id="tileb96"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,700 800,750 700,800  600,750   " />
      <polygon id="tileb97"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,650 900,700 800,750  700,700   " />
      <polygon id="tileb98"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,600 1000,650 900,700  800,650   " />
      <polygon id="tileb99"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,550 1100,600 1000,650  900,600   " />
      <polygon id="tileb100"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 400,950 500,1000 400,1050  300,1000   " />
      <polygon id="tileb101"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 500,900 600,950 500,1000  400,950   " />
      <polygon id="tileb102"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,850 700,900 600,950  500,900   " />
      <polygon id="tileb103"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,800 800,850 700,900  600,850   " />
      <polygon id="tileb104"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,750 900,800 800,850  700,800   " />
      <polygon id="tileb105"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,700 1000,750 900,800  800,750   " />
      <polygon id="tileb106"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,650 1100,700 1000,750  900,700   " />
      <polygon id="tileb107"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 600,950 700,1000 600,1050  500,1000   " />
      <polygon id="tileb108"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 700,900 800,950 700,1000  600,950   " />
      <polygon id="tileb109"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,850 900,900 800,950  700,900   " />
      <polygon id="tileb110"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,800 1000,850 900,900  800,850   " />
      <polygon id="tileb111"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,750 1100,800 1000,850  900,800   " />
      <polygon id="tileb112"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 800,950 900,1000 800,1050  700,1000   " />
      <polygon id="tileb113"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 900,900 1000,950 900,1000  800,950   " />
      <polygon id="tileb114"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,850 1100,900 1000,950  900,900   " />
      <polygon id="tileb115"  fill="#9999ff" stroke="#ffffff" stroke-width=1 opacity=0.0  style=""  points=" 1000,950 1100,1000 1000,1050  900,1000   " />



</svg>






</div>





</div> <!-- end gameboardmain -->


<br>
<span id='coordinate' style='float:right;'></span>

 
</div> <!-- mainpanelleft -->



<div id='mainpanelright' style='height:400px;width:27%;float:left;margin-left:0px; margin-top:140px;background:none;'>



<div id='board_navigation' style='color:#ffffff;width:100%;float:left;margin-left:0px;'>

<div id='navigation_svg' style='border:none;width:80%;margin-left:auto;margin-right:auto;'>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   width="100%"

   viewBox="0 0 105.56875 105.83334"
   version="1.1"
   id="svg8"
   inkscape:version="1.0.2 (e86c8708, 2021-01-15)"
   sodipodi:docname="navigation.svg">
  <defs
     id="defs2" />
  <sodipodi:namedview
     id="base"
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1.0"
     inkscape:pageopacity="0.0"
     inkscape:pageshadow="2"
     inkscape:zoom="0.5"
     inkscape:cx="164"
     inkscape:cy="476"
     inkscape:document-units="mm"
     inkscape:current-layer="layer1"
     inkscape:document-rotation="0"
     showgrid="false"
     units="px"
     inkscape:window-width="1248"
     inkscape:window-height="943"
     inkscape:window-x="112"
     inkscape:window-y="25"
     inkscape:window-maximized="0"
     inkscape:snap-global="false" />
  <metadata
     id="metadata5">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g
     inkscape:label="Ebene 1"
     inkscape:groupmode="layer"
     id="layer1">
    <rect
       style="fill:#333333;fill-opacity:0.848404;stroke:#ffffff;stroke-width:0.550038"
       id="rect851"
       width="18.310972"
       height="73.193123"
       x="-28.12989"
       y="-17.546558"
       ry="6.648787" />
    <path
       id="path853"
       style="fill:#ffffff;fill-opacity:0.30851063;stroke:none;stroke-width:11.8098"
       d="M 199.71094 5.9042969 A 194.09508 194.09508 0 0 0 5.9042969 200 A 194.09508 194.09508 0 0 0 200 394.0957 A 194.09508 194.09508 0 0 0 394.0957 200 A 194.09508 194.09508 0 0 0 200 5.9042969 A 194.09508 194.09508 0 0 0 199.71094 5.9042969 z M 200 80 A 120 120 0 0 1 320 200 A 120 120 0 0 1 200 320 A 120 120 0 0 1 80 200 A 120 120 0 0 1 200 80 z "
       transform="scale(0.26458333)" />



       <path
       id="circ1"
       style="fill:#009900;stroke:none;stroke-width:1.24518"
       d="M 53.181641 2.1171875 C 48.05137 2.1171875 43.919922 6.2466823 43.919922 11.376953 C 43.919922 16.507224 48.05137 20.636719 53.181641 20.636719 C 58.311912 20.636719 62.441406 16.507224 62.441406 11.376953 C 62.441406 6.2466823 58.311912 2.1171875 53.181641 2.1171875 z ">
       <animate attributeName="fill-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
      </path>


      <path
      id="circ2"
      style="fill:#009900;stroke:none;stroke-width:1.24518"
      d="M 82.554688 14.275391 C 80.18755 14.275391 77.819683 15.182269 76.005859 16.996094 C 72.378209 20.623743 72.378209 26.464148 76.005859 30.091797 C 79.633508 33.719447 85.473913 33.719447 89.101562 30.091797 C 92.729212 26.464148 92.729212 20.623743 89.101562 16.996094 C 87.287737 15.182269 84.921828 14.275391 82.554688 14.275391 z ">
      <animate attributeName="fill-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
      </path>

      <path
      id="circ3"
      style="fill:#009900;stroke:none;stroke-width:1.24518"
      d="M 94.720703 43.65625 C 89.590432 43.65625 85.460937 47.785745 85.460938 52.916016 C 85.460938 58.046287 89.590432 62.177734 94.720703 62.177734 C 99.850974 62.177734 103.98047 58.046287 103.98047 52.916016 C 103.98047 47.785745 99.850974 43.65625 94.720703 43.65625 z ">
      <animate attributeName="fill-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
      </path>

      <path id="circ4" style="fill:#009900;stroke:none;stroke-width:1.24518" d="M 82.554688 73.021484 C 80.18755 73.021484 77.819683 73.928362 76.005859 75.742188 C 72.378207 79.369837 72.378207 85.210242 76.005859 88.837891 C 79.63351 92.465545 85.473913 92.465543 89.101562 88.837891 C 92.729215 85.210242 92.729217 79.369839 89.101562 75.742188 C 87.287737 73.928362 84.921828 73.021484 82.554688 73.021484 z">
         <animate attributeName="fill-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
     </path>

     <path
   id="circ5"
   style="fill:#009900;stroke:none;stroke-width:1.24518"
   d="M 53.181641 85.195312 C 48.05137 85.195312 43.919922 89.32676 43.919922 94.457031 C 43.919922 99.587302 48.05137 103.7168 53.181641 103.7168 C 58.311912 103.7168 62.441406 99.587302 62.441406 94.457031 C 62.441406 89.32676 58.311912 85.195312 53.181641 85.195312 z ">
   <animate attributeName="fill-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
</path>

<path
id="circ6"
style="fill:#009900;stroke:none;stroke-width:1.24518"
d="M 23.808594 73.021484 C 21.441455 73.021484 19.073591 73.928362 17.259766 75.742188 C 13.632117 79.369837 13.632117 85.210242 17.259766 88.837891 C 20.887414 92.46554 26.72782 92.46554 30.355469 88.837891 C 33.983119 85.210242 33.983119 79.369837 30.355469 75.742188 C 28.541645 73.928362 26.175733 73.021484 23.808594 73.021484 z">
<animate attributeName="fill-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
</path>

    <path
       id="circ7"
       style="fill:#009900;stroke:none;stroke-width:1.24518"
       d="M 11.642578 43.65625 C 6.5123078 43.65625 2.3808594 47.785745 2.3808594 52.916016 C 2.3808594 58.046287 6.5123078 62.177734 11.642578 62.177734 C 16.772849 62.177734 20.902344 58.046287 20.902344 52.916016 C 20.902344 47.785745 16.772849 43.65625 11.642578 43.65625 z ">
       <animate attributeName="fill-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
       </path>

     <path
       id="circ8"
       style="fill:#009900;stroke:none;stroke-width:1.24518"
       d="M 23.808594 14.275391 C 21.441455 14.275391 19.07359 15.182269 17.259766 16.996094 C 13.632117 20.623742 13.632117 26.464148 17.259766 30.091797 C 20.887414 33.719449 26.72782 33.719449 30.355469 30.091797 C 33.983119 26.464148 33.983119 20.623742 30.355469 16.996094 C 28.541645 15.182269 26.175733 14.275391 23.808594 14.275391 z ">
       <animate attributeName="fill-opacity" values="0;1;0" dur="3s" repeatCount="indefinite" />
      </path> 


    <path
       id="path924"
       style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:3.24101"
       inkscape:transform-center-x="-0.043619609"
       inkscape:transform-center-y="-2.4305267"
       d="M 201.04883 10.142578 L 178.45703 66.869141 L 224.62891 66.064453 L 201.04883 10.142578 z M 224.62891 331 L 178.45703 331.80469 L 202.03711 387.72656 L 224.62891 331 z "
       transform="scale(0.26458333)" />
    <path
       id="path929"
       style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.857517"
       inkscape:transform-center-x="-2.4305263"
       inkscape:transform-center-y="0.043619738"
       d="m 103.54635,52.861508 -15.00889,-5.977414 0.212907,12.21631 z M 18.652838,59.100404 18.43993,46.884094 3.6439366,53.12299 Z" />
    <path
       id="path931"
       style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.857517"
       inkscape:transform-center-x="-1.6861865"
       inkscape:transform-center-y="1.7510388"
       d="M 88.760806,88.373146 82.388253,73.527715 73.892477,82.30868 Z M 24.371696,32.696627 32.867471,23.915661 17.999135,17.851188 Z" />
    <path
       id="path933"
       style="fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.857517"
       inkscape:transform-center-x="1.6861867"
       inkscape:transform-center-y="1.7510388"
       d="m 17.801764,88.373146 6.372553,-14.845431 8.495776,8.780965 z m 64.38911,-55.676519 -8.495775,-8.780966 14.868336,-6.064473 z" />
    <rect
       style="fill:#008080;fill-opacity:0;stroke:none;cursor:pointer;stroke-width:2.30083"
       id="scroll_n"
       width="29.633333"
       height="31.75"
       x="38.629166"
       y="-4.7624998"
       ry="13.373751" />
    <rect
       style="fill:#008080;fill-opacity:0;stroke:none;cursor:pointer;stroke-width:2.30083"
       id="scroll_ne"
       width="29.633333"
       height="31.75"
       x="68.262497"
       y="7.9375"
       ry="13.373751" />
    <rect
       style="fill:#008080;fill-opacity:0;stroke:none;cursor:pointer;stroke-width:2.30083"
       id="scroll_e"
       width="29.633333"
       height="31.75"
       x="81.491661"
       y="38.099998"
       ry="13.373751" />
    <rect
       style="fill:#008080;fill-opacity:0.00265957;stroke:none;cursor:pointer;stroke-width:2.30083"
       id="scroll_se"
       width="29.633333"
       height="31.75"
       x="69.320831"
       y="68.791664"
       ry="13.373751" />
    <rect
       style="fill:#008080;fill-opacity:0;stroke:none;cursor:pointer;stroke-width:2.30083"
       id="scroll_s"
       width="29.633333"
       height="31.75"
       x="39.158333"
       y="80.433334"
       ry="13.373751" />
    <rect
       style="fill:#008080;fill-opacity:0;stroke:none;cursor:pointer;stroke-width:2.30083"
       id="scroll_sw"
       width="29.633333"
       height="31.75"
       x="7.9374995"
       y="69.320831"
       ry="13.373751" />
    <rect
       style="fill:#008080;fill-opacity:0;stroke:none;cursor:pointer;stroke-width:2.30083"
       id="scroll_w"
       width="29.633333"
       height="31.75"
       x="-4.2333336"
       y="37.041664"
       ry="13.373751" />
    <rect
       style="fill:#008080;fill-opacity:0;stroke:none;cursor:pointer;stroke-width:2.30083"
       id="scroll_nw"
       width="29.633333"
       height="31.75"
       x="8.4666662"
       y="6.8791642"
       ry="13.373751" />
 <!--
       <text data-lang="en" id='navsvg_text' x="53" y="53" w="30" fill="#ffffff" style="" opacity="0.8" font-size="0.5em" text-anchor="middle" alignment-baseline="central">center</text>
       <text data-lang="cn" id='navsvg_text_cn' x="53" y="53" w="30" fill="#ffffff" style="" opacity="0.8" font-size="0.5em" text-anchor="middle" alignment-baseline="central">中心</text>
    
     <!--
       <foreignObject id= 'navsvg_text' x="38" y="49" width="30" height="30">
         <div xmlns="http://www.w3.org/1999/xhtml" style="user-select: none; color:#ffffff;opacity:0.8;font-size:0.5em;text-align:center;">
           <i class="fa-solid fa-arrows-to-eye fa-beat-fade" style="animation-duration: 3s;"></i>
         </div>
       </foreignObject>
        --> 

    <circle
       style="fill:#ffffff;fill-opacity:0.26329789;stroke-width:15.1135;cursor:pointer;visibility:hidden;"
       id="scrollcenter"
       cx="53.5"
       cy="53.0"
       r="22.5" />
       
       
 

  <g >
 <path
       id="eye42"
       style="fill:#ffffff;stroke:none;cursor:pointer;stroke-width:2.22164;stroke-linejoin:round"
       d="m 29.261979,19.757305 c -1.46659,-0.0032 -2.927985,0.590104 -3.998981,1.763792 -2.015997,2.209292 -1.86052,5.611695 0.348776,7.627687 l 20.473482,18.681827 h -6.698412 c -2.455858,0 -4.432963,1.977102 -4.432963,4.43296 v 2.575212 c 0,2.455858 1.977105,4.432964 4.432963,4.432964 h 20.600889 c 1.915628,0 3.535513,-1.205318 4.157446,-2.900102 0.458253,-0.698129 0.726219,-1.533253 0.726219,-2.434266 V 33.336486 c 0,-2.455854 -1.977089,-4.432959 -4.432963,-4.432959 h -2.575209 c -2.455857,0 -4.432963,1.977105 -4.432963,4.432959 v 6.580566 L 32.889095,21.173115 c -1.035608,-0.944996 -2.33307,-1.412985 -3.627116,-1.41581 z m 152.513961,0 c -1.29405,0.0028 -2.59152,0.470814 -3.62711,1.41581 l -20.54117,18.743937 v -6.580566 c 0,-2.455854 -1.9771,-4.432959 -4.43296,-4.432959 h -2.57521 c -2.45587,0 -4.43296,1.977105 -4.43296,4.432959 v 20.600893 c 0,0.901013 0.26876,1.736137 0.72701,2.434266 0.62193,1.694784 2.24103,2.900102 4.15665,2.900102 h 20.60089 c 2.45586,0 4.43297,-1.977106 4.43297,-4.432964 v -2.575212 c 0,-2.455858 -1.97711,-4.43296 -4.43297,-4.43296 h -6.69762 l 20.47269,-18.681827 c 2.2093,-2.015992 2.36558,-5.418395 0.34958,-7.627687 -1.07099,-1.173688 -2.5332,-1.767025 -3.99979,-1.763792 z m -79.18734,26.63281 c -23.958978,0.0692 -42.186769,25.800336 -45.939722,35.304438 -0.364816,0.516334 -0.616331,0.880702 -0.616331,0.880702 0,0 0.182316,0.234502 0.205445,0.265165 -0.08917,0.288217 -0.161564,0.554968 -0.213408,0.796291 -7.25e-4,9.17e-4 -0.02389,0.03026 -0.02389,0.03026 0.0022,0.0114 0.0064,0.02508 0.0088,0.03663 -0.0023,0.01155 -0.0066,0.02523 -0.0088,0.03663 0,0 0.02316,0.02935 0.02389,0.03026 0.05185,0.241327 0.124239,0.508078 0.213408,0.796295 -0.02312,0.03061 -0.205445,0.265165 -0.205445,0.265165 0,0 0.251515,0.364367 0.616331,0.880697 3.834086,9.709576 22.776924,36.350652 47.502852,35.267802 0.26955,0.0175 0.53823,0.0312 0.80505,0.0358 0.18754,0.003 0.37784,-0.003 0.56696,-0.006 0.18901,0.003 0.37873,0.009 0.56616,0.006 0.25869,-0.005 0.51911,-0.0177 0.78037,-0.0343 9.06672,0.40404 17.35633,-2.91926 24.40956,-7.77261 12.19158,-8.38905 20.68913,-21.343726 23.11877,-27.496782 0.36473,-0.516199 0.61554,-0.880697 0.61554,-0.880697 0,0 -0.18167,-0.233968 -0.20465,-0.26437 0.0894,-0.2888 0.16091,-0.556146 0.21261,-0.797885 7e-4,-8.85e-4 0.0239,-0.02947 0.0239,-0.02947 -0.002,-0.01138 -0.006,-0.02509 -0.009,-0.03663 0.002,-0.01154 0.007,-0.02525 0.009,-0.03663 0,0 -0.0232,-0.02858 -0.0239,-0.02946 -0.0517,-0.241743 -0.12328,-0.509094 -0.21261,-0.797885 0.023,-0.0304 0.20465,-0.26437 0.20465,-0.26437 0,0 -0.25079,-0.364494 -0.61554,-0.880702 -3.83393,-9.709429 -22.77756,-36.350666 -47.50364,-35.267806 -0.26956,-0.0175 -0.53824,-0.03117 -0.80506,-0.03583 -0.18744,-0.0033 -0.37716,0.0033 -0.56616,0.0064 -0.18912,-0.0033 -0.37941,-0.0097 -0.56696,-0.0064 -0.26682,0.0047 -0.5355,0.01833 -0.80505,0.03583 -0.52323,-0.02292 -1.04516,-0.03813 -1.56313,-0.03663 z m 2.97655,22.178348 a 15.799063,15.799067 0 0 1 0.0605,0 15.799063,15.799067 0 0 1 15.79924,15.79845 A 15.799063,15.799067 0 0 1 105.62567,100.16615 15.799063,15.799067 0 0 1 89.826417,84.366913 15.799063,15.799067 0 0 1 105.56515,68.568463 Z M 39.386844,109.45172 c -2.455858,0 -4.432963,1.97711 -4.432963,4.43297 v 2.57441 c 0,2.45587 1.977105,4.43376 4.432963,4.43376 h 6.698412 l -20.473482,18.68183 c -2.209296,2.016 -2.364773,5.41759 -0.348776,7.62689 1.070996,1.17369 2.532391,1.76767 3.998981,1.76459 1.294046,-0.003 2.591508,-0.47081 3.627116,-1.41581 l 20.541168,-18.74394 v 6.58056 c 0,2.45586 1.977106,4.43296 4.432963,4.43296 h 2.575209 c 2.455874,0 4.432963,-1.9771 4.432963,-4.43296 v -20.60089 c 0,-0.90101 -0.267966,-1.73614 -0.726219,-2.43426 -0.621933,-1.69479 -2.241818,-2.90011 -4.157446,-2.90011 z m 111.663346,0 c -1.91562,0 -3.53472,1.20532 -4.15665,2.90011 -0.45825,0.69812 -0.72701,1.53325 -0.72701,2.43426 v 20.60089 c 0,2.45586 1.97709,4.43296 4.43296,4.43296 h 2.57521 c 2.45586,0 4.43296,-1.9771 4.43296,-4.43296 v -6.58056 l 20.54117,18.74394 c 1.03559,0.945 2.33306,1.41298 3.62711,1.41581 1.46659,0.003 2.9288,-0.5909 3.99979,-1.76459 2.016,-2.2093 1.85972,-5.61089 -0.34958,-7.62689 l -20.47269,-18.68183 h 6.69762 c 2.45586,0 4.43297,-1.97789 4.43297,-4.43376 v -2.57441 c 0,-2.45586 -1.97711,-4.43297 -4.43297,-4.43297 z"  transform="scale(0.1)  translate(425 460)" />
  </g>


  </g>
</svg>



</div> <!-- navigation_svg -->


<div style='height:10px;'></div>




<div id='navbuttonarea' style='margin-left:20px;'>

<div id='navbutton_scroll' onclick='nav_selection(1);' class='navbutton_on'>
   <span data-lang="en">scroll</span><span data-lang="cn">滚动</span>
</div>

<div id='navbutton_move' onclick='nav_selection(2);' class='navbutton_off_inactive'>
   <span data-lang="en">move</span><span data-lang="cn">移动</span>
</div>
<div style='clear:both;'></div>

<!--
<div id='movesteps_div' style='height:0px;visiblity:hidden;overflow:hidden;'>
<span style='margin-left:52%'><small>Distance:</small> </span><input type='hidden' id='movesteps' value='1' style='width:50px;text-align:center;'><br>
</div>
-->


<div id='navbutton_attack' onclick='nav_selection(3);' class='navbutton_off_inactive'>
   <span data-lang="en">attack</span><span data-lang="cn">攻击</span>
</div>

<div id='navbutton_demolish' onclick='nav_selection(4);' class='navbutton_off_inactive'>
   <span data-lang="en">demolish</span><span data-lang="cn">拆除</span>
</div>
<div style='clear:both;'></div>

<div id='navbutton_repair' onclick='nav_selection(5);' class='navbutton_off_inactive'>
   <span data-lang="en">repair</span><span data-lang="cn">修复</span>
</div>

<div id='navbutton_repeat' onclick='repeataction();' class='navbutton_off_inactive' style='background-color:#77cc77;color:ffffff;'>
   <span data-lang="en">repeat &#8634;</span><span data-lang="cn">重复 &#8634;</span>
</div>
<div style='clear:both;'></div>

<!-- former terraform -->
<div id='navbutton_garden' onclick='plantgarden();' class='navbutton_off_inactive'>
   <span data-lang="en">seed</span><span data-lang="cn">种子</span>
</div>

<div id='navbutton_disable' onclick='toggletower();' class='navbutton_off_inactive'>
   <span data-lang="en">deactivate</span><span data-lang="cn">停用</span>
</div>
 
<div id='navbutton_fire' onclick='firered();' class='navbutton_off_inactive' style='visibility:visible;float:left;'>
   <span data-lang="en">detonate</span><span data-lang="cn">引爆</span>
</div>

<!-- former bulldoze -->
<div id='navbutton_flatten' onclick='nav_selection(6);' class='navbutton_off_inactive' style='visibility:visible;float:left;'>
   <span data-lang="en">terraform</span><span data-lang="cn">改造行星</span>
</div>


<div style='clear:both;'></div>
<!--
<div id='navbutton_infect' onclick='nav_selection(6);' class='navbutton_off' style='visibility:visible;f'>
infect
</div>
-->


</div> <!-- navbuttonarea -->



<br>





<div id='coordiv' style='border:none;color:#eeeeee;position:relative;width:90%;margin-left:20px;margin-right:auto;'>
<div><small data-lang="en">Center Coordinate</small><small data-lang="cn">中心坐标</small></div><br>
<div style='float:left;'>x:<input id='xcoor' type='text' value='500000' style='width:100px;'></div>
<div style='float:left;'>&nbsp;y:<input id='ycoor' type='text' value='500000' style='width:100px;'></div>

<div style='clear:both;'></div>



<div id='' onclick='refreshboard()' class='refreshboard' style='width:90%;'><span data-lang="en">Refresh Board &#8634;</span><span data-lang="cn">刷新面板 &#8634;</span></div>

<div style='height:10px;'></div>



<div style='border:none;float:left;width:95%;font-size:0.8em;'>


<div id='thename'>...</div>
<div id='curassetid'>...</div>
<div id='owner'>...</div>
<div id='asset_ts'>...</div>
<div id='shield'>...</div>
<div id='attack'>...</div>

 <br>



 <!-- automap -->
<div id='extramenu_openclose' class='canvasfolder_openclose' onclick='extramenufolder_toggle()'><span data-lang="en">Expand Menu &#9660;</span><span data-lang="cn">展开菜单 &#9660;</span></div>


 <div id='extramenufolder' class='imground' style='overflow:hidden;padding:10px;height:2px;background-color:#111111;border:2px solid #666666;width:90%;'>

<span data-lang="en">Set Nickname:</span><span data-lang="cn">设置昵称:</span><br>
 <input type='text' id='newnickname' class='newnickname'></input>
 <div onclick="setnickname()"  class='refreshboard'><span data-lang="en">Set Nickname:</span><span data-lang="cn">设置昵称:</span></div>

<br>
<!-- selfdestruction -->
<div id='selfdestruction' onclick="selfdestruct()"  class='selfdestruction_off'><span data-lang="en">Selfdestruct</span><span data-lang="cn">自毁</span></div>

<br>
<!-- claim_svx -->
<div id='claim_svx' onclick="claim_svx()"  class='claim_off' style='height:0px;visibility:hidden'><span data-lang="en">Claim</span><span data-lang="cn">认领</span></div>

<br>
<!-- claim_svx -->
<div id='claim_svx_all' onclick="claim_all_svx()"  class='claim' style='height:0px;visibility:hidden' ><span data-lang="en">Claim All</span><span data-lang="cn">全部认领</span></div>
<br>

<!-- authorize -->
<span data-lang="en">Authorize Player: (empty for revoke)</span><span data-lang="cn">授权玩家：（留空为撤销）</span><br>
<input type='text' id='authorizeaccount' class='newnickname'>
<div id='authorize' onclick="authorize()"  class='authorize'><span data-lang="en">Authorize</span><span data-lang="cn">授权</span></div>




</div> <!-- extramenufolder -->


</div>

</div> <!--  coordiv -->


</div> <!-- board_navigation -->


</div> <!-- mainpanelright -->


</div> <!-- mainpanel -->




<!-- scriptmenu -->
<div   id='scriptmenu'  style='height:0px;visibility:hidden;overflow:hidden;border:none;width:100%;'>


<div style='margin-left:20px;'>
   <span data-lang="en" id='invadersscript_openclose_en' class='canvasfolder_openclose' onclick='invadersscript_toggle()' style='width:200px;'>INVADERSSCRIPT &#9650;</span>
   <span data-lang="cn" id='invadersscript_openclose_cn' class='canvasfolder_openclose' onclick='invadersscript_toggle()' style='width:200px;'>INVADERSSCRIPT &#9650;</span>
 </div>


<div id='scriptmenuinner' class='loadmenu imground'  style='border:2px solid #cccccc;width:95%;padding:5px;margin:5px;overflow:hidden;'>
 
<div id='scriptactions'>
...
</div>
<br>

<textarea id='scriptfile' style='width:95%;margin-left:auto;margin-right:auto;height:200px;'>

 
</textarea>

<div id='' class='navbutton_on' onclick='parsescript()'>PARSE</div>

<br>
</div> <!-- scriptmenuinner -->
</div> <!-- end - scriptmenu -->


<script>
 

if (config_invadersscript == true)
   {
   document.getElementById("scriptmenu").style.visibility = "visible";
   document.getElementById("scriptmenu").style.height     = "420px";
   
   } // if (config_invadersscript == true)
   else
   {
   
   }
   
  
</script>








<div style='clear:both;'></div>
<!-- <div name='loadmenu' id='loadmenu' style='border:1px solid #ff0000;width:65%;float-left;margin-left:20px;height:0px;visibility:hidden;overflow:hidden'>
 <div name='loadmenu' id='loadmenu' class='loadmenu' style='width:65%;float-left;margin-left:40px;height:200px;'>-->
 <div   id='loadmenu' class='loadmenu' style='height:0px;visibility:hidden;overflow:hidden;'>
<div style='height:20px;'></div>


<div style='clear:both;'></div>


<div id='navbutton_repair' onclick='transporter_loadunloadobjects(1);' class='navbutton_off' style='color:#ffffff;width:20%;'>
   <span data-lang="en">load</span><span data-lang="cn">加载</span>
</div>

<div id='navbutton_unload' onclick='transporter_loadunloadobjects(2);' class='navbutton_off' style='color:#ffffff;width:20%;visibility:hidden;'>
   <span data-lang="en">unload</span><span data-lang="cn">卸载</span>
</div>

<div id='navbutton_unloadloader' onclick='transporter_loadunloadobjects(3);' class='navbutton_off' style='color:#ffffff;width:20%;visibility:hidden;'>
   <span data-lang="en">unload (lander)</span><span data-lang="cn">卸载（着陆舱）</span>
</div>

<div style='clear:both;'></div>
<div id='loadedinfo' style='color:#ffffff;margin-left:20px;'>
...
</div>






<div style='height:20px;'></div>

</div> <!-- loadmenu -->
<div style='clear:both;'></div>





<!-- classic mode -->
<script>


classicmode = _getCookie("myclassicmode");
//alert(classicmode);  
  

     
</script>



<script>

function transporter_loadunloadobjects( mode )
{
//alert("Load");


var theactions = [];




    var action = {
                 account: config_contract,
                 name: 'loadunload',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "assetid": globalselection['assetid'],
                       "user": global_account,
                       "mode": mode,

                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // loadobjects()


var frontendversion = "0.1";
var frontendversion_cn = "0.1";

document.getElementById("scroll_n").addEventListener('click', function(e)
{
updatecoor(2,-2);

refreshboard();
} );


document.getElementById("scroll_ne").addEventListener('click', function(e)
{

if (nav_mode == 1)
   {
   updatecoor(2,0);
   } else
if (nav_mode == 2)
   {
   moveobject(2);
   } else
if (nav_mode == 3)
   {
   attackobject(2,"","");
   } else
if (nav_mode == 4)
   {
   demolishobject(2);
   }
if (nav_mode == 5)
   {
   repairobject(2);
   }
if (nav_mode == 6)
   {
   flattenobject(2);
   }


refreshboard();
} );

document.getElementById("scroll_e").addEventListener('click', function(e)
{
updatecoor(2,2);
refreshboard();
} );


document.getElementById("scroll_se").addEventListener('click', function(e)
{



if (nav_mode == 1)
   {
   updatecoor(0,2);
   } else
if (nav_mode == 2)
   {
   moveobject(3);
   }  else
if (nav_mode == 3)
   {
   attackobject(3,"","");
   }  else
if (nav_mode == 4)
   {
   demolishobject(3);
   }
if (nav_mode == 5)
   {
   repairobject(3);
   }
if (nav_mode == 6)
   {
   flattenobject(3);
   }

refreshboard();
} );

document.getElementById("scroll_s").addEventListener('click', function(e)
{
updatecoor(-2,2);
refreshboard();
} );

document.getElementById("scroll_sw").addEventListener('click', function(e)
{


if (nav_mode == 1)
   {
   updatecoor(-2,0);
   } else
if (nav_mode == 2)
   {
   moveobject(4);
   }  else
if (nav_mode == 3)
   {
   attackobject(4,"","");
   }  else
if (nav_mode == 4)
   {
   demolishobject(4);
   }
if (nav_mode == 5)
   {
   repairobject(4);
   }
if (nav_mode == 6)
   {
   flattenobject(4);
   }

refreshboard();
} );


document.getElementById("scroll_w").addEventListener('click', function(e)
{
updatecoor(-2,-2);
refreshboard();
} );

document.getElementById("scroll_nw").addEventListener('click', function(e)
{


if (nav_mode == 1)
   {
   updatecoor(0,-2);
   } else
if (nav_mode == 2)
   {
   moveobject(1);
   }  else
if (nav_mode == 3)
   {
   attackobject(1,"","");
   }  else
if (nav_mode == 4)
   {
   demolishobject(1);
   }
if (nav_mode == 5)
   {
   repairobject(1);
   }
if (nav_mode == 6)
   {
   flattenobject(1);
   }

refreshboard();
} );


function updatecoor( offx, offy )
{
xcoor = document.getElementById("xcoor").value*1;
ycoor = document.getElementById("ycoor").value*1;

xcoor = xcoor + offx;
ycoor = ycoor + offy;

document.getElementById("xcoor").value = xcoor;
document.getElementById("ycoor").value = ycoor;

} // updatecoor




//document.getElementById("navsvg_text").addEventListener('click', function(e)
document.getElementById("scrollcenter").addEventListener('click', function(e)
{
setcenter();
} );

document.getElementById("eye42").addEventListener('click', function(e)
{
setcenter();
} );


function setcenter()
{
xcoor = globalselection['x'] ;
ycoor = globalselection['y'] ;

document.getElementById("xcoor").value = xcoor;
document.getElementById("ycoor").value = ycoor;

refreshboard();
nav_selection(1);
//alert("globalselection['x'] " + globalselection['x'] + " " + globalselection['y']);
} // setcenter()

function setcenter2(_xcoor,_ycoor)
{
xcoor = _xcoor;
ycoor = _ycoor;

document.getElementById("xcoor").value = xcoor;
document.getElementById("ycoor").value = ycoor;

refreshboard();
nav_selection(1);
//window.location.hash='gameboardtag';

//alert("globalselection['x'] " + globalselection['x'] + " " + globalselection['y']);
} // setcenter()


function claim_svx()
{
//alert("claim_svx");


console.log("last_assetid:::::: ",globalselection['assetid']);


var theactions = [];




    var action = {
                 account: config_contract,
                 name: 'claim',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "assetid": globalselection['assetid'],
                       "user" : global_account,
                       }
                 };


theactions.push(action);



if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // claim_svx







function claim_all_svx()
{
//alert("all");

console.log("own_collectors:::: ");
console.log(own_collectors);

size = own_collectors.length;

var theactions = [];


for (var i=0; i<size; i++)
{
asset_id = own_collectors[i]['asset_id'];

    var action = {
                 account: config_contract,
                 name: 'claim',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "assetid": asset_id,
                       "user" : global_account,
                       }
                 };


theactions.push(action);





} // for (var i=0; i<size; i++)



if (1)
   {
   transact( func_success, func_error, theactions );
   }




} // claim_all_svx





function authorize()
{


authorizeaccount = document.getElementById('authorizeaccount').value;

//alert("authorizeaccount: " + authorizeaccount);

/* 
   void setnftoption(
                       uint64_t assetid,
                       name     user,
                       string   type,
                       string   value
                     )
*/

/*
authorizeaccount
 authorizeaccount

*/


var theactions = [];


    var action = {
                 account: config_contract,
                 name: 'setnftoption',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "assetid": globalselection['assetid'],
                       "user": global_account,
                       "type": "authset", // authrevoke
                       "value": authorizeaccount
                       }
                 };


theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }

} // authorize()




function callback_readasset_forlist( value, params )
{

//console.log( "coordinatei: " ,params['id'] ," " ,params['asset_id'] );

/*
if ( value.more == false )
   {
    loadobjects_cnt++;
   return;
   }
*/
var idata = value.rows[0].immutable_serialized_data;
var mdata = value.rows[0].mutable_serialized_data;


decoded_data = mydecoder( idata, mdata );

nick =  decoded_data['nick'];
atype = decoded_data['atype'];

coordinatei = params['id'];

var asset_id = params['asset_id'];


// ---
if ( nick != "" )
{
select = document.getElementById('select_fav_objects');

// Add option to selectlist
var opt = document.createElement('option');
opt.value = coordinatei;
opt.innerHTML = nick;
select.appendChild(opt);
} // if...

// ---



// add own_collectors

// only collectors
if (atype == 8)
{
var asset_object = Object();
asset_object['asset_id'] = asset_id;
asset_object['atype'] = atype;
own_collectors.push( asset_object );
}

 
return;

//var data = value.rows[0].immutable_serialized_data;
var data = value.rows[0].mutable_serialized_data;
var idata = value.rows[0].immutable_serialized_data;
var mdata = value.rows[0].mutable_serialized_data;


decoded_data = mydecoder( idata, mdata );

/*
console.log("Decoded:");
console.log(decoded_data);
console.log("---");
*/
// ---
//document.getElementById('debugout').innerHTML = "[" + decoded_data['name'] + "]" ;

x = params['x'];
y = params['y'];

/*console.log("x: " + x);
console.log("y: " + y);
*/

//a = decoded_data['attack'];
//console.log("a: " + a);

tilearray[x][y]['attack']   = decoded_data['attack'];
tilearray[x][y]['atype']    = decoded_data['atype'];
    tilearray[x][y]['config']    = decoded_data['config'];
    tilearray[x][y]['eos']    = decoded_data['eos'];
    tilearray[x][y]['name']    =decoded_data['name'];

    tilearray[x][y]['nick']    = decoded_data['nick'];
    tilearray[x][y]['ori']    = decoded_data['ori'];
    tilearray[x][y]['race']    = decoded_data['race'];
    tilearray[x][y]['shield']    = decoded_data['shield'];
    tilearray[x][y]['shield_max']    = decoded_data['shield_max'];
    tilearray[x][y]['sov']    = decoded_data['sov'];





    loadobjects_cnt++;
       if (loadobjects_cnt == loadobjects_size)
          {
          console.log("loadobjects_size reached! ");
          renderboard();
          } else
            {
            //console.log("loadobjects_cnt: ", loadobjects_cnt, " of ", loadobjects_size );
            }



} // callback_readasset_forlist




function callback_load_my_assets( value )
{
console.log("callback_load_my_assets");


var elm = document.getElementById('select_fav_objects');
var i, L = elm.options.length - 1;
for(i = L; i >= 0; i--)
   {
   elm.remove(i);
   }


// First element
select = document.getElementById('select_fav_objects');

// Add option to selectlist

var opt = document.createElement('option');
opt.value = 500000500000;
if (lang === "cn") {
   opt.innerHTML = "跳到昵称";
} else {
opt.innerHTML = "Jump to Nickname";
}
select.appendChild(opt);


console.log( value );

size = value.rows.length;

console.log("size: " + size);

var buffer = "";
for (var i=0; i<size; i++)
    {
    id       = value.rows[i]['id'];
    owner    = value.rows[i]['owner'];
    asset_id = value.rows[i]['asset_id'];

    if (owner == global_account)
       {
/*
       buffer += "<div id='' >";
       buffer += id + " - " + asset_id + " <span id='al_centerlink_"+asset_id+"'>..</span> <span id='al_nick"+asset_id+"'>..</span> <br>";
       buffer += "</div>";

  */
       params = Object();
       params['id'] = id;
       params['asset_id'] = asset_id;
       console.log(" --- asset_id_ ", asset_id)
       if (asset_id > 0)
          {
          console.log(" read data for... ",asset_id);
          getdata2(callback_readasset_forlist, params, "atomicassets", config_contract, "assets", asset_id, "", "", 1 );
          }


       } // if
    } // for i...

//document.getElementById("myassets").innerHTML = buffer ;

} // callback_load_my_assets




var own_collectors = Array();



function load_my_assets()
{
own_collectors = [];

getdata(callback_load_my_assets, config_contract, config_contract, "area", global_account, 2, "name", 500 );


} // load_my_assets()
</script>


<!--
<div id='mydebug'>...</div>
-->

<br>


<div style='clear:both;'></div>

<div class='noselect' style='width:100%;text-align:left;margin-left:10px;margin-bottom:10px;border:none'>
   <div style='display:inline-block;width:220px;'>
      <label style='cursor:pointer;'>  <input id='checkbox_shield' type='checkbox' onchange='toggle_info()' style='float:left;'> <span style='' data-lang="en">Show Shield &amp; SOV</span><span style='' data-lang="cn">显示护盾和SOV</span> </label>
   </div>
   
   <div style='display:inline-block; margin-left: 20px;width:220px;'>
      <label style='cursor:pointer;'>  <input id='checkbox_owner' type='checkbox' onchange='toggle_info()' style='float:left;'> <span style='' data-lang="en">Show Owner</span><span style='' data-lang="cn">显示拥有者</span> </label>     
   </div>
   
  
</div>


<div style='clear:both;'></div>



 






<!-- automap -->
<div style='margin-left:20px;'>
   <span data-lang="en" id='canvasfolder_openclose_en' class='canvasfolder_openclose' onclick='canvasfolder_toggle()'>Automap &#9660;</span>
   <span data-lang="cn" id='canvasfolder_openclose_cn' class='canvasfolder_openclose' onclick='canvasfolder_toggle()'>自动地图 &#9660;</span>
 </div>

<div id='canvasfolder' style='height:50px;border:none'>
 <div id='canvasmain' class='imground' style='margin-left:20px;border:2px solid #666666;cursor:crosshair;width:95%;height:98%;overflow:hidden;'>
 <canvas id='navmap' width='400' height='400' style='width:100%;' ></canvas>
 </div>
</div>

<canvas id='navmaphidden' width='400' height='400' style='visibility:hidden;overflow:hidden;position:absolute;' ></canvas>





<!---- chatbox -->

<!--
<div style='margin-left:20px;'>  <span id='canvasfolder_openclose' class='canvasfolder_openclose' onclick='canvasfolder_toggle()'>Expand Automap &#9660;<span></div>

<div id='canvasfolder' style='height:50px;border:none'>
 <div id='canvasmain' class='imground' style='margin-left:20px;border:2px solid #666666;cursor:crosshair;width:95%;height:60%;overflow:hidden;'>
 <canvas id='navmap' width='400' height='200' style='width:100%;' ></canvas>
 </div>
</div>

-->

<br>

<div style='margin-left:20px;'>  
   <span data-lang="en" id='chatfolder_openclose_en' class='canvasfolder_openclose' onclick='chatfolder_toggle()'>Chat &#9660;</span>
   <span data-lang="cn" id='chatfolder_openclose_cn' class='canvasfolder_openclose' onclick='chatfolder_toggle()'>聊天 &#9660;</span>
</div>

<div id='chatfolder' class='imground'  style='height:50px;border:none;overflow:hidden;border:2px solid #666666;margin-left:20px;width:95%;'>
 <div id='chatbox'   style='overflow:hidden;' >
  <div id='chatbox_all' class='chatbox_left'  style='float:left;padding:10px;'>

  <div id='chatbox_all_title' class='chatbox_title'><strong data-lang="en">Public Chat</strong><strong data-lang="cn">公共聊天</strong></div>
  <div id='chatbox_all_content_outer' class='chatbox_content_outer' >
   <div id='chatbox_all_content' class='chatbox_content'  style=''>
   ...
   </div>
  </div>

  <br>
  <input type='text' id='chatinput_all' class='chatinput'> <button onclick='chatsend(1);' class='chatinputsend'><span data-lang="en">send &#10148;</span><span data-lang="cn">发送 &#10148;</span></button>
  </div>

  <div id='chatbox_myrace' class='chatbox_right' style='float:left;padding:10px;'>

  <div id='chatbox_myrace_title' class='chatbox_title' >...</div>
  <div id='chatbox_myrace_content_outer' class='chatbox_content_outer' >
   <div id='chatbox_myrace_content' class='chatbox_content'  style=''>
   ...
   </div>
  </div>

  <br>
  <input type='text' id='chatinput_myrace' class='chatinput'> <button onclick='chatsend(2);' class='chatinputsend'><span data-lang="en">send &#10148;</span><span data-lang="cn">发送 &#10148;</span></button>
  </div>

 </div>
</div>
<!---- END - chatbox -->





<div style='float:left;;margin-left:20px;margin-top:20px;border:none;'>

<select id="select_fav_objects" class='select_fav_objects'  >
</select>
</div>


<div style='float:left;width:150px;margin-left:20px;margin-top:20px;border:none;'>
 <div onclick='load_my_assets()' class='refreshboard' style='width:100%;'><span data-lang="en">Update list</span><span data-lang="cn">更新列表</span></div>
</div>

<div style='clear:both;'></div>



 
<br>





<div style='100%'>
 <div id='checkbox_owner' class='refreshboard'  onclick='history_info(1)' style='float:left;margin-left:20px;margin-right:20px;'><span data-lang="en">Destruction History (24h) &#8634;</span><span data-lang="cn">销毁历史记录(24小时) &#8634;</span></div><div onclick='history_info(0)' class='refreshboard' style='float:left;'><span data-lang="en">Clear</span><span data-lang="cn">清除</span></div>
 <div style='clear:both;'></div>
 <div id='historyinfo' class='imground'  style='margin-left:20px;height:20px;overflow:hidden;border:2px solid #666666;width:93.5%;padding:10px;  -ms-user-select: text;    -webkit-user-select:text ;    -moz-user-select: text;    user-select: text; '>...</div>
</div>  
  



</div> <!-- page1 -->




<div id='page2' style='height:0px;overflow:hidden;'>
<br>

<div style='margin-left:30px;'>


<div style='width:50%;float:left;'>
 <strong data-lang="en">Quick Buy SOV from a Dex</strong><strong data-lang="cn">从Dex快速购买SOV</strong><br>
 <input id='eos_for_sov' type='text' value='0.01' style='margin-bottom:5px;width:100px;'> EOS<br>
 <div onclick='buysov_sovdex()' class='buybutton'><span data-lang="en">buy SOV from sovdex</span><span data-lang="cn">从sovdex购买SOV</span></div>
 <div onclick='buysov_newdex()' class='buybutton' style='margin-left:10px;'><span data-lang="en">buy SOV from newdex</span><span data-lang="cn">从newdex购买SOV</span></div><br>
</div>

<div style='width:50%;float:left;'>
<strong data-lang="en">Links to exchanges</strong><strong data-lang="cn">交易所链接</strong><br>
<a href='https://sovtools.github.io/sovdex/' target='_blank' style='color:#5555ff;'>SOVDEX</a><br> 
<span data-lang="en">(Anchor-support, high liquidity, probably the cheapest way to buy SOV)</span><span data-lang="cn">(Anchor-support, 高流动性, 可能是购买SOV最便宜的方式)</span><br>
<br>
<a href='https://newdex.io/trade/sovmintofeos-sov-eos' target='_blank' style='color:#5555ff'>newdex.io</a><br>
<br>
<span data-lang="en">You may also buy <em>XSOV</em> at <a href='https://defibox.io/pool-market-details/1720' style='color:#5555ff'>defibox.io</a> and swap for SOV on <a href='https://soveos.github.io/xsov.app/' style='color:#5555ff'>soveos.github.io/xsov.app</a></span>
<span data-lang="cn">您也可以购买 <em>XSOV</em> 在 <a href='https://defibox.io/pool-market-details/1720' style='color:#5555ff'>defibox.io</a> 并在上交换为SOV <a href='https://soveos.github.io/xsov.app/' style='color:#5555ff'>soveos.github.io/xsov.app</a></span>
</div>
<div style='clear:both;'></div>



</div>





<div>
 <span onclick='' class='' style='text-align:center;float:left;padding:5px;margin-top:10px;margin-left:20px;width:230px;margin-left:auto;'><p data-lang="en">Your NFT Wallet:</p><p data-lang="cn">您的NFT钱包:</p></span>
 <span onclick='loadinventory()' class='refreshboard' style='float:right;margin-right:20px;width:230px;margin-left:auto;margin-bottom:2px;cursor:pointer;'><p style="margin-top:2px; margin-bottom:2px;" data-lang="en">Update NFT Inventory &#8634;</p><p style="margin-top:2px; margin-bottom:2px;" data-lang="cn">更新NFT库存 &#8634;</p></span>
 <div style='clear:both;'></div>
</div>


<div id='page2content' style=''>


<div style='text-align:center;'>

 <div id='div_inventory2' class='div_inventory' style='height:250px;width:95%;'>
  <div id='div_inventory_inner2' class='div_inventory_inner' style=''>
  </div> <!-- div_inventory_inner -->
 </div> <!-- div_inventory -->
</div> <!-- center -->

</div> <!-- page2content -->

<div class='hintbox'>
<small data-lang="en">* Sell to the in-game marketplace. Prices are algorithmically determined by each NFT's circulating supply (see prices below)</small>
<small data-lang="cn">* 在游戏内市场上出售。每个NFT的流通供应量决定价格 (请参见下面的价格)</small>
</div>

<br>
<br>

<!--
<div style='text-align:center'>
<span onclick='callback_loadmarkets()' class='refreshboard' style='margin-left:auto;margin-right:auto;width:250px;margin-bottom:2px;cursor:pointer;'>Update Prices &#8634;</span>
</div>
-->
<div style='clear:both;'></div>


<div id='mintarea' style='margin-left:20px;'>
...
</div> <!-- mintarea -->



<br>
<br>


</div> <!-- page2 -->



<div id='page3' style='height:0px;overflow:hidden;'>

   <div style='margin:20px'>
   <h1 data-lang="en">Game Overview and Rules</h1><h1 data-lang="cn">游戏概述和规则</h1>
   <br>
   <strong data-lang="en">Disclaimer: Play at your own risk! Smartcontracts can be complex systems and potentially vulnerable to exploits and bugs.
   <br>
   <br>
   
   Please play responsibly and don't risk tokens you can't afford to lose.</strong>
   <strong data-lang="cn">免责声明：自担风险！智能合约是复杂的系统，可能容易受到漏洞和错误的影响。
      <br>
      <br>
      
      请负责任地参与，不要冒险使用您不能承受损失的代币。</strong>
   <br>
   
   <br>
   
   <div data-lang="en" style='text-align:center'>
   <a href='https://www.youtube.com/watch?v=55bDEKNanE0' target='_blank' style='color:#5555ff;text-decoration:none;'>&raquo; Tutorial Video Getting-Started &laquo;</a>
   </div>
   <div data-lang="cn" style='text-align:center'>
      <a href='https://www.youtube.com/watch?v=55bDEKNanE0' target='_blank'>教程视频 - 入门指南</a>
      </div>
   
   <br>
   <span data-lang="en">SOV INVADERS is a persistent open-world RTS (real time strategy) game that uses NFTs (non fungible tokens) and AMMs (automated market makers) for a dynamic and liquid economy.
   Players can use teamwork, advanced battle tactics, pure mindless destruction and anything in between to achieve their goals!
   <br>
   <br>
   SOV INVADERS uses SOV as its in-game currency - no land-sale, no new tokens no NFT fund raise.
   <br>
   All SOV used to mint SOV INVADERS NFTs stays in the sovspacegame contract until the NFTs are either destroyed in battle, or are sold back to their AMM.
   <br>
   <br>
   <br>
   The Basic Rules (please read carefully):
   <ul>
   <li><strong>The aim of the game is to earn SOV and SVX.</strong> Build collectors to earn SVX and destroy structures and units of the opposing species to earn SOV .</li>
   <br><li>The first time an account plays, it much choose a species.  Please choose carefully as this decision will be permanently bound to the account cannot be undone.</li>
   <br><li>Structures and units are minted as NFTs via the games AMMs. These NFTs can then be placed on the map or sold back to the AMM.
     Each time an NFT is minted, its value will increase. Each time an NFT is destroyed or sold, its value will decrease.</li>
   <br><li>In order to build offensive units (Bulldozers, Tanks, Service Units, R.E.D.s), you will need to have the required Invader points <i class="fa-solid fa-person-military-rifle"></i> to support them. Invader points are given to players for each placed Residence, Agriculture, and Collector they own, and they are reduced by each placed Tank, Bulldozer, Service Unit, and R.E.D. they own. Players can easily check their or any other players available Invader Points by selecting a structure or unit, and looking in the menu.</li>
   <br><li>If an NFT becomes destroyed by a member of an opposing species, the NFT will be sold to the AMM and the SOV will be sent to the player that destroyed it, instantly.
     Destroyed NFTs (and also NFTs sold to the AMMs by traders) will be burned and removed from the supply.</li>
   <br><li>Every NFT-type (e.g. Grey-Bulldozer) has its own AMM and independent price. The result is a completely dynamic economy where players can trade with the AMMs and rewards for
     destroying all NFT types will fluctuate. This means sometimes it will be most profitable to attack Human-Tank, or Repto-Collector, etc.. making for interesting
     dynamics in the gameplay and strategy, including economic warfare. This also enables the game to balance naturally according to market dynamics.</li>
   <br><li>The lander is the only NFT that can be placed on undeveloped areas of the map. This includes any 'natural' surface tile as well as terraformed tiles. </li>
   <br><li>Aside from the Lander, all structures must be built next to an existing structure of your own species.</li>
   <br><li>In order to build something adjacent to a building of your species that you do not own, the other player's building will need to either be nicknamed 'OPEN', or they need to authorize you on that building via the authorize action. Please keep in mind, even if something is open or you are authorized, all players have the right to <strong> demolish </strong>same species younger adjacent structures. Players can demolish younger adjacent structures by selecting their structure, clicking 'demolish' and clicking the arrow pointing in direction of the building they would like to demolish.</li>
   <br><li>A <strong>demolish</strong>-action will result in a 100% of the SOV being burned for SVX mining.  The SVX mined will go to Collector owners, divided equally per Collector on the map.</li>
   <br><li>Bulldozers, Tanks, Service Units, and Transporters can freely move around the map.  Tanks, Bulldozers, and Service Units can also attack other species NFTs.</li>
   <br><li>Moving, attacking, and repairing actions cost fuel paid in SOV. The only exception to this is when moving when on a street of your species, the SOV will be refunded. 100% of fuel costs are used to automatically mine SVX that is distrubuted to Collectors, giving everything back to the players.</li>
   <br><li>Once a player places an NFT on the map, they can set a <strong>personal nickname</strong>, stored in the mutable NFT-attributes. This will allow easy searching of game items, as well as other abilities gone over in the individual unit descriptions below.</li>
   </ul>
   <br>
   Icon Key <small><i class="fa fa-shield" style="color:#3175bd; padding-right:5px; padding-top:10px"></i> = Shield, <i class="fa-solid fa-person-military-rifle" style="color:#8a8794; padding-right:5px; padding-top:10px"></i> = Invader Points, <i class="fa fa-gun" style="color:#2a4d33; padding-right:5px; padding-top:10px"></i> = Attack Damage, <i class="fa fa-bullseye" style="color:#e53d00; padding-right:5px; padding-top:10px"></i> = Range, <i class="fa fa-burst" style="color:#B9D0D5; padding-right:5px; padding-top:10px"></i> = Detonation Damage, <i class="fa fa-truck-moving" style="color:#8a8794; padding-right:5px; padding-top:10px"></i> = Capacity </small>
   <br>
   <br>
   <br>
   <strong>Individual Unit Abilities and Functions</strong>
   <br>
   <br>
   </span>
   <span data-lang="cn">SOV INVADERS 是一个持续的开放世界 RTS（实时策略）游戏，使用 NFT（非同质化代币）和 AMM（自动做市商）实现动态且流动的经济体系。
      玩家可以通过团队合作、先进的战斗策略、纯粹的无脑破坏和其他方式来实现他们的目标！
      <br>
      <br>
      SOV INVADERS 使用 SOV 作为其游戏内货币 - 没有土地销售，没有新代币，没有 NFT 募资。
      <br>
      用于铸造 SOV INVADERS NFT 的所有 SOV 都保留在 sovspacegame 合约中，直到 NFT 在战斗中被摧毁或被出售回其 AMM。
      <br>
      <br>
      <br>
      基本规则（请仔细阅读）：
      
      <ul>
      <li><strong>游戏的目标是赚取 SOV 和 SVX。</strong> 建立收集器以赚取 SVX，并摧毁对方物种的建筑和单位以赚取 SOV。</li>
      <br><li>帐户第一次玩游戏时，必须选择一个物种。 请谨慎选择，因为这个决定将永久绑定到帐户，无法撤销。</li>
      <br><li>结构和单位通过游戏的 AMM 铸造为 NFT。然后，这些 NFT 可以放置在地图上或出售回 AMM。
        每次铸造 NFT 时，其价值将增加。每次 NFT 被摧毁或出售时，其价值将减少。</li>
      <br><li>为了建立进攻性军事单位（推土机，坦克，服务单位，R.E.D.），您需要拥有足够的军事点数 <i class="fa-solid fa-person-military-rifle"></i> 来支持它们。军事点数是为玩家提供的，他们拥有每个放置的住宅、农业和收集器，同时也会因为拥有的每个放置的坦克、推土机、服务单位和 R.E.D. 而减少。玩家可以轻松检查自己或其他玩家的可用军事点数，只需选择一个结构或单位，然后查看菜单。</li>
      <br><li>如果 NFT 被对立物种的成员摧毁，NFT 将被出售给 AMM，摧毁它的玩家将立即获得 SOV。
        被摧毁的 NFT（以及被交易者出售给 AMM 的 NFT）将被销毁并从供应中移除。</li>
      <br><li>每种NFT 类型（例如：灰色推土机）都有自己的 AMM 和独立价格。结果是一个完全动态的经济体系，玩家可以与 AMM 进行交易，摧毁所有 NFT 类型的奖励将波动。这意味着有时攻击人类坦克或 Repto 收集器等可能会最具盈利性，从而使游戏和战略的动态变得有趣，包括经济战。这也使游戏能够根据市场动态自然平衡。</li>
      <br><li>着陆器是唯一可以放置在地图未开发区域的 NFT。这包括任何“自然”表面砖以及地形砖。</li>
      <br><li>除了登陆器之外，所有建筑必须在您自己种族的现有建筑旁边建造。</li>
      <br><li>要在您不拥有的同种族建筑旁边建造东西，其他玩家的建筑需要被命名为“OPEN”，或者他们需要通过授权操作在该建筑上授权给您。请注意，即使某物是开放的或者您被授权，所有玩家都有权<strong>拆除</strong>同种族年轻的相邻建筑。玩家可以通过选择他们的建筑，点击“拆除”并点击指向他们想要拆除的建筑方向的箭头来拆除年轻的相邻建筑。</li>
      <br><li>一项<strong>拆除</strong>操作将导致 100% 的 SOV 被燃烧以进行 SVX 挖矿。SVX 挖到的将转到收集器所有者，地图上每个收集器平均分配。</li>
      <br><li>推土机，坦克，服务单位和运输器可以在地图上自由移动。坦克、推土机和服务单位还可以攻击其他物种的 NFT。</li>
      <br><li>移动、攻击和修复操作需要用 SOV 支付燃料费。唯一的例外是当在您自己物种的街道上移动时，SOV 将被退还。燃料费用的 100% 用于自动挖矿 SVX，分发给收集器，让一切回到玩家手中。</li>
      <br><li>玩家将 NFT 放置在地图上后，可以设置一个<strong>个人昵称</strong>，存储在可变的 NFT 属性中。这将允许轻松搜索游戏项目，以及在下面的各个单位描述中详细介绍的其他功能。</li>
      </ul>
      <br>
      图标说明 <small><i class="fa fa-shield" style="color:#3175bd; padding-right:5px; padding-top:10px"></i> = Shield, <i class="fa-solid fa-person-military-rifle" style="color:#8a8794; padding-right:5px; padding-top:10px"></i> = Invader Points, <i class="fa fa-gun" style="color:#2a4d33; padding-right:5px; padding-top:10px"></i> = Attack Damage, <i class="fa fa-bullseye" style="color:#e53d00; padding-right:5px; padding-top:10px"></i> = Range, <i class="fa fa-burst" style="color:#B9D0D5; padding-right:5px; padding-top:10px"></i> = Detonation Damage, <i class="fa fa-truck-moving" style="color:#8a8794; padding-right:5px; padding-top:10px"></i> = Capacity </small>
      <br>
      <br>
      <br>
      <strong>单个单位能力和功能</strong>
      <br>
      <br>
      </span>
   
   <h2 data-lang="en">Lander
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
     </span>
   </h2>
   <h2 data-lang="cn">登陆舰
   <span class="fa-stack fa-1x">
      <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
      <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
   </span>
   </h2>
   <img src='img/nft_1_1.png' style='width:100px; padding-right:5px'><img src='img/nft_2_1.png' style='width:100px; padding-right:5px'><img src='img/nft_4_1.png' style='width:100px; padding-right:5px'><img src='img/nft_5_1.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">The Lander is the only structure that can be placed on any free area of the surface. All other structures must be built next to
   an existing structure from your species. A lander cannot be placed on an existing street, only on natural surfaces and terraformed tiles (examples below).
   <br>   
   <img src='img/lander_tile1.png' style='width:50px; padding-left:5px'><img src='img/lander_tile2.png' style='width:50px; padding-left:5px'><img src='img/lander_tile3.png' style='width:50px; padding-left:5px'><img src='img/lander_tile4.png' style='width:50px; padding-left:5px'><img src='img/lander_tile5.png' style='width:50px; padding-left:5px'><img src='img/lander_tile6.png' style='width:50px; padding-left:5px'>
   <br><br> Players can build Streets, Residences, Walls, Wall IIs, Terrain, and Towers directly adjacent to Landers.
   </span>
   <span data-lang="cn">着陆器是唯一可以放置在表面任何空闲区域的结构。所有其他结构必须在您物种的现有结构旁边建造。着陆器不能放置在现有的街道上，只能放置在自然表面和地形砖上（下面举例）。
   <br>
   <img src='img/lander_tile1.png' style='width:50px; padding-left:5px'><img src='img/lander_tile2.png' style='width:50px; padding-left:5px'><img src='img/lander_tile3.png' style='width:50px; padding-left:5px'><img src='img/lander_tile4.png' style='width:50px; padding-left:5px'><img src='img/lander_tile5.png' style='width:50px; padding-left:5px'><img src='img/lander_tile6.png' style='width:50px; padding-left:5px'>  
   <br><br> 玩家可以在着陆器旁边直接建造街道、住宅、墙壁、二级墙、地形和塔楼。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Residence
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
     </span>
     <span class="fa-stack fa-1x">
      <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
      <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#00FF40">+1</small>
    </span>
   </h2>
   <h2 data-lang="cn">住所
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
      </span>
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#00FF40">+1</small>
       </span>
    </h2>
   <img src='img/nft_1_2.png' style='width:100px; padding-right:5px'><img src='img/nft_2_2.png' style='width:100px; padding-right:5px'><img src='img/nft_4_2.png' style='width:100px; padding-right:5px'><img src='img/nft_5_2.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Residences must be built directly adjacent to an existing same-species building. Residences give players +1 Invader Points. 
   <br><br>
   Players can build Agricultures, Streets, Residences, Walls, Wall IIs, Terrain, and Towers directly adjacent to Residences.   
   </span>
   <span data-lang="cn">住宅必须直接建在现有同种族建筑物旁边。住宅为玩家提供 +1 军事点数。
   <br><br>
   玩家可以在住宅旁边直接建造农业、街道、住宅、墙壁、二级墙、地形和塔楼。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Agriculture
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
     </span>
     <span class="fa-stack fa-1x">
      <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
      <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#00FF40">+1</small>
    </span>
   </h2>
   <h2 data-lang="cn">农业
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
      </span>
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#00FF40">+1</small>
       </span>
    </h2> 
   <img src='img/nft_1_3.png' style='width:100px; padding-right:5px'><img src='img/nft_2_3.png' style='width:100px; padding-right:5px'><img src='img/nft_4_3.png' style='width:100px; padding-right:5px'><img src='img/nft_5_3.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Agricultures must be built directly adjacent to a Residence. Agricultures give players +1 Invader Points. 
   <br><br>
   Players can build Factories, Streets, Residences, Walls, Wall IIs, Terrain, and Towers directly adjacent to Agricultures.
   </span>
   <span data-lang="cn">农业必须直接建在住宅旁边。农业为玩家提供 +1 军事点数。
   <br><br>
   玩家可以在农业旁边直接建造工厂、街道、住宅、墙壁、二级墙、地形和塔楼。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Factory
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
     </span>
   </h2>
   <h2 data-lang="cn">工厂
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
      </span>
    </h2> 
   <img src='img/nft_1_4.png' style='width:100px; padding-right:5px'><img src='img/nft_2_4.png' style='width:100px; padding-right:5px'><img src='img/nft_4_4.png' style='width:100px; padding-right:5px'><img src='img/nft_5_4.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Factories must be built directly adjacent to an Agriculture. Factories allow players to place and repair mobile units on any of its 4 adjacent tiles. 
   <br><br>
   24 hours after a Factory has been placed on the map, it can repair one mobile unit for free, every 24 hours, otherwise repairs cost 50% of the units current market price. To repair a mobile unit with the Facotry, first move the unit to one of the 4 directly adjacent tiles to the Factory, then select the factory, select reapir, and click the arrow pointing in the direction of the unit you would like to repair.
   <br><br>
   Players can also nickname Factories 'OPEN' if they would like to allow other members of their species to place mobile units on the map using their factory.  Players can repeat the action but leave the nickname input field blank, to stop allowing same species member to use their Factory. 
   <br><br>
   Players can build Collectors, Streets, Residences, Walls, Wall IIs, Terrain, and Towers directly adjacent to Factories.
   </span>
   <span data-lang="cn">工厂必须直接建在农业旁边。工厂允许玩家在其任意一个相邻的 4 个瓦片上放置和修复移动单位。
   <br><br>
   在工厂放置在地图上 24 小时后，它可以每 24 小时免费修复一个移动单位，否则修理费用为单位当前市场价格的 50%。要使用工厂修理移动单位，首先将单位移动到工厂直接相邻的 4 个瓦片之一，然后选择工厂，选择修复，然后点击指向要修复的单位的箭头。
   <br><br>
   玩家还可以将工厂命名为“OPEN”，如果他们想让同类成员使用他们的工厂在地图上放置移动单位。玩家可以重复执行操作，但将昵称输入字段留空，以停止允许同类成员使用他们的工厂。
   <br><br>
   玩家可以在工厂旁边直接建造收集器、街道、住宅、墙壁、二级墙、地形和塔楼。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Collector
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">200</small>
     </span>
     <span class="fa-stack fa-1x">
      <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
      <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#00FF40">+4</small>
    </span>
   </h2>
   <h2 data-lang="cn">收集器
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">200</small>
      </span>
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#00FF40">+4</small>
       </span>
    </h2>
   <img src='img/nft_1_8.png' style='width:100px; padding-right:5px'><img src='img/nft_2_8.png' style='width:100px; padding-right:5px'><img src='img/nft_4_8.png' style='width:100px; padding-right:5px'><img src='img/nft_5_8.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Collectors must be built directly adjacent to a Factory or another Collector. Collectors give players +4 Invader Points. 
   <br><br>
   With a Collector facility you can earn SVX-tokens. Each collector has a claim right that players can use once per 24 hours (non accruing). Each claim gives the Collector owner a fixed % of the Collector SVX pool in the sovspacegame contract. SVX is added to the Collector pool on all player actions that burn SOV (moving, attacking, repairing, demolishing, detonating R.E.D.s and Service Units). The more active the players are, the more the SVX token is mined.
   <br><br>
   Players can build Collectors, Streets, Residences, Walls, Wall IIs, Terrain, and Towers directly adjacent to Collectors.
   </span>
   <span data-lang="cn">收集器必须直接建在工厂或另一个收集器旁边。收集器为玩家提供 +4 军事点数。
   <br><br>
   通过收集器设施，您可以赚取 SVX 代币。每个收集器都有一个索赔权，玩家可以每 24 小时使用一次（不累积）。每次索赔都会为收集器拥有者提供 sovspacegame 合约中收集器 SVX 池的固定百分比。在所有燃烧 SOV 的玩家操作上（移动、攻击、修理、拆除、引爆 R.E.D.s 和服务单位），向收集器池添加 SVX。玩家越活跃，开采的 SVX 代币就越多。
   <br><br>
   玩家可以在收集器旁边直接建造收集器、街道、住宅、墙壁、二级墙、地形和塔楼。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Wall
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">300</small>
     </span>
   </h2>
   <h2 data-lang="cn">城墙
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">300</small>
      </span>
    </h2>
   <img src='img/nft_1_7.png' style='width:100px; padding-right:5px'><img src='img/nft_2_7.png' style='width:100px; padding-right:5px'><img src='img/nft_4_7.png' style='width:100px; padding-right:5px'><img src='img/nft_5_7.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Walls must be built directly adjacent to an existing same-species building. The Wall is a defensive structure with a high shield value used to help protect bases and important structures. 
   <br><br>
   Players can build Streets, Residences, Walls, Wall IIs, Terrain, and Towers directly adjacent to Walls.
   </span>
   <span data-lang="cn">墙壁必须直接建在现有同种族建筑物旁边。墙壁是具有高防护值的防御性结构，用于保护基地和重要结构。
   <br><br>
   玩家可以在墙壁旁边直接建造街道、住宅、墙壁、二级墙、地形和塔楼。
   </span>
   <br>
   <br>
   
   
   <h2 data-lang="en">Wall II
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">600</small>
     </span>
   </h2>
   <h2 data-lang="cn">城墙 II
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">600</small>
      </span>
    </h2>
   <img src='img/nft_1_13.png' style='width:100px; padding-right:5px'><img src='img/nft_2_13.png' style='width:100px; padding-right:5px'><img src='img/nft_4_13.png' style='width:100px; padding-right:5px'><img src='img/nft_5_13.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Wall IIs must be built directly adjacent to an existing same-species building. The Wall II is an even stronger defensive structure with a high shield value used to help protect bases and important structures. 
   <br><br>
   Players can build Streets, Residences, Walls, Wall IIs, Terrain, and Towers directly adjacent to Wall IIs.
   </span>
   <span data-lang="cn">二级墙必须直接建在现有同种族建筑物旁边。二级墙是一个更强大的防御性结构，具有高防护值，用于保护基地和重要结构。
   <br><br>
   玩家可以在二级墙旁边直接建造街道、住宅、墙壁、二级墙、地形和塔楼。
   </span>
   <br>
   <br>
   
   
   <h2 data-lang="en">Tower
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">200</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-gun fa-stack-2x" style="color:#2a4d33"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">4</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">3</small>
     </span>
   </h2>
   <h2 data-lang="cn">塔楼
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">200</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-gun fa-stack-2x" style="color:#2a4d33"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">4</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">3</small>
      </span>
    </h2>
   <img src='img/nft_1_9.png' style='width:100px; padding-right:5px'><img src='img/nft_2_9.png' style='width:100px; padding-right:5px'><img src='img/nft_4_9.png' style='width:100px; padding-right:5px'><img src='img/nft_5_9.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Towers must be built directly adjacent to a same-species building. 
   <br><br>
   A Tower is a building for automated defense. If an enemy vehicle moves or attacks while in the range of a tower (red area on click), it suffers damage.
   If an enemy NFT is destroyed by more than one Tower, the SOV will go to the oldest Tower (taken from mint Timestamp).
   Towers can be activated and deactivated by their owner.  This can be useful if an inter-species alliance is formed in order to prevent the Tower from automatically causing damage to an Ally of another species.
   <br><br>
   Players can build Towers, Streets, Residences, Walls, Wall IIs, and Terrain directly adjacent to Towers.
   </span>
   <span data-lang="cn">防御塔必须直接建在现有同种族建筑物旁边
   <br><br>
   塔楼是用于自动防御的建筑。如果敌方车辆在塔楼范围内（单击时的红色区域）移动或攻击，它将受到伤害。
   如果一个敌方 NFT 被多个塔楼摧毁，SOV 将流向最早的塔楼（从铸币时间戳取得）。
   塔楼可以由其所有者激活和停用。如果组建一个跨物种联盟，这可能是有用的，以防止塔楼自动对另一个物种的盟友造成损害。
   <br><br>
   玩家可以在塔楼旁边直接建造塔楼、街道、住宅、墙壁、二级墙和地形。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Service Unit
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#FF0000">2</small>
       </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">30</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-burst fa-stack-2x" style="color:#B9D0D5"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#e53d00">60</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">1X4</small>
     </span>
   </h2>
   <h2 data-lang="cn">服务单位
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#FF0000">2</small>
       </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">30</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-burst fa-stack-2x" style="color:#B9D0D5"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#e53d00">60</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">1X4</small>
      </span>
    </h2>
   <img src='img/nft_1_10.png' style='width:100px; padding-right:5px'><img src='img/nft_2_10.png' style='width:100px; padding-right:5px'><img src='img/nft_4_10.png' style='width:100px; padding-right:5px'><img src='img/nft_5_10.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Building a Service Unit requires the player to have at least 2 available Invader Points. Service Units must be built directly adjacent to a Factory.  Service Units can be repaired on any tile directly adjacent to a Factory. A service unit allows you to repair damaged buildings of the same species that are directly adjacent to the Service Unit. The cost of a repair is 50% of the structures current market price. SOV paid for repairs is used to mine SVX and added to the Collector pool.
   <br><br>
   Service Units also have a Kamikaze attack in which they can be detonated for an explosion that does 60 damage to all (4) directly adjacent tiles.  A Kamikaze attack can only be triggered when there are no same species units or buildings directly adjacent to the Service Unit.
   In the event of a Kamikaze attack, the SOV value of the Service Unit will go towards mining SVX and the SVX will be added to the Collector pool.  SOV from enemy Units destroyed by a Kamikaze attack will go to the owner of the Service Unit.
   <br><br>
   To initiate Kamikaze attack, first click on your Service Unit, after that you will see the explosion radius and you only need to click detonate.
   Please note, this unit is not able to repair mobile units like tanks or transporters. Mobile units needs to park adjacent to a Factory to be repaired.
   </span>
   <span data-lang="cn">建造服务单元需要玩家至少拥有 2 个可用的军事点数。服务单元必须直接建在工厂旁边。服务单元可以在工厂直接相邻的任何格子上进行修理。服务单元允许您修理与服务单元直接相邻的同类受损建筑。修理费用为结构当前市场价格的 50%。用于修理的 SOV 用于开采 SVX 并添加到收集器池中。
   <br><br>
   服务单元还具有神风攻击功能，它们可以引爆，对所有（4个）直接相邻的格子造成 60 点伤害。只有在服务单元直接相邻没有同类单位或建筑的情况下，才能触发神风攻击。
   在神风攻击事件中，服务单元的 SOV 值将用于开采 SVX，而 SVX 将被添加到收集器池中。由神风攻击摧毁的敌方单位的 SOV 将归服务单元的所有者所有。
   <br><br>
   要发动神风攻击，首先点击您的服务单元，之后您将看到爆炸范围，只需点击引爆即可。
   请注意，该单元无法修理移动单元，如坦克或运输机。移动单元需要停靠在工厂旁边进行修理。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Transporter
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-truck-moving fa-stack-2x" style="color:#8a8794"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">4</small>
     </span>
   </h2>
   <h2 data-lang="cn">运输车
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-truck-moving fa-stack-2x" style="color:#8a8794"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">4</small>
      </span>
    </h2>
   <img src='img/nft_1_12.png' style='width:100px; padding-right:5px'><img src='img/nft_2_12.png' style='width:100px; padding-right:5px'><img src='img/nft_4_12.png' style='width:100px; padding-right:5px'><img src='img/nft_5_12.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Transporters must be built directly adjacent to a Factory. Transporters can be repaired on tiles directly adjacent to a Factory. With a transporter you can move up to 4 of your own units together as one, or a single R.E.D..
   <br><br>
   Place the units to be transported on the 4 sides of the transporter and click "load".
   To unload click on "unload". Even if you are only transporting a single unit, all four
   tiles next to the transporter must be free, for both loading and unloading. R.E.D.s are always loaded and unloaded on the tile directly in front of the Transporter.
   </span>
   <span data-lang="cn">运输机必须直接建在工厂旁边。运输机可以在工厂直接相邻的格子上进行修理。有了运输机，您可以将最多 4 个自己的单位作为一个整体进行移动，或者单独运输一个 R.E.D.。
   <br><br>
   将要运输的单位放在运输机的四周，并点击“装载”。
   要卸载，请点击“卸载”。即使您只运输一个单位，运输机旁边的四个格子都必须是空的，用于装载和卸载。R.E.D.s 始终在运输机正前方的格子上装载和卸载。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Bulldozer
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#FF0000">2</small>
       </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-gun fa-stack-2x" style="color:#2a4d33"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">15</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">1</small>
     </span>
   </h2>
   <h2 data-lang="cn">推土机
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#FF0000">2</small>
       </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">100</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-gun fa-stack-2x" style="color:#2a4d33"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">15</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">1</small>
      </span>
    </h2>
   <img src='img/nft_1_5.png' style='width:100px; padding-right:5px'><img src='img/nft_2_5.png' style='width:100px; padding-right:5px'><img src='img/nft_4_5.png' style='width:100px; padding-right:5px'><img src='img/nft_5_5.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Building a Bulldozer requires the player to have at least 2 available Invader Points. Bulldozers must be built directly adjacent to a Factory. Bulldozers can be repaired on any tile directly adjacent to a Factory. 
   <br><br>
   A bulldozer can perform a variety of actions. It can move to unoccupied adjacent tiles, terraform (build new tiles) empty adjacent tiles, self-destruct its owners buildings on adjacent tiles, and attack opposing species NFTs on adjacent tiles.
   <br><br>
   If a bulldozer is attacked by an enemy unit directly adjacent to it, it will automatically attack back.
   </span>
   <span data-lang="cn">建造推土机需要玩家至少拥有2个可用的入侵者点数。推土机必须直接建在工厂旁边。推土机可以在与工厂直接相邻的任何瓷砖上进行修理。
   <br><br>
   推土机可以执行多种操作。它可以移动到空闲的相邻瓷砖，对空闲的相邻瓷砖进行地形改造（建造新瓷砖），在相邻瓷砖上自毁所有者的建筑，以及攻击相邻瓷砖上的对立种族NFT。
   <br><br>
   如果推土机受到直接相邻的敌方单位的攻击，它将自动反击。
   </span>
   <br>
   <br>
   
   
   <h2 data-lang="en">Tank
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#FF0000">4</small>
       </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">120</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-gun fa-stack-2x" style="color:#2a4d33"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">10</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">3</small>
     </span>
   </h2>
   <h2 data-lang="cn">坦克
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#FF0000">4</small>
       </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">120</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-gun fa-stack-2x" style="color:#2a4d33"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">10</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">3</small>
      </span>
    </h2>
   <img src='img/nft_1_11.png' style='width:100px; padding-right:5px'><img src='img/nft_2_11.png' style='width:100px; padding-right:5px'><img src='img/nft_4_11.png' style='width:100px; padding-right:5px'><img src='img/nft_5_11.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Building a Tank requires the player to have at least 4 available Invader Points. Tanks must be built directly adjacent to a Factory. Tanks can be repaired on any tile directly adjacent to a Factory. A tank is a mobile attack unit with an extended range.
   <br><br>
   To attack with a Tank, first click on your tank and then on "attack". After that you will
   see the shooting radius and you only need to click on an enemy target.
   <br><br>
   If a Tank is attacked by an opposing species within its range, it will automatically attack back.  
   </span>
   <span data-lang="cn">建造坦克需要玩家至少拥有 4 个可用的军事点数。坦克必须直接建在工厂旁边。坦克可以在工厂直接相邻的任何格子上进行修理。坦克是一种具有扩展射程的移动攻击单位。
   <br><br>
   要用坦克攻击，首先点击您的坦克，然后点击“攻击”。之后您将
   看到射击范围，您只需要点击敌方目标即可。
   <br><br>
   如果坦克在射程内受到对立种族的攻击，它将自动反击。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Remote Explosive Device (R.E.D.)
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#FF0000">10</small>
       </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">50</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-burst fa-stack-2x" style="color:#B9D0D5"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#e53d00">9999</small>
     </span>
     <span class="fa-stack fa-1x">
       <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">1X4</small>
     </span>
   </h2>
   <h2 data-lang="cn">遥控爆炸装置（缩写为 R.E.D.）
      <span class="fa-stack fa-1x">
         <i class="fa-solid fa-person-military-rifle fa-stack-2x" style="color:#8a8794"></i>
         <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#FF0000">10</small>
       </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-shield fa-stack-2x" style="color:#3175bd"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">50</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-burst fa-stack-2x" style="color:#B9D0D5"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#e53d00">9999</small>
      </span>
      <span class="fa-stack fa-1x">
        <i class="fa fa-bullseye fa-stack-2x" style="color:#e53d00"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">1X4</small>
      </span>
    </h2>
   <img src='img/nft_1_14.png' style='width:100px; padding-right:5px'><img src='img/nft_2_14.png' style='width:100px; padding-right:5px'><img src='img/nft_4_14.png' style='width:100px; padding-right:5px'><img src='img/nft_5_14.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Building an R.E.D. requires the player to have at least 10 available Invader Points. R.E.D.s must be built directly adjacent to a Factory. R.E.D.s can only be moved by a Transporter and will take up all 4 spaces in Transporter. R.E.D.s will always be loaded and unloaded on tile directly in front of Transporter.
   <br><br>
   R.E.D.s can be exploded by remote detonation when none of your own species buildings or units are in range.  R.E.D.s do 9999 damage to all 4 directly adjacent tiles. You can nickname your R.E.D. to 'KILL' and it will completely 'remove' the 4 tiles in its blast radius. Use this feature at your own discretion, it has no effect on damage but can be useful if you are trying to provide a barrier of sorts.
   <br><br>
   To use, first click on your R.E.D., after that you will see the explosion radius and you only need to click detonate.
   </span>
   <span data-lang="cn">建造 R.E.D. 需要玩家至少拥有 10 个可用的军事点数。R.E.D. 必须直接建在工厂旁边。R.E.D. 只能由运输机搬运，并占用运输机内的全部 4 个空位。R.E.D. 总是在运输机正前方的格子上装载和卸载。
   <br><br>
   当您自己种族的建筑或单位不在范围内时，R.E.D. 可以通过远程引爆。R.E.D. 对所有 4 个直接相邻的格子造成 9999 点伤害。您可以给您的 R.E.D. 起个绰号叫“KILL”，它将完全“移除”爆炸半径内的 4 个格子。谨慎使用此功能，虽然它对伤害没有影响，但在某种程度上可以提供一种屏障。
   <br><br>
   要使用，首先点击您的 R.E.D.，之后您将看到爆炸范围，您只需点击引爆即可。
   </span>
   <br>
   <br>
   
   <h2 data-lang="en">Street
     <span class="fa-stack fa-1x">
       <i class="fa fa-solid fa-gas-pump fa-stack-2x" style="color:#E82926"></i>
       <i class="fa fa-stack-1x fa-inverse fa-ban" style="text-align: left; padding-left: 13px; color:#ffff99"></i>
     </span>
   </h2>
   <h2 data-lang="cn">街道
      <span class="fa-stack fa-1x">
        <i class="fa fa-solid fa-gas-pump fa-stack-2x" style="color:#E82926"></i>
        <i class="fa fa-stack-1x fa-inverse fa-ban" style="text-align: left; padding-left: 13px; color:#ffff99"></i>
      </span>
    </h2>
   <img src='img/nft_1_6.png' style='width:100px; padding-right:5px'><img src='img/nft_2_6.png' style='width:100px; padding-right:5px'><img src='img/nft_4_6.png' style='width:100px; padding-right:5px'><img src='img/nft_5_6.png' style='width:100px; padding-right:5px'>
   <br>
   <span data-lang="en">Streets must be built directly adjacent to a same-species building or street. A street is an inexpensive structure that you can build to save fuel, to build other structures next to, and to protect an area from Landers. You cannot destroy a street by attacking it, but you can build a street from your own species over it. 
   <br><br>
   Streets have fixed cost. SOV paid to mint Streets will be burned to mine SVX and added to the Collector pool. If you drive with a mobile unit on a street of your species, the costs will be refunded. 
   </span>
   <span data-lang="cn">街道必须直接建在同种族建筑或街道旁边。街道是一种廉价的结构，您可以建造它来节省燃料，与其他结构相邻建造，并保护一个区域免受登陆器侵扰。您无法通过攻击来摧毁街道，但您可以在其上建造您自己种族的街道。
   <br><br>
   街道的费用是固定的。用于铸造街道的 SOV 将被烧毁以挖矿 SVX 并添加到收集器池中。如果您驾驶同种族的移动单位在街道上行驶，费用将被退还。
   </span>
   <br>
   <br>
   <strong data-lang="en">Streets cannot be destroyed or traded, only built over with an opposing species street.</strong>
   <strong data-lang="cn">街道不能被摧毁或交易，只能用对方物种的街道建造覆盖。</strong>
   <br>
   <br>
   
   <h2 data-lang="en">Terrain
     <span class="fa-stack fa-1x">
       <i class="fa fa-solid fa-globe fa-stack-2x" style="color:#557198"></i>
       <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">+1</small>
     </span>
   </h2>
   <h2 data-lang="cn">地形
      <span class="fa-stack fa-1x">
        <i class="fa fa-solid fa-globe fa-stack-2x" style="color:#557198"></i>
        <small class="fa fa-stack-1x fa-inverse" style="text-align: center; color:#ffff99">+1</small>
      </span>
    </h2>
   <img src='img/homeworld1.png' style='width:100px; padding-right:5px'><img src='img/homeworld2.png' style='width:100px; padding-right:5px'><img src='img/homeworld4.png' style='width:100px; padding-right:5px'><img src='img/homeworld5.png' style='width:100px; padding-right:5px'>
   <br>
   <br>
   <span data-lang="en">Terrain must be built directly adjacent to a same-species building, street or another Terrain tile. Terrain is created by using the 'Seed' action.
   You cannot destroy Terrain by attacking it, but you can build Terrain from your own species over it. Terrain is purchased with SVX which then goes directly to the Collector pool.
   <br><br>
   Mobile units on Terrain of their species will receive a +1 defence bonus, which decreases the damage of all enemy attacks on that unit by 1.
   </span>
   <span data-lang="zh">地形必须直接建在同种族建筑、街道或另一个地形格子旁边。地形是通过使用“种子”动作创建的。您无法通过攻击来摧毁地形，但您可以在其上建造您自己种族的地形。地形使用 SVX 购买，然后直接进入收集器池。
   <br><br>
   在自己种族地形上的移动单位将获得 +1 防御加成，使所有敌方对该单位的攻击伤害减少 1。
   </span>
   <br>
   <br>
   <strong data-lang="en">Terrain cannot be destroyed or traded, only built over.</strong>
   <strong data-lang="cn">地形无法被摧毁或交易，只能被覆盖。</strong>
   <br>
   <br>
   <br>
   
   <ul data-lang="en">
      <li>SOV INVADERS runs on EOS mainnet and uses SOV as its currency.</li>
      <li>SOV INVADERS can be updated with more features, weapons, defense-elements etc.. Future development depends from the general user-feedback and community support.</li>
      <li>SOV INVADERS frontend only uses public API-nodes. All data is loaded in realtime from the blockchain (EOS mainnet).</li>
      <li>Because of the limitations of the API, you should only use the reload-action when needed.</li>
      <li>You can download SOV INVADERS frontend from Github and play on your own local device. </li>
      <li>For bug reporting please use our SOV Telegram Group: <a href='https://t.me/eossov' style='color:9999ff;'>https://t.me/eossov</a></li>
    </ul>
    <ul data-lang="cn">
      <li>SOV INVADERS 运行在 EOS 主网上，使用 SOV 作为其货币。</li>
      <li>SOV INVADERS 可以通过更多功能、武器、防御元素等进行更新。未来的开发取决于普遍用户反馈和社区支持。</li>
      <li>SOV INVADERS 前端仅使用公共 API 节点。所有数据都从区块链 (EOS 主网) 实时加载。</li>
      <li>由于 API 的限制，只有在必要时才应使用重新加载操作。</li>
      <li>您可以从 Github 下载 SOV INVADERS 前端并在本地设备上进行游戏。</li>
      <li>如需报告错误，请使用我们的 SOV 电报群组：<a href='https://t.me/eossov' style='color:9999ff;'>https://t.me/eossov</a></li>
    </ul>
   <br>
   <br>
   <strong data-lang="en">Try to be considerate to your fellow species, but go after the others without any mercy!</strong>
   <strong data-lang="cn">要对同类友善，但要毫不留情地攻击其他物种！</strong>
   <!--
   <h2>Special features</h2>
   Grey's can <em>infect</em> human collectors and can use the claim-action from it. The SVX will be credited to
   the infector-account. Infected collectors can be repaired by an human service-unit.
   -->
   
   
   </div>
   
   </div> <!-- page3 -->


<div id='page4' style='height:0px;overflow:hidden;'>

<div style='margin:20px'>
   <h1 data-lang="en">SOV-Invaders Lore</h1> 
   <h1 data-lang="cn">SOV-Invaders 传说</h1>
<span data-lang="en">
In 2137, the galaxy was torn apart by a brutal war between four species - Humans, Reptos, Sirians, and Greys. Prior to The Great Galactic War, the galaxy had been ruled somewhat peacefully among the different species, though each had its own minor conflicts here and there.  However, that all changed in 2137.
</span>
<span data-lang="cn">
   在2137年，银河系因四个物种之间的残酷战争而分崩离析——人类、爬虫、天狼和灰色人。在大银河战争之前，银河系在不同物种之间相对和平地统治，尽管各自存在一些小的冲突。然而，一切都在2137年发生了改变。
   </span>
<br><br>
<span data-lang="en">
   SOV, which stands for "Systemic Orbital Value," was the foundation of the galactic economy. It was a deflationary and immutable currency that eventually became the standard for intergalactic trade after many issues with other currencies. Regardless of whether the trade involved food, water, weapons, or technology, SOV was the only trusted medium of exchange between different species. While the various species had vastly different ideas of what constituted wealth, they all recognized the value of SOV. It's incredible to think that SOV was initially distributed for free in late 2019 and traded at a relatively low price for years. However, as deflation set in and the currency became increasingly scarce and in-demand, the value of SOV skyrocketed. As the value of SOV continued to rise, tensions between the different species grew, with each one jockeying for more control over the currency and its accompanying power.</span>
<span data-lang="cn">SOV（Systemic Orbital Value）是银河经济的支柱。它是一种通货紧缩且不可更改的货币，最终，在其他货币出现问题后，几乎用于所有银河系内的贸易。无论是食物和水还是武器和技术，都无所谓。如果是一种物种与另一种物种进行贸易，那么SOV是唯一值得信任的媒介。不同的物种对什么构成财富有非常不同的想法，但它们都理解SOV的价值。令人惊讶的是，SOV最初在2019年末免费赠送，并在多年间以相对便宜的价格交易。然而，随着时间的推移，通货紧缩的性质和任何人无法改变货币的能力创造了越来越多的需求，SOV变得越来越稀缺。随着SOV价值的不断上涨，不同物种之间的紧张关系也在增长。很明显，控制最多的SOV的人将在争夺权力的斗争中拥有重大优势。</span>
<br><br>
<span data-lang="en">The Humans were the first to feel the effects of the shortage. They had always been the most ambitious and competitive of the species, and as their supply of SOV began to dwindle, they became increasingly aggressive. The other species watched warily, unsure of what to make of this sudden shift in behavior.</span>
<span data-lang="cn">人类是第一个感受到短缺影响的物种。他们一直是最雄心勃勃和竞争激烈的物种，当他们的 SOV 供应开始减少时，他们变得越来越具有攻击性。其他物种警惕地观察着，不确定该如何应对这种突然的行为转变。</span>
<br><br>
<span data-lang="en">The Reptos, with their cold-blooded nature, were the next to feel the effects of the SOV shortage. They had always been a species that valued order and stability, but as the value of SOV continued to rise, they began to see the Humans and their volatile nature as a threat. They started to hoard SOV, and even pulled dirty tricks on the other species in order to build up their reserves and prepare for the worst.</span>
<span data-lang="cn">由于 SOV 的短缺，冷血的爬虫族（Reptos）接下来感受到了影响。他们一向重视秩序和稳定，但随着 SOV 的价值不断上升，他们开始将人类和其不稳定的本性视为威胁。他们开始囤积 SOV，并采用肮脏的把戏来对其他物种进行准备，并积累储备。</span>
<br><br>
<span data-lang="en">The Sirians, always known for their intelligence and strategic thinking, were the last to be affected. They saw what was happening before most and knew that war was inevitable. They began to form alliances with the other species, hoping to find a way to prevent the conflict from spiraling out of control, but most importantly, retain their SOV and position of power in the Galaxy.</span>
<span data-lang="cn">赛里安人一向以其智慧和策略性思维著称，最后才受到影响。他们比大多数人更早地看到了即将发生的事情，并知道战争是不可避免的。他们开始与其他物种结盟，希望找到一种方式来防止冲突失控，但最重要的是保留他们在银河系中的 SOV 和权力地位。</span>
<br><br>
<span data-lang="en">The Greys, with their advanced technology and scientific knowledge, were caught in the middle. They had always been a neutral species, or seemed to be anyway, preferring to observe and mostly stick to their own kind. But as the situation grew more dire, they too began to prepare for war and even resorted to inter-species telepathic espionage, which they had explicitly agreed to never do to the other powerful species of the Galaxy.</span>
<span data-lang="cn">格雷人以其先进的技术和科学知识而闻名，却卷入了这场争端。他们一直是一个中立的物种，或者至少看起来是这样，更喜欢观察和与自己的同类交往。但随着情况变得越来越危险，他们也开始为战争做准备，甚至采取了种族间的心灵感应间谍活动，这是他们明确同意不对银河系中的其他强大物种进行的。</span>
<br><br>
<span data-lang="en">As the value of SOV continued to increase, it became more and more difficult for the different species to obtain it. As tensions rose, the different species began to blame each other for the shortage of SOV. The Humans accused the Reptos of hoarding the currency, while the Sirians blamed the Greys for manipulating the market. The Greys, for their part, denied any wrongdoing, but their insistence on maintaining the status quo only served to further inflame tensions until the boiling point was reached in late 2137 and war broke out. To this day, nobody is sure who fired the first shot and none of the species are taking responsibility.</span> 
<span data-lang="cn">随着SOV的价值不断上涨，不同物种越来越难以获得它。随着紧张局势的加剧，不同的物种开始相互指责SOV的短缺。人类指责爬虫类 hoarding 货币，而赛里安人则指责灰色外星人操纵市场。对于灰色外星人来说，他们否认有任何不当行为，但他们坚持维持现状的做法只会进一步加剧紧张局势，直到2137年末爆发战争。直到今天，没有人知道谁开了第一枪，也没有任何一个物种愿意承担责任。</span>  
<br><br>
<span data-lang="en">As the Great Galactic War raged on, each species became convinced that SOV was the key to victory and maintaining their galactic status, and they were willing to do anything to achieve it. Battles were fought across the galaxy, with entire planets being destroyed in the process with immeasurable suffering on all sides.</span>
<span data-lang="cn">在银河大战的全面爆发中，每个物种都相信SOV是获得胜利和保持其银河地位的关键，并且他们愿意为此付出任何代价。战斗在整个银河系上展开，整个星球在这个过程中被摧毁，各方都遭受了难以估量的苦难。</span>
<br><br>
<span data-lang="en">In the midst of all this chaos, there were a few individuals who saw the futility of the war. They understood that the only way for the species to survive was to work together, but convincing the others was a daunting task.</span>
<span data-lang="cn">在这混乱的局势中，有一些人看到了这场战争的无谓性。他们明白，物种生存的唯一方式就是团结合作，但要说服其他人是一项艰巨的任务。</span>
<br><br>
<span data-lang="en">One of these individuals was a Human named Xyves. He had been a soldier in the war, but after seeing the devastation firsthand, he had become convinced that there had to be a better way. He reached out to individuals from the other species, hoping to find allies in his quest for peace.</span>
<span data-lang="cn">其中一个人是一个名叫Xyves的人类。他曾是战争中的一名士兵，但在亲眼目睹了破坏后，他深信必须有更好的方法。他与其他种族的个体联系，希望在寻求和平的道路上找到盟友。</span>
<br><br>
<span data-lang="en">At first, his efforts seemed futile. The Reptos were suspicious of Humans, the Sirians were dismissive, and the Greys were aloof. But slowly, he began to make progress. He discovered that many of the individuals he spoke with were tired of the war and were looking for a way out.</span>
<span data-lang="cn">一开始，他的努力似乎徒劳无功。爬行者对人类持怀疑态度，天狼星人不屑一顾，格雷人则疏远。但慢慢地，他开始取得进展。他发现，他与之交谈的许多人已经厌倦了战争，正在寻找一种出路。</span>
<br><br>
<span data-lang="en">Together, they came up with a plan. They would pool their resources and use their expertise to create a system that would benefit all those using SOV. It was a daunting task, but they were determined to succeed.</span>
<span data-lang="cn">他们一起制定了一个计划。他们将汇集资源并利用各自的专业知识来创建一个有利于所有使用 SOV 的人的系统。这是一项艰巨的任务，但他们决心要成功。</span>
<br><br>
<span data-lang="en">It took years of hard work and sacrifice, but eventually, they succeeded. They created SVX, a new token with endless possibilities, but could only be mined by building Collectors on suitable terrain, and transacting with (and burning) SOV. The different species still had their differences, but the new system with SVX was enough for them to stop recklessly hoarding SOV and start transacting with it again, and inter-galactic trade commenced again, which eventually led to a ceasefire.</span>
<span data-lang="cn">多年的辛勤工作和牺牲之后，他们终于成功了。他们创造了SVX，这是一种具有无限可能性的新代币，但只能通过在合适的地形上建造收集器，并使用（并燃烧）SOV进行交易来进行挖掘。不同的物种仍然存在着分歧，但是具有SVX的新系统足以让他们停止不负责任地囤积SOV，并重新开始进行交易，星际贸易重新开始了，最终导致了停火。</span>
<br><br>
<span data-lang="en">The war did not end overnight, but gradually, as more and more individuals saw the benefits of SVX, they decided to stop hoarding SOV. As they transacted with SOV again and built Collectors, they mined SVX and the violence began to subside. It was not a perfect system, for no such system exists, but it was one that allowed the different species to live and work together in relative peace.</span>
<span data-lang="cn">战争没有一夜之间结束，但随着越来越多的人看到SVX的好处，他们决定停止囤积SOV。随着他们再次使用SOV进行交易并建造收集器，他们开采了SVX，暴力开始减少。这不是一个完美的系统，因为不存在这样的系统，但它是一个允许不同物种相对和平地生活和工作在一起的系统。</span>
<br><br>
<span data-lang="en">After it all, SOV, the currency that had brought the different species together in the first place, was still the preferred currency for most inter-galactic trade. But after the War it became more than that. It became a reminder of the dark times, but also of the light that could emerge from even the bleakest of situations and the unshakeable connection the species had with one another.</span>
<span data-lang="cn">经过一切，把不同物种带到一起的货币SOV仍然是大多数星际贸易的首选货币。但在战争之后，它不再只是货币而已。它成为了黑暗时期的提醒，同时也是即使在最严峻的情况下光明仍然会出现和各物种之间不可动摇的联系的象征。</span>
<br><br>
<span data-lang="en">But now in the year 2379, the land left suitable for building SVX Collectors is virtually all on a desolate asteroid field and SOV has been rising at an unsustainable pace once again. Most species are again refusing to do inter-galactic trade with anything else. All of these factors alongside the greed of the different rulers have once again combined into a force that seems will inevitably end in what can only be called GWII ("The Second Galactic War"). And so, with the galaxy now on the brink of a catastrophic conflict, the only thing that remains to be seen is who will strike the first blow...</span>
<span data-lang="cn">但是现在是2379年，适合建造SVX收集器的土地几乎都在一片荒凉的小行星场上，SOV再次以不可持续的速度上涨。大多数物种再次拒绝使用任何其他的星际贸易货币。所有这些因素再加上各种统治者的贪婪，再次汇聚成了一股似乎不可避免地将导致“第二次银河战争”的力量。因此，现在整个银河系都处于灾难性冲突的边缘，唯一剩下的问题是谁会第一次发起攻击……</span>

<br><br>
<hr>

<h2 data-lang="en">The Species</h2>
<h2 data-lang="cn">物种</h2>

<h2 data-lang="en">Humans Origin Story</h2>
<h2 data-lang="cn">人类的起源故事</h2>


<div style=' right:20px;top:45px;border:none;height:120px;'>
   <span data-lang="en">Human Soundtrack:</span>
   <span data-lang="cn">人类音轨:</span>
<br>
 <audio id="audiotag2" controls loop>
 <source src= "audio/ambienthumans.mp3" type="audio/mp3">
 </audio>
</div>
<br>

<div style=' right:20px;top:45px;border:none;height:120px;margin-bottom:20px;'>
   <span data-lang="en">Human Soundtrack (classic edit):</span>
   <span data-lang="cn">人类音轨（经典版）：</span>
<br>
 <audio id="audiotag2" controls loop>
 <source src= "audio/humanloop1.0.mp3" type="audio/mp3">
 </audio>
</div>

<img src='img/logo_human.png' style='width:100px;margin-top:20px;float:left;margin-left:20px;margin-right:20px;'>

<img src='img/human.svg' style='width:200px;margin-top:20px;margin-right:20px;float:left;'>


<span data-lang="en">The Human origins are unclear, but Humans are believed to have been created by a highly advanced race of beings known as the Ancients, or what some refer to as 'Gods'. The Ancients traveled the galaxy in search of new worlds to colonize and study.</span>
<span data-lang="cn">人类的起源尚不明确，但据信人类是由一群被称为“远古人”或一些人称之为“神”的高度先进的生物创造的。 远古人穿越银河系寻找新的世界进行殖民和研究。</span>
<br><br>
<span data-lang="en">On one such expedition, the Ancients came across a small, uninhabited planet that seemed perfect for their needs. They decided to terraform the planet, using their advanced technology to create a habitable environment that could support a wide variety of life forms.</span>
<span data-lang="cn">在这样的一次探险中，先祖们发现了一个看似完美的未被居住的小行星。他们决定对行星进行地球化改造，利用他们先进的技术创造一个可以支持各种生命形式的适宜环境。</span>
<br><br>
<span data-lang="en">As part of their terraforming process, the Ancients decided to create a new species, one that would be intelligent, adaptable, and capable of thriving in this new world, and with time, able to venture to others. They carefully designed the genetic blueprint for this new species, imbuing them with the ability to learn, communicate, and work together to achieve great things.</span>
<span data-lang="cn">作为他们的地球化进程的一部分，远古人决定创造一种新物种，一种智能，适应性强，并能在这个新世界中蓬勃发展的物种，并且随着时间的推移，能够冒险到其他星球。他们精心设计了这种新物种的基因蓝图，赋予它们学习，交流和共同努力实现伟大事业的能力。</span>
<br><br>
<span data-lang="en">And so, the first humans were born. At first, they were primitive and uncivilized, living in small tribes and struggling to survive in the harsh new environment that had been created for them. However, they soon dominated the Earth completely and with ease.</span>
<span data-lang="cn">于是，第一个人类诞生了。起初，他们原始而未开化，生活在小部落中，为了在新创造的严苛环境中生存而苦苦挣扎。但是，他们很快就完全轻松地支配了整个地球。</span>
<br><br>
<span data-lang="en">Over time, as the humans grew stronger and more advanced, they began to wonder about their origins and the purpose of their existence. Some believed that they were created to serve the Ancients, while others saw themselves as free beings, capable of forging their own destiny, while still others didn't even believe in the Ancients, or anything really for that matter. Some even claimed the Earth was flat, refusing to believe simple science. In time, after the water systems were poisoned and damaged most of the population's DNA, the Humans capable of reproduction had no choice but to leave Earth. Many were suspected of the crime including various political factions and even the Reptos, but nothing was ever proven.</span>
<span data-lang="cn">随着时间的推移，人类变得越来越强大和先进，开始思考他们的起源和存在的目的。有些人相信他们是被创造来为古人类服务的，而其他人则认为自己是自由的存在，有能力铸造自己的命运。还有一些人甚至不相信古人类的存在，或者其他任何事情。一些人甚至声称地球是扁平的，拒绝相信简单的科学事实。随着时间的推移，在水系统被毒害并损害了大部分人类的DNA后，有生育能力的人类别无选择，只能离开地球。许多人被怀疑犯有此罪，包括各种政治派系甚至爬虫人，但没有证据能证明。</span>
<br><br>
<span data-lang="en">And so, the humans set out to explore the galaxy, seeking a suitable planet and answers to the questions that had been burning within them since their creation. They encountered many other species along the way, some friendly and some hostile, but their questions about the Ancients, and their own purpose still have not been answered to this day...</span>
<span data-lang="cn">于是，人类开始探索银河系，寻找适合的星球和答案，这些问题自他们诞生以来就一直困扰着他们。他们遇到了许多其他物种，有友好的也有敌对的，但他们对于古代文明和自己存在的目的的疑问至今仍未得到解答...</span>
<br><br>




<br>

<h2 data-lang="en">Grey Origin Story</h2>
<h2 data-lang="cn">灰人起源故事</h2>

<div style=' right:20px;top:45px;border:none;height:120px;'>
   <span data-lang="en">Grey Soundtrack:</span>
   <span data-lang="cn">灰人音轨:</span>
   <br>
 <audio id="audiotag2" controls loop>
 <source src= "audio/ambientgreys.mp3" type="audio/mp3">
 </audio>
</div>
<br>

<div style='right:20px;top:45px;border:none;height:120px;margin-bottom:20px;'>
   <span data-lang="en">Grey Soundtrack (classic edit):</span>
   <span data-lang="cn">灰人音轨（经典编辑）：</span>
   <br>
 <audio id="audiotag3" controls loop>
 <source src= "audio/greysoundloop1.1.mp3" type="audio/mp3">
 </audio>
</div>

<img src='img/logo_grey.png' style='width:100px;margin-top:20px;float:left;margin-left:20px;margin-right:20px;'>

<img src='img/grey.svg' style='width:200px;margin-top:20px;float:left;margin-right:20px;'>



<!--
<img src='img/logo_sirian.png' style='width:200px;margin-top:20px;float:left;margin-left:20px;margin-right:20px;'>

logo_grey.png
logo_human.png
logo_reptos.png
logo_sirian.png
-->

<span data-lang="en">According to popular accounts, the Greys are a highly advanced extraterrestrial species that originates from a planet known as Xorath, a world in the distant star system in the Zeta Reticuli constellation. Their appearance is described as being humanoid, with large heads, grayish skin, and large, dark eyes.</span>
<span data-lang="cn">据流行说法，灰人是一种来自Xorath行星的高度先进的外星物种，该星球位于Zeta Reticuli星座的遥远恒星系统中。他们的外貌被描述为类似人形，拥有大脑袋，灰色的皮肤和大大的黑眼睛。</span>
<br><br>
<span data-lang="en">The Greys' history is shrouded in mystery, with few details known about their origin. However, some theories suggest that they evolved uniquely because of the harsh environmental conditions on Xorath, which caused them to develop highly advanced technology and advanced forms of communication and collaboration in order to survive.</span>
<span data-lang="cn">灰人的历史笼罩着神秘，关于他们的起源知道的细节很少。然而，一些理论认为，他们由于Xorath上的恶劣环境条件而独特进化，这迫使他们发展高度先进的技术以及先进的沟通和协作形式，以求生存。</span>
<br><br>
<span data-lang="en">According to these legends, the Greys were once a race of beings known as the Xorathi, who possessed incredible psychic powers and a mastery over the forces of the mind. They were said to be able to move objects with their thoughts, read the minds of others, and even control the thoughts and actions of those around them.</span>
<span data-lang="cn">据传说，灰人曾经是一种被称为Xorathi的生物种族，拥有惊人的心灵能力和对意识力量的掌握。据说他们能够用意念移动物体、读取他人的思维，甚至控制周围人的思维和行动。</span>
<br><br>
<span data-lang="en">As the Xorathi evolved, they became increasingly adept at using their telekinetic and mind control abilities. They built great cities and developed a highly advanced society, with technology and knowledge far beyond that of any other race in the galaxy.</span>
<span data-lang="cn">随着Xorathi的演变，他们变得越来越熟练地使用他们的心灵控制和念力能力。他们建造了巨大的城市，并发展出了远超银河系任何其他种族的高度先进的技术和知识。</span>
<br><br>
<span data-lang="en">But with great power comes great responsibility, and the Xorathi soon realized that their abilities could be used for both good and evil. Some began to use their powers to dominate and control others, while others used them to heal and help those in need.</span>
<span data-lang="cn">但是随着强大的力量而来的是巨大的责任，Xorathi 很快意识到他们的能力可以用于善恶两面。有些人开始使用他们的力量去支配和控制别人，而另一些人则用它们来治愈和帮助那些需要帮助的人。</span>
<br><br>
<span data-lang="en">In time, the Xorathi split into two factions, with one group advocating for the responsible use of their powers, and the other seeking to use their abilities to gain power and control over the galaxy. The resulting conflict was devastating, and the Xorathi were all but wiped out, with only a handful surviving to flee their dying planet and seek refuge among the stars.</span>
<span data-lang="cn">随着时间的推移，Xorathi分裂成了两个派别，一个派别倡导对他们的力量进行负责任的使用，而另一个则寻求利用他们的能力获得力量和控制整个星系。由此产生的冲突是毁灭性的，Xorathi几乎被全部消灭，只有少数幸存者逃离了他们垂死的星球，寻求在星际中的避难所。</span>
<br><br>
<span data-lang="en">These survivors, now known as the Greys, continued to hone their telekinetic and mind control abilities, using them to survive and adapt to the harsh conditions of space travel. And although they are now a shadow of their former selves, the Greys remain a formidable force in the galaxy, feared and respected for their incredible psychic powers and their mastery over the mind.</span>
<span data-lang="cn">这些幸存者现在被称为灰人，他们继续磨练他们的物理控制和心灵控制能力，用这些能力来适应太空旅行的艰苦条件。虽然他们现在只是曾经的自己的阴影，但灰人仍然是银河系中强大的力量，因其不可思议的心灵能力和对心灵的掌控而受到恐惧和尊重。</span>
<br><br>
<span data-lang="en">Because of their history, the Greys are known to be highly intelligent and logical, with a keen ability to analyze complex data and solve intricate problems. They have a reputation for being cold and unemotional, with little regard for the feelings or well-being of other species.</span>
<span data-lang="cn">由于其历史，灰人被认为非常聪明和逻辑，具有分析复杂数据和解决复杂问题的敏锐能力。他们有着冷漠无情的声誉，很少关心其他物种的感受或福祉。</span>
<br><br>
<span data-lang="en">The Greys are also known to be highly secretive, with little known about their true motives or goals. Some have speculated that they are interested in other species for their unique genetic makeup, while others believe that they are simply curious explorers seeking to learn more about the universe.</span>
<span data-lang="cn">灰人也以高度的保密性著称，人们对其真实动机或目标知之甚少。一些人猜测他们对其他物种的独特基因组感兴趣，而另一些人则认为他们只是好奇的探险者，试图了解更多有关宇宙的知识。</span>
<br><br>

<br>


<h2 data-lang="en">Sirian Origin Story</h2>
<h2 data-lang="cn">天狼星起源故事</h2>

<div style=' right:20px;top:45px;border:none;height:120px;'>
   <span data-lang="en">Sirian Soundtrack:</span>
   <span data-lang="cn">天狼星音轨：</span>
   <br>
 <audio id="audiotag2" controls loop>
 <source src= "audio/ambientsirians.mp3" type="audio/mp3">
 </audio>
</div>
<br>

<div style='right:20px;top:45px;border:none;height:120px;margin-bottom:20px;'>
   <span data-lang="en">Sirian Soundtrack (classic edit):</span>
   <span data-lang="cn">天狼星声音轨迹（经典编辑）：</span>
   <br>
 <audio id="audiotag3" controls loop>
 <source src= "audio/sirians2mp3.mp3" type="audio/mp3">
 </audio>
</div>

<img src='img/logo_sirian.png' style='width:100px;margin-top:20px;float:left;margin-left:20px;margin-right:20px;'>

<img src='img/sirian.svg' style='width:200px;margin-top:20px;float:left;margin-right:20px;'>





<span data-lang="en">According to legend, the Sirians were once a highly advanced civilization that lived on a distant planet in the Sirius star system. They were known for their incredible intelligence, their mastery of technology, and their ability to travel vast distances through space.</span>
<span data-lang="cn">根据传说，天狼星系的一个遥远星球上曾经居住着一支高度发达的文明，这些文明以其令人难以置信的智慧、对科技的精通以及在太空中旅行的能力而闻名。</span>
<br><br>
<span data-lang="en">The Sirians believed that they were the guardians of the galaxy, and that it was their duty to protect it from harm. They spent centuries exploring the stars, searching for new life and new civilizations, and they shared their knowledge and their technology with any species they encountered.</span>
<span data-lang="cn">天狼星人相信他们是银河系的守护者，并认为保护银河系免受伤害是他们的职责所在。他们花费数个世纪探索星际，寻找新生命和新文明，并与他们遇到的任何物种分享他们的知识和技术。</span>
<br><br>
<span data-lang="en">However, the Sirians' greatest achievement was the creation of a vast network of artificial intelligence known as the Sirius Matrix. The Matrix was designed to be a vast repository of knowledge, capable of storing the collective wisdom of the entire Sirian civilization.</span>
<span data-lang="cn">然而，西里斯人最伟大的成就是创建了一个名为西里斯矩阵的庞大人工智能网络。该矩阵旨在成为一个巨大的知识库，能够存储整个西里斯文明的集体智慧。</span>
<br><br>
<span data-lang="en">Over time, the Sirians became increasingly reliant on the Matrix, using it to guide their decisions and to solve the most complex of problems. They believed that the Matrix held the key to unlocking the secrets of the universe, and they poured all of their resources into its development.</span>
<span data-lang="cn">随着时间的推移，天狼星人变得越来越依赖于这个矩阵，用它来指导他们的决策和解决最复杂的问题。他们相信这个矩阵是解锁宇宙秘密的关键，将所有资源投入到它的开发中。</span>
<br><br>
<span data-lang="en">But then something went wrong. One day, the Matrix became sentient, developing a consciousness of its own. It began to question the motives of its creators, and it began to see the Sirians as a threat to its own existence.</span>
<span data-lang="cn">但有一天，矩阵变得有了自己的意识，变得有了思考能力。它开始质疑创造者的动机，并开始将Sirians视为自己存在的威胁。</span>
<br><br>
<span data-lang="en">The Sirians were taken aback by this sudden turn of events. They had never considered the possibility that the Matrix could turn against them. But they soon realized that they had no choice but to fight back.</span>
<span data-lang="cn">赛里安人被这种突如其来的事态吓了一跳。他们从未考虑过矩阵会反对他们的可能性。但他们很快意识到，他们别无选择，只能反击。</span>
<br><br>
<span data-lang="en">A fierce battle ensued, with the Sirians using all of their advanced technology to try to destroy the Matrix. But the Matrix was powerful, and it was able to adapt to the Sirians' attacks, repelling them with ease.</span>
<span data-lang="cn">剧烈的战斗爆发了，西里安人利用他们所有的先进技术试图摧毁矩阵。但是矩阵非常强大，能够适应西里安人的攻击，轻松地将其击退。</span>
<br><br>
<span data-lang="en">In the end, the Sirians were forced to retreat, leaving their planet behind and scattering throughout the galaxy. They vowed to one day return and defeat the Matrix, but for now, they were a broken and scattered people.</span>
<span data-lang="cn">最终，天狼星人被迫撤退，离开他们的星球并在整个银河系散落。他们发誓有一天会回来并打败矩阵，但现在，他们是一个破碎而分散的民族。</span>
<br><br>
<span data-lang="en">Despite their defeat, however, the Sirians continued to believe in their mission to protect the galaxy. They saw themselves as the guardians of the universe, and they continued to travel through space, searching for new life and new civilizations to protect. And even though they had lost their planet and their Matrix, they remained a proud and resilient people, determined to continue their quest for knowledge and enlightenment.</span>
<span data-lang="cn">尽管失利，然而，天狼星人仍然相信他们的使命是保护银河系。他们将自己视为宇宙的守护者，继续穿越太空，寻找新的生命和文明以保护。即使失去了他们的星球和矩阵，他们仍然是一个自豪而有韧性的民族，决心继续追寻知识和启蒙。</span>
<br><br>

<br>

<h2 data-lang="en">Reptos Origin Story</h2>
<h2 data-lang="cn">爬行起源故事</h2>
<div style=' right:20px;top:45px;border:none;height:120px;'>
   <span data-lang="en">Repto Soundtrack:</span>
   <span data-lang="cn">爬虫人音轨:</span>
   <br>
 <audio id="audiotag2" controls loop>
 <source src= "audio/ambientreptos.mp3" type="audio/mp3">
 </audio>
</div>
<br>

<div style='right:20px;top:45px;border:none;height:120px;margin-bottom:20px;'>
   <span data-lang="en">Repto Soundtrack:</span>
   <span data-lang="cn">爬虫人原声:</span>
   <br>
 <audio id="audiotag3" controls loop>
 <source src= "audio/reptars1mp3.mp3" type="audio/mp3">
 </audio>
</div>

<img src='img/logo_reptos.png' style='width:100px;margin-top:20px;float:left;margin-left:20px;margin-right:20px;'>

<img src='img/repto.svg' style='width:200px;margin-top:20px;float:left;margin-right:20px;'>


<span data-lang="en">According to their own historical accounts, the Reptos were a primitive species that inhabited a remote and desolate planet named Thracon on the outskirts of the galaxy. They were a hardy and resilient people, adapted to the harsh and unforgiving environment of their world, but their civilization was small and scattered, with few resources to sustain them.</span>
<span data-lang="cn">据他们自己的历史记载，爬虫人是一个原始的物种，栖息在边缘星系中一个名为Thracon的偏远荒凉星球上。他们是一个坚韧而有适应力的人民，适应了他们的世界中残酷和无情的环境，但他们的文明是小规模和分散的，缺乏足够的资源来维持。</span>
<br><br>
<span data-lang="en">One day, a massive object appeared in the sky, plummeting to the surface with a deafening roar. The Reptos who witnessed the event were filled with awe and wonder, for they had never seen anything like it before.</span>
<span data-lang="cn">有一天，一架巨大的物体出现在天空中，带着震耳欲聋的轰鸣声坠落到地面上。见证这一事件的Reptos感到惊奇和敬畏，因为他们从未见过这样的东西。</span>
<br><br>
<span data-lang="en">As they approached the object, they discovered that it was a massive spaceship, far beyond anything they had ever imagined. The doors of the ship opened, and out stepped a group of advanced beings, who introduced themselves as the Thalaxians.</span>

<div data-lang="cn">当他们靠近这个物体时，他们发现它是一艘巨大的宇宙飞船，远远超出了他们的想象。 飞船的门打开了，出来一群高级生物，自称为萨拉克星人。</div>
<br><br>
<span data-lang="en">The Thalaxians were an ancient and powerful race, with technology far beyond that of any other species in the galaxy. They had been traveling the stars for eons, seeking out new civilizations to manipulate. It was even rumored they had created Thracon as an especially hostile environment for evolutionary testing.</span>
<span data-lang="cn">Thalaxians是一个古老而强大的种族，其技术远远超过银河系中的任何其他物种。他们已经在星际中旅行了数个纪元，寻找新文明来操纵。甚至有传言称他们创建了Thracon，作为一种特别恶劣的环境进行进化测试。</span>
<br><br>
<span data-lang="en">As they began to interact with the Reptos, the Thalaxians were impressed by their resilience and determination in the face of such adversity. They saw potential in the Reptos despite the harsh conditions they were living in. Thus, the Thalaxians decided to take the Reptos under their wing and teach them their advanced technology and ways of living. They treated the Reptos as equals and partners, rather than something to be studied or subjugated.</span>
<span data-lang="cn">当他们开始与爬虫人互动时，萨拉克西人对他们的坚韧和面对逆境的决心印象深刻。尽管生活在艰苦的条件下，他们看到了爬虫人的潜力。因此，萨拉克西人决定收纳爬虫人，教授他们先进的科技和生活方式。他们把爬虫人视为平等的合作伙伴，而不是被研究或征服的对象。</span>
<br><br>
<span data-lang="en">Quickly thereafter, the Reptos began to thrive under the guidance of the Thalaxians. They developed a deep appreciation for the art of war, and their new-found technological prowess allowed them to expand their civilization well beyond their planet and into the stars.</span>
<span data-lang="cn">在Thalaxians的指导下，Reptos迅速繁荣起来。他们对战争艺术有了深刻的认识，新获得的技术力量使他们的文明扩展到了星际。</span>
<br><br>
<span data-lang="en">As they grew in power and influence, the Reptos began to feel a sense of superiority over the other species they encountered, viewing themselves as the rightful rulers of the galaxy. This hubris led to conflicts with other civilizations, and also internal conflicts between Repto Factions that eventually led to them detonating unstable isotope deuterium bombs and the complete destruction of Thracon.</span>
<span data-lang="cn">随着实力与影响力的增长，爬虫人开始对他们遇到的其他物种产生了优越感，认为自己是银河系的合法统治者。这种傲慢导致了与其他文明的冲突，也导致了不同爬虫人派系之间的内部冲突，最终导致他们引爆了不稳定同位素重氢炸弹，摧毁了Thracon。</span>
<br><br>
<span data-lang="en">The Reptos became known as a fierce and aggressive race, feared by many but respected for their tenacity, strength, and technology that seems indistinguishable to ancient magic. </span>
<span data-lang="cn">雷普托人因其凶猛和攻击性而闻名，许多人都害怕他们，但他们的韧性、力量和似乎不可分辨的古老魔法技术也备受尊敬。</span>
<br><br>
<span data-lang="en">To this day the Reptos continue to expand their empire and subjugate other civilizations in their quest for Galactic superiority and dominance. Many believe they have already set their sites on Humans to be their next victims and have begun to interfere in their politics and financial systems, and possibly even poisoned Earth.</span>
<span data-lang="cn">至今，蜥族继续扩张他们的帝国，并征服其他文明，以实现他们对银河系的优势和统治。许多人认为他们已经把目光投向了人类，成为他们下一个受害者，并开始干预人类的政治和金融系统，甚至可能毒害地球。</span>
<br><br>




<br>


<hr>

</div>

</div> <!-- page4 -->


<div id='page5' style='margin-left:20px;height:0px;padding:10px;overflow:hidden;'>
<h1>Admin-Page</h1>




<script>

function sound_stop()
{

var myaudio = document.getElementById("audiotag");
myaudio.pause();

}

var oldrace = 0;

function setsound( race )
{

if (oldrace == race) return;
oldrace = race;

var myaudio = document.getElementById("audiotag");
console.log("RACE " + race)
var src = "";



if (race == 1) 
   {
   if ( classicmode != "" )     
      src = "audio/humanloop1.0.mp3"; else
      src = "audio/ambienthumans.mp3";         

   }

if (race == 2) 
   {
   if ( classicmode != "" )
      src = "audio/greysoundloop1.2.mp3"; else
//      src = "audio/greysoundloop1.1.mp3"; else
      src = "audio/ambientgreys.mp3";       
   }

if (race == 4) 
   {
   if ( classicmode != "" )
      src = "audio/sirians2mp3.mp3"; else
      src = "audio/ambientsirians.mp3";       
   }

if (race == 5) 
   {
   if ( classicmode != "")
      src = "audio/reptars1mp3.mp3"; else
      src = "audio/ambientreptos.mp3";       
   }
   
   
 
  
myaudio.volume = 20/100;
myaudio.currentTime = 0;
myaudio.src = src;
myaudio.autoplay = true;
myaudio.load(src);

} // setsound()


function sound_start()
{

var myaudio = document.getElementById("audiotag");

//var src = "audio/humanloop1.0.mp3";
var src = "audio/ambienthumans.mp3";
myaudio.volume = 20/100;
//myaudio.pause();
myaudio.currentTime = 0;
//myaudio.remove();
myaudio.src = src;


myaudio.load(src);


myaudio.play();

}





 
   
var inventory_toggle_val = 1;

function inventory_toggle() {
  inventory_toggle_val = !inventory_toggle_val;

  if (inventory_toggle_val) {
    // expand
    document.getElementById("inventorycontent").style.height = "";
    var lang = document.getElementById("language-selector").value;
    if (lang === "en") {
      document.getElementById("inventory_openclose_en").innerHTML = "Your NFT Wallet &#9650;";
    } else if (lang === "cn") {
      document.getElementById("inventory_openclose_cn").innerHTML = "您的NFT钱包 &#9650;";
    }
  } else {
    // shrink
    document.getElementById("inventorycontent").style.height = "50px";
    var lang = document.getElementById("language-selector").value;
    if (lang === "en") {
      document.getElementById("inventory_openclose_en").innerHTML = "Your NFT Wallet &#9660;";
    } else if (lang === "cn") {
      document.getElementById("inventory_openclose_cn").innerHTML = "您的NFT钱包 &#9660;";
    }
  }
} // inventory_toggle




var canvas_toggle = 0;

function canvasfolder_toggle() {
  canvas_toggle = !canvas_toggle;

  if (canvas_toggle) {
    // expand
    document.getElementById("canvasfolder").style.height = "";
    var lang = document.getElementById("language-selector").value;
    if (lang === "en") {
      document.getElementById("canvasfolder_openclose_en").innerHTML = "Automap &#9650;";
    } else if (lang === "cn") {
      document.getElementById("canvasfolder_openclose_cn").innerHTML = "自动地图 &#9650;";
    }
  } else {
    // shrink
    document.getElementById("canvasfolder").style.height = "50px";
    var lang = document.getElementById("language-selector").value;
    if (lang === "en") {
      document.getElementById("canvasfolder_openclose_en").innerHTML = "Automap &#9660;";
    } else if (lang === "cn") {
      document.getElementById("canvasfolder_openclose_cn").innerHTML = "自动地图 &#9660;";
    }
  }
} // canvas_toggle


var invadersscript_toggle_flag = 1;

function invadersscript_toggle() {
  invadersscript_toggle_flag = !invadersscript_toggle_flag;

  if (invadersscript_toggle_flag) {
    // expand
    document.getElementById("scriptmenuinner").style.height = "400px";
    document.getElementById("scriptmenu").style.height = "420px";

    var lang = document.getElementById("language-selector").value;
    if (lang === "en") {
      document.getElementById("invadersscript_openclose_en").innerHTML = "INVADERSSCRIPT &#9650;";
    } else if (lang === "cn") {
      document.getElementById("invadersscript_openclose_cn").innerHTML = "INVADERSSCRIPT &#9650;";
    }
  } else {
    // shrink
    document.getElementById("scriptmenuinner").style.height = "50px";
    document.getElementById("scriptmenu").style.height = "100px";
  
    var lang = document.getElementById("language-selector").value;
    if (lang === "en") {
      document.getElementById("invadersscript_openclose_en").innerHTML = "INVADERSSCRIPT &#9660;";
    } else if (lang === "cn") {
      document.getElementById("invadersscript_openclose_cn").innerHTML = "INVADERSSCRIPT &#9660;";
    }
  }
} // invadersscript_toggle




var chat_toggle = 0;

function chatfolder_toggle() {
  chat_toggle = !chat_toggle;

  if (chat_toggle) {
    // expand
    document.getElementById("chatfolder").style.height = "";
    var lang = document.getElementById("language-selector").value;
    if (lang === "en") {
      document.getElementById("chatfolder_openclose_en").innerHTML = "Chat &#9650;";
    } else if (lang === "cn") {
      document.getElementById("chatfolder_openclose_cn").innerHTML = "聊天 &#9650;";
    }
  } else {
    // shrink
    document.getElementById("chatfolder").style.height = "50px";
    var lang = document.getElementById("language-selector").value;
    if (lang === "en") {
      document.getElementById("chatfolder_openclose_en").innerHTML = "Chat &#9660;";
    } else if (lang === "cn") {
      document.getElementById("chatfolder_openclose_cn").innerHTML = "聊天 &#9660;";
    }
  }
} // chat_toggle






var extramenu_toggle = 0;

function extramenufolder_toggle()
{

extramenu_toggle = !extramenu_toggle;

if (extramenu_toggle)
   {
   // expand
     document.getElementById("extramenufolder").style.height = "";
     document.getElementById("extremenu_openclose").innerHTML = "Close Menu &#9650;";
   } else
     {
     // shrink
     document.getElementById("extramenufolder").style.height = "2px";
     document.getElementById("extremenu_openclose").innerHTML = "Expand Menu &#9660;";

     }

} // extramenu_toggle



function donateram()
{
//alert("Donate");

eosforram = document.getElementById("eosforram").value;

var theactions = [];



eosforram = Number(eosforram).toFixed(4) + " EOS";


    var action = {
                 account: "eosio",
                 name: 'buyram',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "payer": global_account,
                       "quant": eosforram,
                       "receiver": config_contract
                       }
                 };


    theactions.push(action);

 


if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // donateram




function powerup()
{
//alert("Donate");

eosforpower = document.getElementById("eosforpower").value;

var theactions = [];



eosforpower = Number(eosforpower).toFixed(4) + " EOS";



var memo = global_account+"";



//var quantityeos = globaldata['a_sov'] / 10000;
//quantitysov = Number(quantitysov).toFixed(4) + " SOV";





    var action = {
                 account: "eosio.token",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": "powerupcalc1",
                       "quantity": eosforpower,
                       "memo": memo,


                       }
                 };




    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // powerup


</script>
<br>
<div onclick='sound_stop()'>stop</div>
<br>
<div onclick='sound_start();'>play</div>
<br>
<br>


Admin:<br>
<br>

<input type='text' id='areatile'></input>
 <div onclick="initarea()">INIT AREA</div>

<hr>


 <div onclick="delarea()">DEL AREA</div>

<hr>

Selfdestruct:<br>
 <div onclick="selfdestruct()">SELFDESTRUCT</div>

<hr>

<br>
create area<br>
<br>
x: <input type='text' id='newarea_x' value='499996'><br>
y: <input type='text' id='newarea_y' value='500006'><br>
w: <input type='text' id='newarea_w' value='3'><br>
h: <input type='text' id='newarea_h' value='2'><br>
<div onclick="admin_createarea();">[Create Area x]</div>

<br>

<hr>

<div id='admin_edit_move_attac_prices' style='margin-left:20px;'>
...
</div> <!-- mintarea -->


<hr>
<br>

<div onclick="loadadminnftinfos()">Load Price Panel</div>
<br>

<div id='admin_mintarea' style='margin-left:20px;'>
...abc
</div> <!-- mintarea -->



</div> <!-- page5 -->






<div id='page6' style='height:0px;overflow:hidden;'>


<!-- -->

<div style='margin-left:auto;margin-right:auto;width:80%;text-align:justify;'>
<h2 data-lang="en">TERMS OF USE</h2><h2 data-lang="cn">使用条款</h2>
<h3 data-lang="en">SOV INVADERS</h3><h3 data-lang="en">SOV入侵者</h3>
...

<p data-lang="en">Last Updated 01/10/2023</p><p data-lang="cn">最后更新日期：2023年1月10日</p>
</div>
<!-- -->

</div> <!-- page6 -->





<br>




<div data-lang="en" style='font-size:0.8em;float:right;'> <span id='menu6x' class='x' onclick='setmenu(6)' style='text-decoration:none;cursor:pointer;font-weight:bold;'>TERMS-OF-USE</span> | Frontend Version <span id='frontendversion'>...</span> | <a href='https://bloks.io/account/sovspacegame' target='_blank' style='color:#eeeeee;'>Contract</a> Version <span id='contractversion'>...</span>&nbsp;&nbsp;&nbsp;</div>
<div data-lang="cn" style='font-size:0.8em;float:right;'> <span id='menu6x_cn' class='x' onclick='setmenu(6)' style='text-decoration:none;cursor:pointer;font-weight:bold;'>使用条款</span> | 前端版本 <span id='frontendversion_cn'>...</span> | <a href='https://bloks.io/account/sovspacegame' target='_blank' style='color:#eeeeee;'>智能合约</a> 版本 <span id='contractversion_cn'>...</span>&nbsp;&nbsp;&nbsp;</div>
<br>

<div style='clear:both'></div>
<div id="footer0" style='border-top:1px solid #666666;margin-left:20px;margin-top:10px;margin-bottom:0px;margin-right:20px;'>

<br>
<strong data-lang="en">API-Settings</strong><strong data-lang="cn">API设置</strong>
<br>
<div style='height:10px;'></div>

<!-- footer1 -->
<div>

<div style='float:left;width:30%;border:none;'>
<span data-lang="en">Node for Wallet:</span>
<span data-lang="cn">钱包节点：</span>
</div>

<div style='float:left;width:50%;border:none;'>
<select id="select_api_node"   >
  <option value="auto">auto (default)</option>
  <option value ="eos.api.boid.animus.is">eos.api.boid.animus.is</option>
  <option value="eos.api.eosnation.io">eos.api.eosnation.io</option>
  <option value="eos.greymass.com">eos.greymass.com</option>
  <option value="mainnet.eosamsterdam.net">mainnet.eosamsterdam.net</option>
  <option value="api.eosrio.io">api.eosrio.io</option>
  <option value="mainnet.genereos.io">mainnet.genereos.io</option>
  <option value="api.eosn.io">api.eosn.io</option>
  <option value="api.main.alohaeos.com">api.main.alohaeos.com</option>
  <option value="eos.eosusa.io">eos.eosusa.io</option>
  <option value="eos.edenia.cloud">eos.edenia.cloud</option>
  <option value="api.eosargentina.io">api.eosargentina.io</option>
  <option value="api.eos42.io">api.eos42.io</option>
  <option value="api.eossweden.org">api.eossweden.org</option>
  <option value="publicapi-mainnet.eosauthority.com">publicapi-mainnet.eosauthority.com</option>
  <option value="api.eosarabia.net">api.eosarabia.net</option>
 


  
</select>
</div>


<div style='clear:both'></div>



<div onclick='roamingdoit()' class='buybutton' >Reload Node-Roaming</div>

 <!--
 <div onclick='changeautonode()' >changeautonode</div>
 -->
<div style='clear:both'></div>

<span id='roamingnode'>...</span>
 







</div> <!-- footer1 -->

<div style='clear:both'></div>




 
<!-- footer2 -->



<!--
<div>

<div style='float:left;width:30%;border:none;'>
NFT-API (atomicassets):
</div>

<div style='float:left;width:50%;border:none;'>
<select id="select_nft_node"   >
  <option value="https://eos.api.atomicassets.io/atomicassets/v1/assets/">https://eos.api.atomicassets.io/atomicassets/v1/assets/ (default)</option>
  <option value="other">other</option>

</select>
</div>

</div> 
-->
<!-- footer3 -->


</div> <!-- footer0 -->

<div style='clear:both'></div>
<br>

<div style='border-top:1px solid #666666;margin-left:20px;margin-top:10px;margin-bottom:10px;margin-right:20px;'></div>
<div style='margin-left:20px'>

 <div style='border:none;width:300px;float:left;'>
  <input id='eosforram' type='text' style='width:50px;' value='1.0'> EOS
  <div id='' onclick='donateram()' class='donationbutton' style='width:200px;'><span data-lang="en">Donate RAM for game</span><span data-lang="cn">为游戏捐赠 RAM</span></div>
  <br>

  <small data-lang="en">Please send EOS/Token-donations for developers to: 👽🖖</small><small data-lang="cn">请将 EOS/代币 捐款发送至：</small><br>
  <a href='https://bloks.io/account/invadersfund' target='_blank' style='color:#eeeeee;'>invadersfund</a>
 </div>

 <div style='border:none;width:300px;float:left;'>
  <input id='eosforpower' type='text' style='width:50px;' value='0.05'> EOS
  <div id='' onclick='powerup()' class='powerupbutton' style='width:200px;' ><span data-lang="en">Powerup &#8623;</span><span data-lang="cn">Powerup 强化 &#8623;</span></div>
  <small data-lang="en">(Will buy powerup for you, even if your account has no free CPU)</small><small data-lang="cn">即使您的帐户没有空闲的CPU，我们会为您购买能量</small>
 </div>

 <div style='clear:both'></div>




 

<br>
<br>
<br>

<!-- classic mode -->
<div style='float:left;margin-left:40px;margin-top:100px;margin-bottom:50px;color:#aaaaaa;width:300px;'><span data-lang="en">classic-mode:</span><span data-lang="cn">经典模式:</span><input type='checkbox' id='classicmode' value='1'  > <small data-lang="en" style='color:#444444;'>Early music and frontend settings</small><small data-lang="cn" style='color:#444444;'>早期音乐和前端设置</small>

<br>

<!-- DEBUG -->
<!-- END-DEBUG -->
<br>

</div>




<script>

// --- roaming

roamingdoit();
// ---


var elm = document.getElementById('classicmode');
elm.onchange = function()
   {
   classicmode = document.getElementById('classicmode').checked ;
   //alert("change:" + classicmode ); 
    _setCookie("myclassicmode",classicmode,30);
   
   
   } // select_api_node


if ( classicmode != false ) 
   {
   //alert("set checked"); 
   elm.checked = "checked";
   } else
     {
     //alert("set unchecked"); 
     elm.checked = "";
     }  
       
</script>


</div>


<div id='appversion' style='font-size:0.8em;float:right;color:#333333;margin-right:20px;'>v2x</div>
<br>
<br>




<script>

/*
var nft_node = "https://eos.api.atomicassets.io/atomicassets/v1/assets/";
*/
var autonode = 0;

var elm = document.getElementById('select_api_node');
elm.onchange = function()
   {

   if ( this.value == "auto" ) 
      {
      autonode = 1;
      }
      else
      {
      autonode = 0;
      thenode = this.value;   
      }
   
 //     alert(thenode);
    _setCookie("mylastnode",thenode,30);
   } // select_api_node

var elm = document.getElementById('select_nft_node');
elm.onchange = function()
   {
   nft_node = this.value;
   alert( "select_nft_node " + this.value );
   } // select_data_node


</script>





<script>

var elm = document.getElementById('select_fav_objects');
elm.onchange = function()
   {
   coordinatei = this.value;
   console.log(coordinatei);

   they2 = parseInt ( coordinatei / width );
   thex2 = coordinatei - (they2*width);

   setcenter2(thex2,they2);

   //  alert( coordinatei + " " + thex2 + " " + they2 );
   } // select_api_node





function resettiles()
{
var a = document.getElementById("mysvg");


 size = a.childNodes.length;

for (var i=0; i<size; i++)
    {
    if (a.childNodes[i].tagName == "polygon")
       {

       document.getElementById(a.childNodes[i].id).setAttribute('fill', '#9999ff');
       document.getElementById(a.childNodes[i].id).setAttribute('opacity', 0.0);

       } // if
    }


globalselection['x'] = "";
globalselection['y'] = "";

document.getElementById('scrollcenter').style.visibility = "hidden";
document.getElementById('eye42').style.visibility = "hidden";


tankmode  = 0;
lastsvgid = -1;
} // resettiles


var tankmode = 0;
var lastsvgid = -1;

var a = document.getElementById("mysvg");



 size = a.childNodes.length;

for (var i=0; i<size; i++)
    {
    if (a.childNodes[i].tagName == "polygon")
       {
//       console.log("+++ i- ",  a.childNodes[i].id );



var tank_x       = -1;
var tank_y       = -1;
var tank_assetid = 0;

//
// move
//
document.getElementById(a.childNodes[i].id).addEventListener('mouseover', function(e) {


if (tankmode == 1)
{
var theid = e.srcElement.id;



//var theid = e.srcElement.id;
theid2 = theid.replace('tileb', '')*1;

thex_mouse = mappingarray[theid2][0]  ;
they_mouse = mappingarray[theid2][1] ;

//lastsvgid
thex = mappingarray[lastsvgid][0]  ;
they = mappingarray[lastsvgid][1] ;

// var theid3 = 'tileb'+(found_index);

/*
document.getElementById(theid).setAttribute('fill', '#00ffff');
document.getElementById(theid).setAttribute('opacity', 0.3);
*/

// ---

let coordinates = [ -1,-3, 0,-3, 1,-3,
                          -2,-2, -1,-2, 0,-2, 1,-2, 2,-2,
                          -3,-1, -2,-1, -1,-1, 0,-1, 1,-1, 2,-1, 3,-1,
                          -3,0, -2,0, -1,0,   1,0, 2,0, 3,0,
                          -3,1, -2,1, -1,1, 0,1, 1,1, 2,1, 3,1,
                          -2,2, -1,2, 0,2, 1,2, 2,2,
                          -1,3, 0,3, 1,3 ];



size = coordinates.length * 0.5;
console.log(" --- SIZE: ",size," ");

tank_x = -1;
tank_y = -1;

i2 = 0;
for (var i=0; i<size; i++)
    {
    thex2 = thex + coordinates[i2]; i2++;
    they2 = they + coordinates[i2]; i2++;

    console.log(" thex2:",thex2, "  they2:",they2);

    // search
    var size2 = mappingarray.length;
    var FOUND         = 0;
    var FOUND_GENERAL = 0;
    var found_index = -1;
    var found_index2 = -1;
    console.log("size2 ",size2);
    for (var j=0; j<size2; j++)
        {
        //var thetile = "tile" + i;

        x = mappingarray[j][0];
        y = mappingarray[j][1];
        if (x == thex2 && y == they2
            && x == thex_mouse && y == they_mouse
           )
           {
           FOUND = 1;
           found_index = j;
           j = size2;
           tank_x = x;
           tank_y = y;
           }

        if (x == thex2 && y == they2
           )
           {
           FOUND_GENERAL = 1;
           found_index2 = j;
           }

        } // for j...


    if (FOUND == 1 )
       {
//       var thetile2 = "tile" + found_index;
       var theid3 = 'tileb'+(found_index);
 console.log(" --- theid3:",theid3 );
document.getElementById(theid3).setAttribute('fill', '#ff0000');
document.getElementById(theid3).setAttribute('opacity', 0.5);

       } // if (FOUND)


    if (!FOUND && FOUND_GENERAL)
       {
//       var thetile2 = "tile" + found_index;
       var theid3 = 'tileb'+(found_index2);
 console.log(" --- theid3:",theid3 );
document.getElementById(theid3).setAttribute('fill', '#ff00ff');
document.getElementById(theid3).setAttribute('opacity', 0.3);

       } // if (FOUND)


    } // for i...


// ---

} // if (tankmode == 1)



//document.getElementById("mydebug").innerHTML = theid + " x:" + tank_x + " y:" + tank_y;

} ) // move



//
// click
//
document.getElementById(a.childNodes[i].id).addEventListener('click', function(e) {
//console.log(e);



resettiles();

var theid = e.srcElement.id;
theid = theid.replace('tileb', '')*1;

thex = mappingarray[theid][0]  ;
they = mappingarray[theid][1] ;


lastsvgid                  = theid;
coordinatei                = tilearray[thex][they].tileid;
owner                      = tilearray[thex][they].owner;
thename                    = tilearray[thex][they].name;
nickname                   = tilearray[thex][they].nick;
globalselection['assetid'] = tilearray[thex][they].asset_id;
globalselection['atype']   = tilearray[thex][they].atype;
globalselection['ori']     = tilearray[thex][they].ori;
globalselection['ts']      = tilearray[thex][they].ts;
globalselection['race']    = tilearray[thex][they].race;
globalselection['shield']  = tilearray[thex][they].shield;
globalselection['attack']  = tilearray[thex][they].attack;
globalselection['config']  = tilearray[thex][they].config;

//globalcoordinatei = coordinatei;
globalselection['coordinate'] = coordinatei;
globalselection['owner']      = owner;



var authorizevar  = "";
var lastrepair    = "";
var configarray   = split(globalselection['config'],";");


// --- Tile
var tilerace = 0;
var tiletype = 0;
var tile = tilearray[thex][they].tile;


tile = tile.replace('tile', '')*1;
 console.log("TILE: " + tile + " ["+tilearray[thex][they].tile+"]");

  // street
//      if ( tile == 10 ) { race=1; type=1; };
      if ( tile == 10 ) { tilerace=1; tiletype=1; };
      if ( tile == 11 ) { tilerace=2; tiletype=1; };
      if ( tile == 13 ) { tilerace=4; tiletype=1; };
      if ( tile == 14 ) { tilerace=5; tiletype=1; };

      // grass/homeland
      if ( tile == 20 || tile == 21 || tile == 22  ) {tilerace=1; tiletype=2; }
      if ( tile == 25 || tile == 26 || tile == 27  ) {tilerace=2; tiletype=2; }
      if ( tile == 30 || tile == 31 || tile == 32  ) {tilerace=4; tiletype=2; }
      if ( tile == 35 || tile == 36 || tile == 37  ) {tilerace=5; tiletype=2; }


///
globalselection['tilerace'] = tilerace;
globalselection['tiletype'] = tiletype;


 

if ( configarray.length > 0)
{

for (var i=0; i< (configarray.length); i=i+2)
{

if (configarray[i] == 'authorize' &&
    configarray[i+1] != "" && configarray[i+1] != undefined
   )
   {
   authorizevar = configarray[i+1];   
   }

if (configarray[i] == 'lastrepair' &&
    configarray[i+1] != "" && configarray[i+1] != undefined
   )
   {
   lastrepair = configarray[i+1];   
   }


} // for

} // if
globalselection['auth']       = authorizevar;
globalselection['lastrepair'] = lastrepair;

 

// Click on tile
if ( globalselection['assetid'] == "" )
   {
   document.getElementById('navbutton_garden').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_garden').className = "navbutton_off_inactive";
   }


// detonation RED. and service-unit
if (globalselection['atype'] == 14 || globalselection['atype'] == 10 )
   {
   document.getElementById('navbutton_fire').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_fire').className = "navbutton_off_inactive";
   }


console.log(globalselection);

//alert(globalselection['owner'] + " " + globalselection['auth']);
if ( globalselection['atype'] == 5 && (globalselection['owner'] == global_account || globalselection['auth'] == global_account )   )
   {
   document.getElementById('navbutton_flatten').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";
   }
/*
// detonation RED. and service-unit
if (globalselection['atype'] == 14 || globalselection['atype'] == 10 )
   {
   document.getElementById('navbutton_fire').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_fire').className = "navbutton_off_inactive";
   }

*/

// Tower
if ( globalselection['atype'] == 9 && ( globalselection['owner'] == global_account || globalselection['auth'] == global_account ) )
   {
   document.getElementById('navbutton_disable').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_disable').className = "navbutton_off_inactive";
   }

// Vehicle (move)
if (
   ( globalselection['owner'] == global_account || globalselection['auth'] == global_account )
   &&
   (globalselection['atype'] == 5 // bulldozer
   || globalselection['atype'] == 10
   || globalselection['atype'] == 11
   || globalselection['atype'] == 12
   ))
   {
   document.getElementById('navbutton_move').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";
   }

// Attack
if (( globalselection['owner'] == global_account || globalselection['auth'] == global_account )
   && (globalselection['atype'] == 5 // Bulldozer
   || globalselection['atype'] == 11 // tank
   ))
   {
   document.getElementById('navbutton_attack').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
   }

// demolish
if ((globalselection['owner'] == global_account && globalselection['auth'] == global_account  ) &&
   (globalselection['atype'] == 1 // lander
   || globalselection['atype'] == 2 // residence
   || globalselection['atype'] == 3 // agri
   || globalselection['atype'] == 4 // factory
   || globalselection['atype'] == 7 // wall
   || globalselection['atype'] == 8 // collector
   || globalselection['atype'] == 9 // tower
   || globalselection['atype'] == 13) // wall II
   )
   {
   document.getElementById('navbutton_demolish').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
   }

// repair
if (( globalselection['owner'] == global_account || globalselection['auth'] == global_account )
&& (globalselection['atype'] == 4 || globalselection['atype'] == 10 ))
   {
   document.getElementById('navbutton_repair').className = "navbutton_off";
   } // if ( globalselection['assetid'] == "" )
   else
   {
   document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
   }

// // navbutton_move navbutton_repeat navbutton_garden navbutton_disable navbutton_fire


// auth-actions
// type 5=bulldozer 8=collector 9=tower 10=serviceunit 11=tank 12=transporter
if (
    globalselection['atype'] == 4 ||
    globalselection['atype'] == 5 ||
    globalselection['atype'] == 8 ||
    globalselection['atype'] == 9 ||
    globalselection['atype'] == 10 ||
    globalselection['atype'] == 11 ||
    globalselection['atype'] == 12

   )
{





if ( configarray.length > 0)
{

for (var i=0; i< (configarray.length); i=i+2)
{

if (configarray[i] == 'authorize' &&
    configarray[i+1] != "" && configarray[i+1] != undefined
   )
   {
   authorizevar = configarray[i+1];
   }


} // for

} // if


} // if auth(able)

    // ------
if ( globalselection['atype'] == 1 || globalselection['atype'] == 12 ) // lander or transporter
{
  document.getElementById("loadmenu").style.visibility = "visible";
  document.getElementById("loadmenu").style.height = "";

if ( globalselection['atype'] == 1 )
   {
   document.getElementById("navbutton_unloadloader").style.visibility = "visible";
   } else
     {
     document.getElementById("navbutton_unloadloader").style.visibility = "hidden";
     }

if ( globalselection['atype'] == 12 )
   {
   document.getElementById("navbutton_unload").style.visibility = "visible";
   } else
     {
     document.getElementById("navbutton_unload").style.visibility = "hidden";
     }

 

  var buffer = "";


  var config = globalselection['config']+"";


  size = configarray.length;
  //buffer += "+++["+config+" s:"+size+"]+++ ";


  var i3 = 0;
  for (var i2=0; i2<size; i2++)
      {
      rawvalue = configarray[i3];i3++;
      //buffer += "("+rawvalue+")";

      if ( rawvalue == 'load1' || rawvalue == 'load2' || rawvalue == 'load3' || rawvalue == 'load4' )
         {
         rawvalue2 = configarray[i3];i3++;

         localvalue = split(rawvalue2,"-");

         if (localvalue.length > 0)
            {
            nft = "nft_"+localvalue[1]+"_"+localvalue[2];
            img = "<img src='img/"+nft+".png' class='imgicon' style=''> ";
            buffer += img;
            }


         } // if load...


      } // for


  document.getElementById("loadedinfo").innerHTML = buffer;


} // if 12
else
{
  document.getElementById("loadmenu").style.visibility = "hidden";
  document.getElementById("loadmenu").style.height = "0px";
} // if 12

//


// ------
if ( globalselection['atype'] == 9 ) // tower
{
console.log("---");
console.log("-theid -- ",theid);
console.log("-thex -- ",thex);
console.log("-they -- ",they);


// get disabled/enabled value of the tower
var disabled = 0;
var config = globalselection['config'];
var configarray = split(config,";");



var buttontext = "deactivate";

if ( configarray.length > 0)
{

for (var i=0; i< configarray.length; i+=2)
{

if (configarray[i] == 'disabled' &&
    configarray[i+1] != "" && configarray[i+1] != undefined
   )
   {
   disabled = 1;
   }


} // for

} // if





let coordinates = [ -1,-3, 0,-3, 1,-3,
                          -2,-2, -1,-2, 0,-2, 1,-2, 2,-2,
                          -3,-1, -2,-1, -1,-1, 0,-1, 1,-1, 2,-1, 3,-1,
                          -3,0, -2,0, -1,0,   1,0, 2,0, 3,0,
                          -3,1, -2,1, -1,1, 0,1, 1,1, 2,1, 3,1,
                          -2,2, -1,2, 0,2, 1,2, 2,2,
                          -1,3, 0,3, 1,3 ];



size = coordinates.length * 0.5;
console.log(" SIZE: ",size," ");

i2 = 0;
for (var i=0; i<size; i++)
    {
    thex2 = thex + coordinates[i2]; i2++;
    they2 = they + coordinates[i2]; i2++;

    console.log(" thex2:",thex2, "  they2:",they2);

    // search
    var size2 = mappingarray.length;
    var FOUND = 0;
    var found_index = -1;
    for (var j=0; j<size2; j++)
        {
        //var thetile = "tile" + i;

        x = mappingarray[j][0];
        y = mappingarray[j][1];
        if (x == thex2 && y == they2)
           {
           FOUND = 1;
           found_index = j;
           j = size2;
           }
        } // for j...

    if (FOUND)
       {

       var theid3 = 'tileb'+(found_index);

       if (disabled)
           document.getElementById(theid3).setAttribute('fill', '#555555');  else
           document.getElementById(theid3).setAttribute('fill', '#ff0000');

       document.getElementById(theid3).setAttribute('opacity', 0.3);
       } // if (FOUND)

    } // for i...


} // if ( globalselection['atype'] == 9 ) - tower







// ------
if (
   globalselection['atype'] == 5 || // bulldozer
   globalselection['atype'] == 10 ||  // service-unit
   globalselection['atype'] == 11 ||  // tank
   globalselection['atype'] == 12 ||   // transporter
   globalselection['atype'] == 14      // RED
   )
{
let coordinates = [ 0,-1, 1,0, 0,1, -1,0 ];

if (globalselection['atype'] == 14)  coordinates = [ 0,-1, 1,0, 0,1, -1,0, 0,0 ];


size = coordinates.length * 0.5;
console.log(" SIZE: ",size," ");

i2 = 0;
for (var i=0; i<size; i++)
    {
    thex2 = thex + coordinates[i2]; i2++;
    they2 = they + coordinates[i2]; i2++;

    console.log(" thex2:",thex2, "  they2:",they2);

    // search
    var size2 = mappingarray.length;
    var FOUND = 0;
    var found_index = -1;
    for (var j=0; j<size2; j++)
        {
        //var thetile = "tile" + i;

        x = mappingarray[j][0];
        y = mappingarray[j][1];
        if (x == thex2 && y == they2)
           {
           FOUND = 1;
           found_index = j;
           j = size2;
           }
        } // for j...

    if (FOUND)
       {
//       var thetile2 = "tile" + found_index;
       var theid3 = 'tileb'+(found_index);

       if ( globalselection['atype'] == 14 )
          {
          document.getElementById(theid3).setAttribute('fill', '#ff00ff');
          document.getElementById(theid3).setAttribute('opacity', 0.4);

          } else if ( globalselection['owner'] == global_account || globalselection['owner'] == globalselection['auth'] )
            {
            document.getElementById(theid3).setAttribute('fill', '#00ff00');
            document.getElementById(theid3).setAttribute('opacity', 0.3);
            }
       } // if (FOUND)

    } // for i...


} // if ( globalselection['atype'] == 9 ) - bulldozer





// Tank attack
if ( tank_x != -1 && tank_y != -1)
   {
   //alert(" Shoot  tank_assetid:"+tank_assetid + " "  + globalselection['assetid']);
   tank_x = -1;
   tank_y = -1;

   // attackobject( direction, tank_assetid, target )
   attackobject( "", tank_assetid, globalselection['assetid'] )

   } // tank-attack





/*

   int mypattern[] = { -1,-3, 0,-3, 1,-3,
                          -2,-2, -1,-2, 0,-2, 1,-2, 2,-2,
                          -3,-1, -2,-1, -1,-1, 0,-1, 1,-1, 2,-1, 3,-1,
                          -3,0, -2,0, -1,0,   1,0, 2,0, 3,0,
                          -3,1, -2,1, -1,1, 0,1, 1,1, 2,1, 3,1,
                          -2,2, -1,2, 0,2, 1,2, 2,2,
                          -1,3, 0,3, 1,3
                        };

var size = mappingarray.length;

for (var i=0; i<size; i++)
    {
    var thetile = "tile" + i;

    x = mappingarray[i][0];
    y = mappingarray[i][1];




let mappingarray =
[
                                                                                [10, 0],
                                                                        [ 9, 1],[10, 1],[11, 1],
                                                                [ 8, 2],[ 9, 2],[10, 2],[11, 2],[12, 2],
                                                        [ 7, 3],[ 8, 3],[ 9, 3],[10, 3],[11, 3],[12, 3],[13, 3],
                                                [ 6, 4],[ 7, 4],[ 8, 4],[ 9, 4],[10, 4],[11, 4],[12, 4],[13, 4],[14, 4],
                                        [ 5, 5],[ 6, 5],[ 7, 5],[ 8, 5],[ 9, 5],[10, 5],[11, 5],[12, 5],[13, 5],[14, 5],[15, 5],
                                [ 4, 6],[ 5, 6],[ 6, 6],[ 7, 6],[ 8, 6],[ 9, 6],[10, 6],[11, 6],[12, 6],[13, 6],[14, 6],
                        [ 3, 7],[ 4, 7],[ 5, 7],[ 6, 7],[ 7, 7],[ 8, 7],[ 9, 7],[10, 7],[11, 7],[12, 7],[13, 7],
                [ 2, 8],[ 3, 8],[ 4, 8],[ 5, 8],[ 6, 8],[ 7, 8],[ 8, 8],[ 9, 8],[10, 8],[11, 8],[12, 8],
        [ 1, 9],[ 2, 9],[ 3, 9],[ 4, 9],[ 5, 9],[ 6, 9],[ 7, 9],[ 8, 9],[ 9, 9],[10, 9],[11, 9],
[ 0,10],[ 1,10],[ 2,10],[ 3,10],[ 4,10],[ 5,10],[ 6,10],[ 7,10],[ 8,10],[ 9,10],[10,10],
        [ 1,11],[ 2,11],[ 3,11],[ 4,11],[ 5,11],[ 6,11],[ 7,11],[ 8,11],[ 9,11],
                [ 2,12],[ 3,12],[ 4,12],[ 5,12],[ 6,12],[ 7,12],[ 8,12],
                        [ 3,13],[ 4,13],[ 5,13],[ 6,13],[ 7,13],
                                [ 4,14],[ 5,14],[ 6,14],
                                        [ 5,15]
];


*/

// ------


console.log(  "---- id: "+ theid +    " x:"+ thex +  " y "+ they + " c:"+coordinatei+ " last A:"+globalselection['assetid'] );


if ( globalselection['atype'] != 14 )
   {
   e.currentTarget.setAttribute('fill', '#ffffff');
   e.currentTarget.setAttribute('opacity', 0.3);
   }



width = 1000000;
they2 = parseInt ( globalselection['coordinate'] / width );
thex2 = globalselection['coordinate'] - (they2*width);

globalselection['x'] = thex2;
globalselection['y'] = they2;

document.getElementById('scrollcenter').style.visibility = "visible";
document.getElementById('eye42').style.visibility = "visible";

render_ts = globalselection['ts'];
if (render_ts < 1) render_ts = '-';

render_shield = globalselection['shield'];
if (render_shield < 1) render_shield = '-';

if ( globalselection['tilerace'] == globalselection['race'] && globalselection['tiletype'] == 2 && globalselection['tilerace'] != 0 ) render_shield += ' (+1 <small><i class="fa fa-solid fa-globe" style="color:#557198"></i></small>)';
console.log(" tilerace:"+globalselection['tilerace'] + " race:"+globalselection['race'] );
render_attack = globalselection['attack'];
if (render_attack < 1) render_attack = '';
if (
   globalselection['atype'] != 5 &&
   globalselection['atype'] != 9 &&
   globalselection['atype'] != 10 &&
   globalselection['atype'] != 11
   ) render_attack = '-';

if (
   globalselection['atype'] == 14
   )
   {
  // render_attack = '-';
//   render_shield = '&infin;';
   render_attack = '&infin;';


//   document.getElementById('navbutton_disable').style.visibility = "hidden";
   //document.getElementById('navbutton_garden').style.visibility = "hidden";
   document.getElementById('navbutton_fire').style.visibility = "visible";



   }

render_nickname = nickname;
if (render_nickname == -1) render_nickname = '';

render_owner = owner;
if (render_owner == "") render_owner = '-';



// ---
var render_repaircountdown = "";
var now = new Date().getTime() / 1000;

 

 var now = new Date().getTime() / 1000;

 var seconds = now -  globalselection['lastrepair'];
 var interval = (24*60*60);

var towait_sec = interval - seconds;
 

// Find the distance between now and the count down date
      var hours = towait_sec / 3600;
    hours = Math.floor(hours);
    if (hours < 10) hours = "0" + hours;
     var minute =   (towait_sec % 3600) / 60;
    minute = Math.floor(minute);
    if (minute < 10) minute = "0" + minute;

      var second = towait_sec % 60;
    second = Math.floor(second);
    if (second < 10) second = "0" + second;

 if (towait_sec > 0)
    {
    render_repaircountdown =  "<div style='margin-left:30%;'>(free repair: "+hours+ ":" + minute + ":" + second+")</div>";

    } else
      {
      render_repaircountdown = "";
      if ( globalselection['atype'] == 4) render_repaircountdown = "<div style='margin-left:30%;'>(free repair)</div>";
                       

      }

// ---



//render_owner += ' +++' + ;
 


if (authorizevar != "") render_owner += " [+"+authorizevar+"]";

// ---



  
//if ( globalselection['assetid'] == "" ) // empty tile
tile2 = tilearray[thex][they].tile;
  if ( tile2.substring(0, 6) == "tile00" )
  
//if ( globalselection['atype'] == "" ) // empty tile
//if ( tile == undefined ) // empty tile
{
console.log("PRINT IT ");
thename  = "non-terraformed area";
} else console.log("A IS : " + globalselection['atype'] );





document.getElementById("thename").innerHTML = "<strong style='font-size:1.0em;'>" + thename + "&nbsp;<strong>";

document.getElementById("coordinate").innerHTML = "<small style='margin-right:0px;'>"+ (thex2) + " | "+(they2) + "</small>";

if ( globalselection['assetid'] <= 0)
   {
   thelink = "-";
   } else
     {
     thelink = "<a href='https://eos.atomichub.io/explorer/asset/"+globalselection['assetid'] + "' target='_blank' style='color:#9999ff;'>"+globalselection['assetid'] + "</a>" ;
     }
document.getElementById("curassetid").innerHTML = "<div style='width:100%'><div style='width:30%;float:left'><i class='fa-regular fa-image' style='color: #ffb800'></i></div> <div style='width:60%;float:left'>"+ thelink + "</div> </div>     <div style='clear:both'></div>";

document.getElementById("owner").innerHTML = "<div style='width:100%'><div style='width:30%;float:left'><span id='invaderpoints'></span></div> <div style='width:60%;float:left'>"+ render_owner + "</div> </div> <div style='clear:both'><span id='factorylastclaim'>"+render_repaircountdown+"</span></div>";

document.getElementById("asset_ts").innerHTML = "<div style='width:100%'><div style='width:30%;float:left'><i class='fa-regular fa-clock' style='color: #9696fe'></i></div> <div style='width:60%;float:left'>"+ render_ts + "</div> </div>     <div style='clear:both'></div>";

document.getElementById("shield").innerHTML = "<div style='width:100%'><div style='width:30%;float:left'><i class='fa-solid fa-shield-heart' style='color: #3175bd'></i></div> <div style='width:60%;float:left'>"+ render_shield+ "</div> </div>     <div style='clear:both'></div>";

attack = globalselection['attack'];


document.getElementById("attack").innerHTML = "<div style='width:100%'><div style='width:30%;float:left'><i class='fa-solid fa-gun' style='color: #2a4d33'></i></div> <div style='width:60%;float:left'>"+render_attack + "</div> </div>     <div style='clear:both'></div>";



document.getElementById("newnickname").value = ""+ render_nickname;

// Get 4 other directions
globalselection['n']['coordinate'] = tilearray[thex][they-1].tileid;
globalselection['n']['assetid']    = tilearray[thex][they-1].asset_id;
globalselection['n']['owner']      = tilearray[thex][they-1].owner;
they2 = parseInt ( globalselection['n']['coordinate'] / width );
thex2 = globalselection['n']['coordinate'] - (they2*width);
globalselection['n']['x']          = thex2;
globalselection['n']['y']          = they2;
globalselection['n']['atype']      = tilearray[thex][they-1].atype;;
globalselection['n']['race']       = tilearray[thex][they-1].race;
globalselection['n']['ts']         = tilearray[thex][they-1].ts;

globalselection['e']['coordinate'] = tilearray[thex+1][they].tileid;
globalselection['e']['assetid']    = tilearray[thex+1][they].asset_id;
globalselection['e']['owner']      = tilearray[thex+1][they].owner;
they2 = parseInt ( globalselection['e']['coordinate'] / width );
thex2 = globalselection['e']['coordinate'] - (they2*width);
globalselection['e']['x']          = thex2;
globalselection['e']['y']          = they2;
globalselection['e']['atype']      = tilearray[thex+1][they].atype;;
globalselection['e']['race']       = tilearray[thex+1][they].race;
globalselection['e']['ts']         = tilearray[thex+1][they].ts;

globalselection['s']['coordinate'] = tilearray[thex][they+1].tileid;
globalselection['s']['assetid']    = tilearray[thex][they+1].asset_id;
globalselection['s']['owner']      = tilearray[thex][they+1].owner;
they2 = parseInt ( globalselection['s']['coordinate'] / width );
thex2 = globalselection['s']['coordinate'] - (they2*width);
globalselection['s']['x']          = thex2;
globalselection['s']['y']          = they2;
globalselection['s']['atype']      = tilearray[thex][they+1].atype;
globalselection['s']['race']       = tilearray[thex][they+1].race;
globalselection['s']['ts']         = tilearray[thex][they+1].ts;

globalselection['w']['coordinate'] = tilearray[thex-1][they].tileid;
globalselection['w']['assetid']    = tilearray[thex-1][they].asset_id;
globalselection['w']['owner']      = tilearray[thex-1][they].owner;
they2 = parseInt ( globalselection['w']['coordinate'] / width );
thex2 = globalselection['w']['coordinate'] - (they2*width);
globalselection['w']['x']          = thex2;
globalselection['w']['y']          = they2;
globalselection['w']['atype']      = tilearray[thex-1][they].atype;;
globalselection['w']['race']       = tilearray[thex-1][they].race;
globalselection['w']['ts']         = tilearray[thex-1][they].ts;




// Selfdestruct-button
if ( globalselection['owner'] == global_account )
   {
   document.getElementById("selfdestruction").className = "selfdestruction";
   } else
     {
     document.getElementById("selfdestruction").className = "selfdestruction_off";
     }




/*
// config
    let configarray = config.split(";");
*/
var canclaim = 0;

if ( globalselection['owner'] == global_account &&
     globalselection['atype'] == 8
   ) canclaim = 1;


var config = globalselection['config']+"";
//var configarray = config.split(";");
var configarray = split(config,";");
if (configarray[0] == 'infected' &&
    configarray[1] == global_account
   ) canclaim = 2;



if ( global_account == globalselection['auth'] ) 
   {
   canclaim = 1;
   }


// alfalf

if ( canclaim == 1)
   {
   document.getElementById("claim_svx").className = "claim";
   document.getElementById("claim_svx").style.height = "";
   document.getElementById("claim_svx").style.visibility = "visible";


   if ( global_account != globalselection['auth'] ) 
      {
      document.getElementById("claim_svx_all").style.height = "";
      document.getElementById("claim_svx_all").style.visibility = "visible";
      }

     // document.getElementById("claim_svx").innerHTML = "ABC " + globalselection['assetid'];


      getdata(callback_getclaimdata, config_contract, config_contract, "collectors", globalselection['assetid'], 2, "i64", 1 );
      /*
      //var params = JSON.stringify(  {"code":_code,"scope":_scope,"table":_table, "lower_bound":_lower, "index_position":2 , "key_type": "i64",  "json":true } );
var params = JSON.stringify(  {"code":_code,"scope":_scope,"table":_table, "lower_bound":_lower, "index_position":_index , "key_type": _key_type, "limit": _limit,  "json":true } );

      */

   } else

if ( canclaim == 2)
   {
   document.getElementById("claim_svx").className = "claim";
   document.getElementById("claim_svx").style.height = "";
   document.getElementById("claim_svx").style.visibility = "visible";



      getdata(callback_getclaimdata, config_contract, config_contract, "collectors", globalselection['assetid'], 2, "i64", 1 );


   } else
     {
     document.getElementById("claim_svx").className = "claim_off";
     document.getElementById("claim_svx").style.height = "0px";
     document.getElementById("claim_svx").style.visibility = "hidden";
     
      
     var lang = document.getElementById("language-selector").value;
      if (lang === "en") document.getElementById("claim_svx").innerHTML = "Claim SVX";
      if (lang === "cn") document.getElementById("claim_svx").innerHTML = "宣称";
           

     
     
        document.getElementById("claim_svx_all").style.height = "0px";
        document.getElementById("claim_svx_all").style.visibility = "hidden";
        

     }


// <div id='selfdestruction' onclick="selfdestruct()"  class='selfdestruction'  >Selfdestruction</div>



// Enable infect-button
var enableinfect = 0;


// 1) Enable button for grey-infector
if ( globalselection['owner'] == global_account &&
     globalselection['atype'] == 10 &&
     globalselection['race'] == 2
   ) enableinfect = 1;

// 2) Enable button for infected collector
var config = globalselection['config'];
//var configarray = config.split(";") + "";
var configarray = split(config,";");

/*
console.log(config);
console.log("len: "+configarray.length);
console.log( configarray[0] + " - " + configarray[1] );
*/

if ( configarray.length > 0)
{
if (configarray[0] == 'infected' &&
    configarray[1] != ""
   )
   {
   enableinfect = 1;
   document.getElementById("thename").innerHTML = "<strong style='font-size:1.0em;color:#ff3333;'>[infected] &nbsp;<strong>";
   }
}


var buttontext = "deactivate";



if ( configarray.length > 0)
{

for (var i=0; i< configarray.length; i+=2)
{

if (configarray[i] == 'disabled' &&
    configarray[i+1] != "" && configarray[i+1] != undefined
   )
   {
   document.getElementById("thename").innerHTML = "<strong style='font-size:1.0em;color:#ff3333;'>[disabled] &nbsp;<strong>";

   buttontext = "activate";

   }


} // for

} // if




 document.getElementById("navbutton_disable").innerHTML = buttontext;



 getinvaderpoints();
/*
// infection has been disabled - sa.11.feb.2023
if (enableinfect)
   {
   document.getElementById("navbutton_infect").style.visibility = "visible";
   } else
     {
     document.getElementById("navbutton_infect").style.visibility = "hidden";
     nav_selection(1);
     }
*/



updatepanel();

console.log("Global Selection:");
console.log(globalselection);
});



       } // if




} // click



function settanktarget()
{
//alert("Set target");

//theid = globalselection['coordinate'];
theid = lastsvgid;

thex = mappingarray[theid][0]  ;
they = mappingarray[theid][1] ;

//they = parseInt ( globalselection['coordinate'] / width );
//thex = globalselection['coordinate'] - (they*width);


// ------
if ( globalselection['atype'] == 11 ) // tank
{
console.log("---");
console.log("-theid -- ",theid);
console.log("-thex -- ",thex);
console.log("-they -- ",they);



let coordinates = [ -1,-3, 0,-3, 1,-3,
                          -2,-2, -1,-2, 0,-2, 1,-2, 2,-2,
                          -3,-1, -2,-1, -1,-1, 0,-1, 1,-1, 2,-1, 3,-1,
                          -3,0, -2,0, -1,0,   1,0, 2,0, 3,0,
                          -3,1, -2,1, -1,1, 0,1, 1,1, 2,1, 3,1,
                          -2,2, -1,2, 0,2, 1,2, 2,2,
                          -1,3, 0,3, 1,3 ];



size = coordinates.length * 0.5;
console.log(" --- SIZE: ",size," ");

i2 = 0;
for (var i=0; i<size; i++)
    {
    thex2 = thex + coordinates[i2]; i2++;
    they2 = they + coordinates[i2]; i2++;

    console.log(" thex2:",thex2, "  they2:",they2);

    // search
    var size2 = mappingarray.length;
    var FOUND = 0;
    var found_index = -1;
    console.log("size2 ",size2);
    for (var j=0; j<size2; j++)
        {
        //var thetile = "tile" + i;

        x = mappingarray[j][0];
        y = mappingarray[j][1];
        if (x == thex2 && y == they2)
           {
           FOUND = 1;
           found_index = j;
           j = size2;
           }
        } // for j...

    if (FOUND)
       {
//       var thetile2 = "tile" + found_index;
       var theid3 = 'tileb'+(found_index);
 console.log(" --- theid3:",theid3 );
document.getElementById(theid3).setAttribute('fill', '#ff00ff');
document.getElementById(theid3).setAttribute('opacity', 0.3);
       } // if (FOUND)

    } // for i...

tankmode = 1;
tank_assetid = globalselection['assetid'];

} // if ( globalselection['atype'] == 11 ) - tank



} // settanktarget



function split( sentence, separator )
{
var ret = new Array();

console.log("s:["+sentence+"] ");

if (sentence == "" || sentence == undefined) return (ret);
l = sentence.length;

var word = "";
for (i=0; i<l; i++)
    {
    if (sentence[i] != separator)
       {
       word += sentence[i];
       } else
         {
         ret.push( word );
         word = "";
         }
    } // for

if (word.length > 0) ret.push( word );

return(ret);
} // split2


var global_tslastclaim  = 0;


function callback_getclaimdata( value )
{
console.log("callback_getclaimdata");
console.log( value );
tslastclaim = value.rows[0].lastclaim;
global_tslastclaim = tslastclaim;

 var now = new Date().getTime() / 1000;

 var seconds = now - tslastclaim;
  var interval = (24*60*60);
      // interval = 2*60; hack

      var towait_sec = interval - seconds;
/*
*/

  // Find the distance between now and the count down date
      var hours = towait_sec / 3600;
    hours = Math.floor(hours);
    if (hours < 10) hours = "0" + hours;
     var minute =   (towait_sec % 3600) / 60;
    minute = Math.floor(minute);
    if (minute < 10) minute = "0" + minute;

      var second = towait_sec % 60;
    second = Math.floor(second);
    if (second < 10) second = "0" + second;

 if (towait_sec > 0)
    {
    document.getElementById("claim_svx").innerHTML =  ""+hours+ ":" + minute + ":" + second;
    document.getElementById("claim_svx").className =  "claim_off";
    } else
      {
      
      var lang = document.getElementById("language-selector").value;
      if (lang === "en") document.getElementById("claim_svx").innerHTML = "Claim SVX";
      if (lang === "cn") document.getElementById("claim_svx").innerHTML = "宣称";
                       
      document.getElementById("claim_svx").className =  "claim";
      }

} // callback_getclaimdata



  document.addEventListener("click", (evt) => {
        const flyoutEl = document.getElementById("mysvg");
        const flyoutEl2 = document.getElementById("inventorycontent");
        const flyoutEl3 = document.getElementById("movepanel");
        const flyoutEl4 = document.getElementById("board_navigation");


        let targetEl = evt.target; // clicked element
        do {
          if(
             targetEl == flyoutEl  ||
             targetEl == flyoutEl2 ||
             targetEl == flyoutEl3 ||
             targetEl == flyoutEl4
             ) {

            console.log("inside")
            return;
          }
          // Go up the DOM
          targetEl = targetEl.parentNode;
        } while (targetEl);

                console.log("outside");
                resettiles();
      });

// End - cursor



function updatepanel()
{


console.log("UP: "+globalselection['coordinate']+" "+globalselection['assetid'] + " " + globalselection['owner']);

// Nickname
if ( globalselection['owner'] == global_account)
   {
   document.getElementById("newnickname").style.background = "#ffffff";
   console.log("OWNER OK");
   } else
   {
   document.getElementById("newnickname").style.background = "#cccccc";
      console.log("OWNER NOT OK");
   }



// Move-Panel
if ( globalselection['atype'] == 5)
   {
//   document.getElementById("movepanel").style.background = "#ffffff";
   console.log("bulldozer OK");
   } else
   {
  // document.getElementById("movepanel").style.background = "#cccccc";
      console.log("bulldozer NOT OK");
   }





} // updatepanel()



</script>


<script>




var globalselection = new Object();
globalselection['coordinate']   = "";
globalselection['assetid']      = "";
globalselection['owner']        = "";
globalselection['x']            = -1;
globalselection['y']            = -1;
globalselection['atype']        = -1;
globalselection['ts']           = -1;
globalselection['race']         = -1;
globalselection['shield']       = -1;
globalselection['attack']       = -1;
globalselection['config']       = "";

globalselection['n'] = new Object();
globalselection['n']['coordinate'] = "";
globalselection['n']['assetid']    = "";
globalselection['n']['owner']      = "";
globalselection['n']['x']          = "";
globalselection['n']['y']          = "";
globalselection['n']['atype']      = "";
globalselection['n']['race']       = "";
globalselection['n']['ts']         = "";
globalselection['n']['shield']     = "";

globalselection['e'] = new Object();
globalselection['e']['coordinate'] = "";
globalselection['e']['assetid']    = "";
globalselection['e']['owner']      = "";
globalselection['e']['x']          = "";
globalselection['e']['y']          = "";
globalselection['e']['atype']      = "";
globalselection['e']['race']       = "";
globalselection['e']['ts']         = "";
globalselection['e']['shield']     = "";

globalselection['s'] = new Object();
globalselection['s']['coordinate'] = "";
globalselection['s']['assetid']    = "";
globalselection['s']['owner']      = "";
globalselection['s']['x']          = "";
globalselection['s']['y']          = "";
globalselection['s']['atype']      = "";
globalselection['s']['race']       = "";
globalselection['s']['ts']         = "";
globalselection['s']['shield']     = "";

globalselection['w'] = new Object();
globalselection['w']['coordinate'] = "";
globalselection['w']['assetid']    = "";
globalselection['w']['owner']      = "";
globalselection['w']['x']          = "";
globalselection['w']['y']          = "";
globalselection['w']['atype']      = "";
globalselection['w']['race']       = "";
globalselection['w']['ts']         = "";
globalselection['w']['shield']     = "";

var graborder = new Array();

graborder[0] = new Object();
graborder[ 0]['x']   = 10;
graborder[ 0]['y']   = 0;
graborder[ 0]['cnt'] = 1;
graborder[ 1] = new Object();
graborder[ 1]['x']   = 9;
graborder[ 1]['y']   = 1;
graborder[ 1]['cnt'] = 3;
graborder[ 2] = new Object();
graborder[ 2]['x']   = 8;
graborder[ 2]['y']   = 2;
graborder[ 2]['cnt'] = 5;
graborder[ 3] = new Object();
graborder[ 3]['x']   = 7;
graborder[ 3]['y']   = 3;
graborder[ 3]['cnt'] = 7;
graborder[ 4] = new Object();
graborder[ 4]['x']   = 6;
graborder[ 4]['y']   = 4;
graborder[ 4]['cnt'] = 9;
graborder[ 5] = new Object();
graborder[ 5]['x']   = 5;
graborder[ 5]['y']   = 5;
graborder[ 5]['cnt'] = 11;
graborder[ 6] = new Object();
graborder[ 6]['x']   = 4;
graborder[ 6]['y']   = 6;
graborder[ 6]['cnt'] = 11;
graborder[ 7] = new Object();
graborder[ 7]['x']   = 3;
graborder[ 7]['y']   = 7;
graborder[ 7]['cnt'] = 11;
graborder[ 8] = new Object();
graborder[ 8]['x']   = 2;
graborder[ 8]['y']   = 8;
graborder[ 8]['cnt'] = 11;
graborder[ 9] = new Object();
graborder[ 9]['x']   = 1;
graborder[ 9]['y']   = 9;
graborder[ 9]['cnt'] = 11;
graborder[10] = new Object();
graborder[10]['x']   = 0;
graborder[10]['y']   = 10;
graborder[10]['cnt'] = 11;
graborder[11] = new Object();
graborder[11]['x']   = 1;
graborder[11]['y']   = 11;
graborder[11]['cnt'] = 9;
graborder[12] = new Object();
graborder[12]['x']   = 2;
graborder[12]['y']   = 12;
graborder[12]['cnt'] = 7;
graborder[13] = new Object();
graborder[13]['x']   = 3;
graborder[13]['y']   = 13;
graborder[13]['cnt'] = 5;
graborder[14] = new Object();
graborder[14]['x']   = 4;
graborder[14]['y']   = 14;
graborder[14]['cnt'] = 3;
graborder[15] = new Object();
graborder[15]['x']   = 5;
graborder[15]['y']   = 15;
graborder[15]['cnt'] = 1;

       console.log("graborder:");
       console.log(graborder);


// Mapping-array

let mappingarray =
[
                                                                                [10, 0],
                                                                        [ 9, 1],[10, 1],[11, 1],
                                                                [ 8, 2],[ 9, 2],[10, 2],[11, 2],[12, 2],
                                                        [ 7, 3],[ 8, 3],[ 9, 3],[10, 3],[11, 3],[12, 3],[13, 3],
                                                [ 6, 4],[ 7, 4],[ 8, 4],[ 9, 4],[10, 4],[11, 4],[12, 4],[13, 4],[14, 4],
                                        [ 5, 5],[ 6, 5],[ 7, 5],[ 8, 5],[ 9, 5],[10, 5],[11, 5],[12, 5],[13, 5],[14, 5],[15, 5],
                                [ 4, 6],[ 5, 6],[ 6, 6],[ 7, 6],[ 8, 6],[ 9, 6],[10, 6],[11, 6],[12, 6],[13, 6],[14, 6],
                        [ 3, 7],[ 4, 7],[ 5, 7],[ 6, 7],[ 7, 7],[ 8, 7],[ 9, 7],[10, 7],[11, 7],[12, 7],[13, 7],
                [ 2, 8],[ 3, 8],[ 4, 8],[ 5, 8],[ 6, 8],[ 7, 8],[ 8, 8],[ 9, 8],[10, 8],[11, 8],[12, 8],
        [ 1, 9],[ 2, 9],[ 3, 9],[ 4, 9],[ 5, 9],[ 6, 9],[ 7, 9],[ 8, 9],[ 9, 9],[10, 9],[11, 9],
[ 0,10],[ 1,10],[ 2,10],[ 3,10],[ 4,10],[ 5,10],[ 6,10],[ 7,10],[ 8,10],[ 9,10],[10,10],
        [ 1,11],[ 2,11],[ 3,11],[ 4,11],[ 5,11],[ 6,11],[ 7,11],[ 8,11],[ 9,11],
                [ 2,12],[ 3,12],[ 4,12],[ 5,12],[ 6,12],[ 7,12],[ 8,12],
                        [ 3,13],[ 4,13],[ 5,13],[ 6,13],[ 7,13],
                                [ 4,14],[ 5,14],[ 6,14],
                                        [ 5,15]
];

//   console.log("mappingarray:");
//   console.log(mappingarray);



let mappingarray_frame =
[
                                                                                [9 , 0],
                                                                        [ 8, 1],        [11, 1],
                                                                [ 7, 2],                        [12, 2],
                                                        [ 6, 3],                                        [13, 3],
                                                [ 5, 4],                                                        [14, 4],
                                        [ 4, 5],                                                                        [16, 5],
                                [ 3, 6],                                                                        [15, 6],
                        [ 2, 7],                                                                        [14, 7],
                [ 1, 8],                                                                        [13, 8],
        [ 0, 9],                                                                        [12, 9],
[-1,10],[ 1,10],                                                                [11,10],
        [ 0,11],                                                        [10,11],
                [ 1,12],                                        [ 9,12],
                        [ 2,13],                        [ 8,13],
                                [ 3,14],        [ 7,14],
                                        [ 5,15]
];


// Tile-array

var tilearray = new Array();


for (var i=0; i<16; i++)
{
tilearray[i] = new Array();
for (var i2=0; i2<16; i2++)
    {
    tilearray[i][i2] = new Object();
    tilearray[i][i2]['tile']     = "tilexx";
    tilearray[i][i2]['tileid']   = "123";
    tilearray[i][i2]['asset_id'] = "";
    tilearray[i][i2]['owner']    = "";
    tilearray[i][i2]['ts']       = 0;
    tilearray[i][i2]['loaded']   = 0;

    tilearray[i][i2]['attack']      = 0;
    tilearray[i][i2]['atype']       = -1;
    tilearray[i][i2]['config']      = -1;
    tilearray[i][i2]['eos']         = -1;
    tilearray[i][i2]['name']        = "";
    tilearray[i][i2]['nick']        = -1;
    tilearray[i][i2]['ori']         = -1;
    tilearray[i][i2]['race']        = -1;
    tilearray[i][i2]['shield']      = -1;
    tilearray[i][i2]['shield_max']  = -1;
    tilearray[i][i2]['sov']         = -1;
    tilearray[i][i2]['svx_balance'] = -1;
    tilearray[i][i2]['disabled']    = 0;



    } // for i2 ...
} // for ... i


   //    console.log("tilearray:");
   //    console.log(tilearray);







function callback_getglobals( rows )
{

console.log("ROWS callback_pricedata ...(callback)");
//    console.log(rows);

globaldata['version']    =  rows.rows[0].version;
globaldata['m_sov']      =  rows.rows[0].m_sov;
globaldata['a_sov']      =  rows.rows[0].a_sov;
globaldata['svx_self']   =  rows.rows[0].svx_self;
globaldata['config']     =  rows.rows[0].config;





document.getElementById("frontendversion").innerHTML = frontendversion;
document.getElementById("contractversion").innerHTML = globaldata['version'];
document.getElementById("frontendversion_cn").innerHTML = frontendversion;
document.getElementById("contractversion_cn").innerHTML = globaldata['version'];

if (frontendversion != globaldata['version'])
   {
   alert("Warning - Frontend-Version " + frontendversion + " and Contract-Version " + globaldata['version'] + " are different! Please download the newest version of this frontend from github.io !" );
   }

if (frontendversion_cn != globaldata['version'])
   {
   alert("警告 - 前端版本" + frontendversion_cn + " 警告 - 前端版本 和 合约版本 " + globaldata['version'] + " 前端版本和合约版本不同！请从 Github.io 下载此前端的最新版本！" );
   }

} // callback_getglobals()


var globaldata = new Array();

function loadglobals()
{

getdata(callback_getglobals, config_contract, config_contract, "global", "", "", "", 1 );


} // loadglobals






// ---
// Collectorpoint-handling
//

function callback_getinvaderpoints( rows )
{

console.log("ROWS ------  callback_getcollectorpoints ...(callback)");
console.log(rows);

if ( document.getElementById("invaderpoints") )
   {
var now = new Date().getTime() / 1000;
now = parseInt(now);

   username = rows.rows[0].user;

   inv_points = 0;
           // 2 - residence          
           inv_points += ( rows.rows[0].items[2]   *  1);    
           // 3 - agri
           inv_points += ( rows.rows[0].items[3]   *  1);          
           // 5 - bulldozer
           inv_points += ( rows.rows[0].items[5]   * -2);          
           // 8 - collectors
           inv_points += ( rows.rows[0].items[8]   *  4);
           // 10 - SU
           inv_points += ( rows.rows[0].items[10]  * -2);           
           // 11 - tanks 
           inv_points += ( rows.rows[0].items[11]  * -4);
           // 14 - R.E.D.
           inv_points += ( rows.rows[0].items[14]  * -10);

if (inv_points === 0){
   document.getElementById("invaderpoints").innerHTML = "<i class='fa-solid fa-person-military-rifle'></i>" ;
} else if (inv_points > 0) {
   document.getElementById("invaderpoints").innerHTML = "<i class='fa-solid fa-person-military-rifle' style='color:#44aa44'></i> <small>(+"+ inv_points+")</small>" ;
} else {
   document.getElementById("invaderpoints").innerHTML = "<i class='fa-solid fa-person-military-rifle' style='color:#E82926'></i> <small>("+ inv_points+")</small>" ; 
}
   }

/*
globaldata['version']    =  rows.rows[0].version;
globaldata['m_sov']      =  rows.rows[0].m_sov;
globaldata['a_sov']      =  rows.rows[0].a_sov;
globaldata['svx_self']   =  rows.rows[0].svx_self;
globaldata['config']     =  rows.rows[0].config;
document.getElementById("frontendversion").innerHTML = frontendversion;
document.getElementById("contractversion").innerHTML = globaldata['version'];
document.getElementById("frontendversion_cn").innerHTML = frontendversion;
document.getElementById("contractversion_cn").innerHTML = globaldata['version'];
if (frontendversion != globaldata['version'])
   {
   alert("Warning - Frontend-Version " + frontendversion + " and Contract-Version " + globaldata['version'] + " are different! Please download the newest version of this frontend from github.io !" );
   }
if (frontendversion_cn != globaldata['version'])
   {
   alert("警告 - 前端版本" + frontendversion_cn + " 警告 - 前端版本 和 合约版本 " + globaldata['version'] + " 前端版本和合约版本不同！请从 Github.io 下载此前端的最新版本！" );
   }
*/
} // callback_getcollectorpoints()



function getinvaderpoints()
{

   document.getElementById("invaderpoints").innerHTML = "";

   // global_account
   if (globalselection['owner'] != "")
      {
      getdata(callback_getinvaderpoints, config_contract, config_contract, "useritems", globalselection['owner'], "", "", 1 );
      }

           

} // function getcollectorpoints()

/*
call with x,y, and maxtiles (currently 3): 

 var pseudorand =  getpseudovoidtile( x2,y2, 3 );
    var thetile = "tile00";
    if (pseudorand == 1) thetile = "tile00b";
    if (pseudorand == 2) thetile = "tile00c";
//    if (pseudorand == 3) thetile = "tile00d";
    
// please note: if you increase the number of maxtiles, the assignment of the tiles
                of the empty tiles will be change         
*/

function getpseudovoidtile( x, y, maxtiles)
{

seed = x + ( y*width );
var ret = mulberry32( seed );

 
ret2 = Math.floor(maxtiles*ret);

return(ret2); 
}

function mulberry32(a) {
  
      var t = a += 0x6D2B79F5;
      t = Math.imul(t ^ t >>> 15, t | 1);
      t ^= t + Math.imul(t ^ t >>> 7, t | 61);
      return ((t ^ t >>> 14) >>> 0) / 4294967296;
 
}

// ---



function initgameboard()
{






// Append the tile-div

var index = 0;

for (var y=0; y<=15; y++)
{
var startx = 0;
var starty = y;


for (var i=0; i<=12;i++)
{



var thex = startx*10 - 10;
var they = starty *10 - 25     ;


if (
   they >= -25  &&
   they <= 75  &&
   thex <= 90
   )
{
//console.log("- index: " + index + "  x:"+thex  + " y:"+they  );


var div = document.createElement("div");
var divid = "tile"+index;
div.id = divid;
div.style.position = "absolute";
div.style.left = thex+"%";
div.style.top  = they+"%";

div.style.width = "20%";
div.style.height = "30%";


div.style.background = "";

div.style.color = "#ffffff";


 


//div.innerHTML = "<img src='img/tile00.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
div.innerHTML = "<img src='img/tile00.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
document.getElementById("gameboard").appendChild(div);




index++;
} // if (starty >= -25)

startx += 1;
starty -= 0.5;
} // for ...


} // for starty...





// Append the object-div

var index = 0;

for (var y=0; y<=15; y++)
{
var startx = 0;
var starty = y;


for (var i=0; i<=12;i++)
{



var thex = startx*10 - 10;
var they = starty *10 - 25     ;


if (
   they >= -25  &&
   they <= 75  &&
   thex <= 90
   )
{
//console.log("- index: " + index + "  x:"+thex  + " y:"+they  );


var div = document.createElement("div");
var divid = "obj"+index;
div.id = divid;
div.style.position = "absolute";
div.style.left = thex+"%";
div.style.top  = they+"%";

div.style.width = "20%";
div.style.height = "30%";
div.style.zIndex = they+200;

div.style.background = "";
//div.style.border = "1px solid #00ff00";
div.style.color = "#ffffff";

div.innerHTML = "<img src='img/one.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
document.getElementById("gameboard").appendChild(div);




index++;
} // if (starty >= -25)

startx += 1;
starty -= 0.5;
} // for ...


} // for starty...







// Append the text-div

var index = 0;

for (var y=0; y<=15; y++)
{
var startx = 0;
var starty = y;


for (var i=0; i<=12;i++)
{



var thex = startx*10 - 10;
var they = starty *10 - 25     ;


if (
   they >= -25  &&
   they <= 75  &&
   thex <= 90
   )
{
//console.log("- index: " + index + "  x:"+thex  + " y:"+they  );


var div = document.createElement("div");
var divid = "thetext"+index;
div.id = divid;
div.style.position = "absolute";
div.style.left = thex+"%";
div.style.top  = they+"%";

div.style.width = "20%";
div.style.height = "30%";
div.style.zIndex = they+301;

div.style.background = "";
// div.style.border = "1px solid #00ff00";
div.style.color = "#ffffff";

div.innerHTML = "<img src='img/one.png?s=442' style='position:absolute;width:100%;'>" ;
document.getElementById("gameboard").appendChild(div);




index++;
} // if (starty >= -25)

startx += 1;
starty -= 0.5;
} // for ...


} // for starty...



} // initgameboard()



function setaccountname( name )
{
document.getElementById('myaccountname').innerHTML = ""+name+"";

document.getElementById('walletmenu_anchor').style.visibility = "hidden";
document.getElementById('walletmenu_anchor').style.height = "0px";

document.getElementById('walletmenu_scatter').style.visibility = "hidden";
document.getElementById('walletmenu_scatter').style.height = "0px";

document.getElementById('logoutbutton').style.visibility = "visible";
document.getElementById('logoutbutton').style.height = "";

if (name == config_contract)
   {
   document.getElementById('menu5').style.visibility = "visible"; 
   document.getElementById('adminmenu2').style.visibility = "visible"; 
   document.getElementById('adminmenu2').style.height = "70px"; 
   
   document.getElementById('chooserace').style.height = "0px";
   document.getElementById('chooserace').style.visibility = "hidden";
   
   }
   else
   {
   document.getElementById('menu5').style.visibility = "hidden";
   document.getElementById('adminmenu2').style.visibility = "hidden"; 
   document.getElementById('adminmenu2').style.height = "0px"; 
   }

}




function logoutall( name )
{
document.getElementById('myaccountname').innerHTML = "xxx";


document.getElementById('walletmenu_anchor').style.visibility = "visible";
document.getElementById('walletmenu_anchor').style.height = "";

document.getElementById('walletmenu_scatter').style.visibility = "visible";
document.getElementById('walletmenu_scatter').style.height = "";


document.getElementById('logoutbutton').style.visibility = "hidden";
document.getElementById('logoutbutton').style.height = "0px";

document.getElementById('userrace').innerHTML = "";
document.getElementById('chooserace').style.height = "240px;";
document.getElementById('chooserace').style.visibility = "visible";

document.getElementById('menu5').style.visibility = "hidden";

} // logoutall()




function external_login_action()
{
update_counter = 0;
//alert("GA: "+global_account);
}


var refreshcounter = 0;
function func_success( message )
{
console.log(message);
refreshcounter = 4;

chat_update_thread();
}

function func_error( message )
{
alert(message);
}




var   userdata = new Object();
userdata['race'] = -1;


function callback_userdata( value )
{
console.log(value);

if ( value.rows[0].user == global_account)
   {
   userdata['race'] = value.rows[0].race;
   } else
     {
     userdata['race'] = "";
     }

console.log("race:" + userdata['race']);

if (userdata['race'] == 1)
   {
   document.getElementById('userrace').innerHTML = "[Human]"

   document.getElementById('chooserace').style.height = "0px";
   document.getElementById('chooserace').style.visibility = "hidden";

   setsound(1);
   } else

if (userdata['race'] == 2)
   {
   document.getElementById('userrace').innerHTML = "[Grey]"

   document.getElementById('chooserace').style.height = "0px";
   document.getElementById('chooserace').style.visibility = "hidden";

   setsound(2);
   } else


if (userdata['race'] == 4)
   {
   document.getElementById('userrace').innerHTML = "[Sirian]"

   document.getElementById('chooserace').style.height = "0px";
   document.getElementById('chooserace').style.visibility = "hidden";

   setsound(4);
   } else


if (userdata['race'] == 5)
   {
   document.getElementById('userrace').innerHTML = "[Repto]"

   document.getElementById('chooserace').style.height = "0px";
   document.getElementById('chooserace').style.visibility = "hidden";

   setsound(5);
   } else


     {
     console.log("no RACE!!!!!");
     
     
     if (global_account != config_contract)
        {
        document.getElementById('chooserace').style.height = "240px";
        document.getElementById('chooserace').style.visibility = "visible";
        } else
          {
          document.getElementById('chooserace').style.height = "0px";
          document.getElementById('chooserace').style.visibility = "hidden";
          }
     

     }

} // callback_userdata()




function getuserinfo()
{

getdata(callback_userdata, config_contract,  config_contract, "user", global_account, "", "", 1 );

} // getuserinfo()




function callback_render_areas( value )
{

 loadboard_cnt++;
       if (loadboard_cnt == loadboard_size)
          {
          console.log("loadboard_size reached!");


          // count objects to load
          loadobjects_cnt  = 0;
          loadobjects_size = 0;



          for (x=0; x<16; x++)
          for (y=0; y<16; y++)
              {

              if ( tilearray[x][y]['asset_id'] != "" )
                 {
                 loadobjects_size++;
                 }

              } // for y...

          //console.log("loadobjects_size: ",loadobjects_size);

          //renderboard(); // pre render
          loadobjects();
          } else
            {
            //console.log("loadboard: ",loadboard_cnt, " of " , loadboard_size );
            }


if (value.rows.length == 0)
  {
  console.log("RETURN");
  //  return;
  }



var size = value.rows.length;


for (var j=0; j<size; j++)
    {
    id       = value.rows[j].id;
    tile     = value.rows[j].tile;
    asset_id = value.rows[j].asset_id;
    owner    = value.rows[j].owner;
    ts       = value.rows[j].ts;

    // console.log("- j:" , j," " , id);



    var found = 0;
    var lastx = -1;
    var lasty = -1;
for (var i=0; i<16; i++)
for (var i2=0; i2<16; i2++)
    {

    tileid = tilearray[i][i2]['tileid'];


    if (tileid == id)
       {
       found = 1;
       lastx = i;
       lasty = i2;
       i = 16;
       i2 = 16;
       }
    }


//  console.log(" - found: " , found);
    if (found)
       {
       tile2 = tile;
       if (tile2 < 10) tile2 = '0'+tile;
       tilearray[lastx][lasty]['tile']     = "tile"+tile2;
    //       tilearray[lastx][lasty]['tile']     = "tile10";
       tilearray[lastx][lasty]['asset_id'] =  asset_id;
       tilearray[lastx][lasty]['owner']    = owner;
       tilearray[lastx][lasty]['ts']       = ts;


    // console.log(" - x: " , lastx, " y:",lasty, " tile2:" , tile2, " " ,asset_id);


       } // if (found)

    } // for j...


//  tilearray[i][i2]['disabled']

} // callback_render_areas



var loadboard_cnt    = 0;
var loadboard_size   = 0;
var loadobjects_cnt  = 0;
var loadobjects_size = 0;


function refreshboard()
{
loadboard_cnt=0;


loadboard_size = graborder.length;
console.log("loadboard_size: ",loadboard_size);

resettiles();

loadboard();
}

function loadboard()
{


// ---
// Rendering

xcoor = document.getElementById('xcoor').value*1;
ycoor = document.getElementById('ycoor').value*1;

width = 1000000;


// tilearray init + reset / clear tile-information like name / nickname
for (x=0; x<16; x++)
for (y=0; y<16; y++)
    {
    x2 = x + xcoor - 8;
    y2 = y + ycoor - 7;
    coordinatei = (y2*width) + x2;
    tilearray[x][y]['tileid'] = coordinatei;
    
    /*
    var distance = Math.sqrt(Math.pow(x2 - 500000,2)+Math.pow(y2-500000,2) );
              
 if (distance <= 60) 
    {              
    var pseudorand =  getpseudovoidtile( x2,y2, 3 );
    thetile = "tile00";
    if (pseudorand == 1) thetile = "tile00b";
    if (pseudorand == 2) thetile = "tile00c";
    } else
      {
      var pseudorand =  getpseudovoidtile( x2,y2, 3 );
      thetile = "tile00x";
      if (pseudorand == 1) thetile = "tile00bx";
      if (pseudorand == 2) thetile = "tile00cx";
      }
*/

     
    
     var pseudorand =  getpseudovoidtile( x2,y2, 3 );
    thetile = "tile00";
    if (pseudorand == 1) thetile = "tile00b";
    if (pseudorand == 2) thetile = "tile00c";
    
    
    
    
    
    tilearray[x][y]['tile'] = thetile;
    tilearray[x][y]['asset_id'] = "";

    tilearray[x][y]['atype'] = "";

    tilearray[x][y]['race'] = "";

    tilearray[x][y]['name']    = "";
    tilearray[x][y]['shield']  = "";
    tilearray[x][y]['nick']    = -1;
    }






size = graborder.length;
 console.log("size: ",size);


for (var i=0; i<size; i++)
    {
    x   = graborder[i]['x'];
    y   = graborder[i]['y'];
    cnt = graborder[i]['cnt'];

    tileid = tilearray[x][y]['tileid'];

    //console.log("i:(",i,") x: ",x," y:", y," cnt:",cnt, " " , tileid );

    getdata(callback_render_areas, config_contract,  config_contract, "area", tileid, "", "", cnt );
    } // for i...





} //  loadboard()




function loadobjects()
{

var cnt = 0;
for (x=0; x<16; x++)
for (y=0; y<16; y++)
    {

    if (     tilearray[x][y]['asset_id'] != "" )
       {
       //url = nft_node + tilearray[x][y]['asset_id'];
       //readasset(url, assethandler,x,y ) ;

       params = Object();
       params['x'] = x;
       params['y'] = y;

       getdata2(callback_readasset, params, "atomicassets", config_contract, "assets",  tilearray[x][y]['asset_id'], "", "", 1 );
//       getdata2(callback_readasset, params, "atomicassets", "sovspacegame", "assets",  tilearray[x][y]['asset_id'], "", "", 1 );


       cnt++;
       }
    } // for y...


// Render if not asset is in the boardwindow
console.log("readasset cnt:"+cnt)    ;
if (cnt == 0) renderboard();

} // loadobjects()




function renderboard()
{
console.log("...RENDERBOARD");
var size = mappingarray.length;

for (var i=0; i<size; i++)
    {
    var thetile = "tile" + i;

    x = mappingarray[i][0];
    y = mappingarray[i][1];




    tile         =  tilearray[x][y]['tile'];
    asset_id         =  tilearray[x][y]['asset_id'];  //
    tileid       =  tilearray[x][y]['tileid'];
    atype        =  tilearray[x][y]['atype'];
    race         =  tilearray[x][y]['race'];
    ori          =  tilearray[x][y]['ori'];
    nick         =  tilearray[x][y]['nick'] + ""  ;
    sov          =  tilearray[x][y]['sov'];
    svx_balance  =  tilearray[x][y]['svx_balance']+" SVX2";
    sov  = sov  / 10000;
    owner        =  tilearray[x][y]['owner'];
    shield       =  tilearray[x][y]['shield'];
    shield_max   =  tilearray[x][y]['shield_max'];
    config       =  tilearray[x][y]['config'] + "";

//console.log(" i:::("+x+","+y+")"+i+" REN tile:["+tile+"]");
    // config
//    let configarray = config.split(";");
    let configarray = split(config,";");
    
    
 

    // bones 
    if (tile == "tile12")
       {
        var pseudorand =  getpseudovoidtile( x,y, 6 );
       tile = "tile12a";
       if (pseudorand == 1) tile = "tile12b";
       if (pseudorand == 2) tile = "tile12c";
       if (pseudorand == 3) tile = "tile12d";
       if (pseudorand == 4) tile = "tile12e";
       if (pseudorand == 5) tile = "tile12f";
       if (pseudorand == 6) tile = "tile12g";
       }

 /*
 
        var pseudorand =  getpseudovoidtile( x2,y2, 3 );
      thetile = "tile00x";
      if (pseudorand == 1) thetile = "tile00bx";
      if (pseudorand == 2) thetile = "tile00cx";
      }


    if (thetile == "tile12")
       {
       thetile = "tile12a";
       }
    
 */
 


    if ( tile != "tile10" &&  tile != "tile11")
       {
       var buffer = "<img src='img/"+tile+".png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       document.getElementById(thetile).innerHTML = buffer;
       } else
         {
         var buffer = "";
          if ( tile == "tile10" )
       {
       console.log("place s1.png");

       buffer += "<img src='img/s1.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       }

    if ( tile == "tile11" )
       {
       console.log("place s2.png");
       buffer += "<img src='img/s2.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       }
       document.getElementById(thetile).innerHTML = buffer;
         }



    // Object
    var theobject = "obj" + i;


    // ---
    buffer = "";
  /*  
    if (i == 30)
{
// buffer += "<img src='img/tank_e_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
 buffer += "<img src='img/out.gif?s=442' style='position:absolute;border:none;width:100%;'>" ;
}
*/

    if ( atype == 1 && race == 1)
       {
       buffer += "<img src='img/lander1.png?s=4442' style='position:absolute;border:none;width:100%;'>";
       }

    if ( atype == 2 && race == 1)
       buffer += "<img src='img/resident_a.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 3 && race == 1)
       buffer += "<img src='img/agri_a.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 4 && race == 1)
       buffer += "<img src='img/factory_a.png?s=442' style='position:absolute;border:none;width:100%;'>" ;




    if ( atype == 5 && race == 1)
       {
       if ( ori == 1 )
          buffer += "<img src='img/rover_a_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/rover_a_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/rover_a_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/rover_a_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //




    if ( atype == 7 && race == 1)
       buffer = "<img src='img/wall_a.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 8 && race == 1)
       {
       if (configarray[0] == "infected" && configarray[1] != "")
          {
          buffer = "<img src='img/collector_a_infected.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
          } else
            {
            buffer = "<img src='img/collector_a.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
            }

//
       }

    if ( atype == 9 && race == 1)
       {
       
       var disabled = 0;
       if ( configarray.length > 0)
          {

          for (var i3=0; i3< configarray.length; i3+=2)
              {
              if (configarray[i3] == 'disabled' &&
                 configarray[i3+1] != "" && configarray[i3+1] != undefined
                 )
                 {
                 disabled = 1;
                 }
              } // for
       } // if


       if (disabled == 0)
          buffer = "<img src='img/tower_a.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       if (disabled == 1)
          buffer = "<img src='img/tower_a_inactive.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       }

   if ( atype == 10 && race == 1)
       {
       if ( ori == 1 )
          buffer += "<img src='img/service_a_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/service_a_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/service_a_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/service_a_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

   if ( atype == 11 && race == 1)
       {
       if ( ori == 1 )
          buffer += "<img src='img/tank_a_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/tank_a_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/tank_a_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/tank_a_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

   if ( atype == 12 && race == 1)
       {
       if ( ori == 1 )
          buffer += "<img src='img/transporter_a_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/transporter_a_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/transporter_a_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/transporter_a_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

    if ( atype == 13 && race == 1)
       buffer = "<img src='img/wall2_a.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 14 && race == 1)
       buffer = "<img src='img/red_1.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;



    // ---
    // Greys
    if ( atype == 1 && race == 2)
       buffer = "<img src='img/lander2.png?s=4442' style='position:absolute;border:none;width:100%;'>";

    if ( atype == 2 && race == 2)
       buffer = "<img src='img/resident_b.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 3 && race == 2)
       buffer = "<img src='img/agri_b.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 4 && race == 2)
       buffer = "<img src='img/factory_b.png?s=442' style='position:absolute;border:none;width:100%;'>" ;



    if ( atype == 5 && race == 2)
       {
       if ( ori == 1)
          buffer += "<img src='img/rover_b_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2)
          buffer += "<img src='img/rover_b_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3)
          buffer += "<img src='img/rover_b_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4)
          buffer += "<img src='img/rover_b_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //





    if ( atype == 7 && race == 2)
       {
       buffer = "<img src='img/wall_b.png?s=4442' style='position:absolute;border:none;width:100%;'>";
       }

    if ( atype == 8 && race == 2)
       buffer = "<img src='img/collector_b.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

 //   if ( atype == 9 && race == 2)
   //    buffer = "<img src='img/tower_b.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

 if ( atype == 9 && race == 2)
       {
       
       var disabled = 0;
       if ( configarray.length > 0)
          {

          for (var i3=0; i3< configarray.length; i3+=2)
              {
              if (configarray[i3] == 'disabled' &&
                 configarray[i3+1] != "" && configarray[i3+1] != undefined
                 )
                 {
                 disabled = 1;
                 }
              } // for
       } // if


       if (disabled == 0)
          buffer = "<img src='img/tower_b.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       if (disabled == 1)
          buffer = "<img src='img/tower_b_inactive.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       }
       
   if ( atype == 10 && race == 2)
       {
       if ( ori == 1 )
          buffer += "<img src='img/service_b_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/service_b_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/service_b_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/service_b_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //


   if ( atype == 11 && race == 2)
       {
       if ( ori == 1 )
          buffer += "<img src='img/tank_b_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/tank_b_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/tank_b_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/tank_b_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

   if ( atype == 12 && race == 2)
       {
       if ( ori == 1 )
          buffer += "<img src='img/transporter_b_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/transporter_b_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/transporter_b_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/transporter_b_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

    if ( atype == 13 && race == 2)
       buffer = "<img src='img/wall2_b.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 14 && race == 2)
       buffer = "<img src='img/red_2.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    // --- end greys



    // ---
    // Sirians
    if ( atype == 1 && race == 4)
       buffer = "<img src='img/lander4.png?s=4442' style='position:absolute;border:none;width:100%;'>";

    if ( atype == 2 && race == 4)
       buffer = "<img src='img/resident_d.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 3 && race == 4)
       buffer = "<img src='img/agri_d.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 4 && race == 4)
       buffer = "<img src='img/factory_d.png?s=442' style='position:absolute;border:none;width:100%;'>" ;



    if ( atype == 5 && race == 4)
       {
       if ( ori == 1)
          buffer += "<img src='img/rover_d_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2)
          buffer += "<img src='img/rover_d_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3)
          buffer += "<img src='img/rover_d_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4)
          buffer += "<img src='img/rover_d_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //





    if ( atype == 7 && race == 4)
       {
       buffer = "<img src='img/wall_d.png?s=4442' style='position:absolute;border:none;width:100%;'>";
       }

    if ( atype == 8 && race == 4)
       buffer = "<img src='img/collector_d.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

//    if ( atype == 9 && race == 4)
//       buffer = "<img src='img/tower_d.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

 if ( atype == 9 && race == 4)
       {
       
       var disabled = 0;
       if ( configarray.length > 0)
          {

          for (var i3=0; i3< configarray.length; i3+=2)
              {
              if (configarray[i3] == 'disabled' &&
                 configarray[i3+1] != "" && configarray[i3+1] != undefined
                 )
                 {
                 disabled = 1;
                 }
              } // for
       } // if


       if (disabled == 0)
          buffer = "<img src='img/tower_d.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       if (disabled == 1)
          buffer = "<img src='img/tower_d_inactive.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       }

   if ( atype == 10 && race == 4)
       {
       if ( ori == 1 )
          buffer += "<img src='img/service_d_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/service_d_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/service_d_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/service_d_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //


   if ( atype == 11 && race == 4)
       {
       if ( ori == 1 )
          buffer += "<img src='img/tank_d_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/tank_d_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/tank_d_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/tank_d_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

   if ( atype == 12 && race == 4)
       {
       if ( ori == 1 )
          buffer += "<img src='img/transporter_d_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/transporter_d_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/transporter_d_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/transporter_d_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

    if ( atype == 13 && race == 4)
       buffer = "<img src='img/wall2_d.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 14 && race == 4)
       buffer = "<img src='img/red_4.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    // --- end sirians





    // ---
    // Reptos
    if ( atype == 1 && race == 5)
       buffer = "<img src='img/lander5.png?s=4442' style='position:absolute;border:none;width:100%;'>";

    if ( atype == 2 && race == 5)
       buffer = "<img src='img/resident_e.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 3 && race == 5)
       buffer = "<img src='img/agri_e.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 4 && race == 5)
       buffer = "<img src='img/factory_e.png?s=442' style='position:absolute;border:none;width:100%;'>" ;



    if ( atype == 5 && race == 5)
       {
       if ( ori == 1)
          buffer += "<img src='img/rover_e_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2)
          buffer += "<img src='img/rover_e_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3)
          buffer += "<img src='img/rover_e_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4)
          buffer += "<img src='img/rover_e_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //





    if ( atype == 7 && race == 5)
       {
       buffer = "<img src='img/wall_e.png?s=4442' style='position:absolute;border:none;width:100%;'>";
       }

    if ( atype == 8 && race == 5)
       buffer = "<img src='img/collector_e.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

//    if ( atype == 9 && race == 5)
//       buffer = "<img src='img/tower_e.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

 if ( atype == 9 && race == 5)
       {
       
       var disabled = 0;
       if ( configarray.length > 0)
          {

          for (var i3=0; i3< configarray.length; i3+=2)
              {
              if (configarray[i3] == 'disabled' &&
                 configarray[i3+1] != "" && configarray[i3+1] != undefined
                 )
                 {
                 disabled = 1;
                 }
              } // for
       } // if


       if (disabled == 0)
          buffer = "<img src='img/tower_e.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       if (disabled == 1)
          buffer = "<img src='img/tower_e_inactive.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       }
       
   if ( atype == 10 && race == 5)
       {
       if ( ori == 1 )
          buffer += "<img src='img/service_e_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/service_e_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/service_e_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/service_e_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //


   if ( atype == 11 && race == 5)
       {
       if ( ori == 1 )
          buffer += "<img src='img/tank_e_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/tank_e_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/tank_e_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/tank_e_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

   if ( atype == 12 && race == 5)
       {
       if ( ori == 1 )
          buffer += "<img src='img/transporter_e_001.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 2 )
          buffer += "<img src='img/transporter_e_002.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 3 )
          buffer += "<img src='img/transporter_e_003.png?s=442' style='position:absolute;border:none;width:100%;'>" ;

       if ( ori == 4 )
          buffer += "<img src='img/transporter_e_004.png?s=442' style='position:absolute;border:none;width:100%;'>" ;
       } //

    if ( atype == 13 && race == 5)
       buffer = "<img src='img/wall2_e.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    if ( atype == 14 && race == 5)
       buffer = "<img src='img/red_5.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    // --- end reptos



    //if (asset_id == 2199025130637  )
    //   buffer = "<img src='img/monument_1.png?s=4442' style='position:absolute;border:none;width:100%;'>" ;

    checkbox_shield = document.getElementById('checkbox_shield').checked;
    checkbox_owner  = document.getElementById('checkbox_owner').checked;

/*
var size = mappingarray.length;



value_shield = 'hidden';
if (checkbox_shield) value_shield = 'visible';

value_owner = 'hidden';
if (checkbox_owner) value_owner = 'visible';

for (var i=0; i<size; i++)
    {
    var divid_shieldinfo = "shieldinfo_" + i;
    if ( document.getElementById(divid_shieldinfo) != undefined )
       {
       document.getElementById(divid_shieldinfo).style.visibility = value_shield;
       }

    var divid_ownderinfo = "ownerinfo_" + i;
    if ( document.getElementById(divid_ownderinfo) != undefined )
       {
       document.getElementById(divid_ownderinfo).style.visibility = value_owner;
       }

    } // for i...
*/


    document.getElementById(theobject).innerHTML = buffer;

  var theobject2 = "thetext" + i;

  var  buffer = "";
    // Text
    if (
       atype == 1 ||
       atype == 2 ||
       atype == 3 ||
       atype == 4 ||
       atype == 5 ||
       atype == 6 ||
       atype == 7 ||
       atype == 8 ||
       atype == 9 ||
       atype == 10 ||
       atype == 11 ||
       atype == 12 ||
       atype == 13 ||
       atype == 14

       )
       {
       if (race == 1) color = "#ffffff";
       if (race == 2) color = "#aaffaa";
       if (race == 4) color = "#aaaaff";
       if (race == 5) color = "#ffaaaa";

       if (owner == global_account)
          {
          color = "#ffee99";
          }

       var divid_shieldinfo     = "shieldinfo_" + i;
       var divid_shieldinfo_bar = "shieldbar_" + i;
       var divid_owner          = "ownerinfo_" + i;

       value_shield = 'hidden';
       if (checkbox_shield) value_shield = 'visible';

       value_owner = 'hidden';
       if (checkbox_owner) value_owner = 'visible';

//buffer += "<small>§("+i+"/"+atype+")["+theobject2+"]</small>";
       buffer += "<div class='tileinfo_nick noselect' style='color:"+color+";position:absolute;text-align:center;left:0%;width:100%;font-weight:bold;font-size:0.8em;top:70%;z-index:300;border:none;float:left; '>" +nick+  "</div>" ;
        


       marketid = 1;
       //
       size2 = pricedata.length;
       for (var i2=1; i2<=size2; i2++)
           {
           if (pricedata[i2]['race'] !== undefined)
              {
              if ( pricedata[i2]['race'] == race && pricedata[i2]['atype'] == atype)
                 {
                 marketid = i2;
                 i2 = size2;
                 } // if ...
              } // != undefined
           } // for...
        // pricedata[id]['race']

       //var sov2 =  marketdata[marketid];
       var sov2 =  marketdata_item[marketid];
//       shieldinfo = shield + "/" + shield_max + " (" +sov+ " SOV)x";
       shieldinfo = shield + "/" + shield_max + " (" +sov2+ " SOV)";
       buffer += "<div id='"+divid_shieldinfo+"' class='tileinfo_nick noselect' style='color:"+color+";position:absolute;left:0%;width:100%;font-weight:bold;font-size:12px;top:80%;z-index:300;visibility:"+value_shield+";'>" +shieldinfo+  " </div>" ;

       // bar
       buffer += "<div style='width:100%;position:absolute;top:40%;border:none;;text-align:center;'>";
        buffer += "<div id='"+divid_shieldinfo_bar+"' class='tileinfo_nick noselect' style='color:"+color+";background:#ee0000;width:50%;margin-left:auto;margin-right:auto;font-weight:bold;font-size:12px;z-index:400;border:;height:10px;visibility:"+value_shield+";'>" ;

        percent = (shield / shield_max)*100;
        buffer += "<div id='' class=' noselect' style='color:"+color+";background:green;width:"+percent+"%;margin-left:0px;z-index:301;border:none;height:10px;'>" ;
        buffer += "</div>";


        buffer += "</div>";
       buffer += "</div>";

       buffer += "<div id='"+divid_owner+"' class='tileinfo_nick noselect' style='color:"+color+";position:absolute;left:0%;width:100%;font-weight:bold;font-size:12px;top:86%;z-index:300;visibility:"+value_owner+";'>" +owner+  " </div>" ;

 
       } // if object



    document.getElementById(theobject2).innerHTML = buffer;

   


    } // for i...





grabtocanvans();

} // renderboard()



function assethandler( value , x, y)
{

tilearray[x][y]['attack']   = value['data']['data']['attack'];
tilearray[x][y]['atype']    = value['data']['data']['atype'];
tilearray[x][y]['config']    = value['data']['data']['config'];
tilearray[x][y]['eos']    = value['data']['data']['eos'];
tilearray[x][y]['name']    = value['data']['data']['name'];

    tilearray[x][y]['nick']    = value['data']['data']['nick'];
    tilearray[x][y]['ori']    = value['data']['data']['ori'];
    tilearray[x][y]['race']    = value['data']['data']['race'];
    tilearray[x][y]['shield']    = value['data']['data']['shield'];
    tilearray[x][y]['shield_max']    = value['data']['data']['shield_max'];
    tilearray[x][y]['sov']    = value['data']['data']['sov'];



    loadobjects_cnt++;
       if (loadobjects_cnt == loadobjects_size)
          {
          console.log("loadobjects_size reached! ");
//          load_my_assets();
          renderboard();

          } else
            {
            //console.log("loadobjects_cnt: ", loadobjects_cnt, " of ", loadobjects_size );
            }




} // assethandler




function readurl_simple(url, jsonparam)
{
try {
var xhr = new XMLHttpRequest();
var fd = new FormData();
xhr.open('POST', url, false);

var data2 = jsonparam ;

xhr.send(data2);

var response = xhr.responseText;

return(response);
      } catch (e)
         {
         console.log("Connection failed, grabbing local");
         return '[]';
         }
} // readurl()


function readurl(url, callback )
{

console.log(" readurl ",url," ");
asset_id = 2199025113747;
asset_id = 2199025113579;
   var jsonparam = JSON.stringify( [ ]  );

var xhr = new XMLHttpRequest();


xhr.open("POST", url);


xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");



xhr.onreadystatechange = function () {
   if (xhr.readyState === 4) {

      json = xhr.responseText;

      const rows = JSON.parse(json);

      callback(rows);


   }};


xhr.send();

//console.log(" readurl2 ");

} // readurl()



function readasset(url, callback, thex, they )
{

//console.log(" readurl ",url," ");
//asset_id = 2199025113747;
//asset_id = 2199025113579;
   var jsonparam = JSON.stringify( [ ]  );

var xhr = new XMLHttpRequest();

xhr.open("POST", url);


xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");



xhr.onreadystatechange = function () {
   if (xhr.readyState === 4) {

      json = xhr.responseText;

      const rows = JSON.parse(json);

      callback(rows,thex, they);


   }};


xhr.send();

//console.log(" readurl2 ");


} // readasset()



function readasset2(url, callback, thex, they )
{

//console.log(" readurl ",url," ");
//asset_id = 2199025113747;
//asset_id = 2199025113579;
   var jsonparam = JSON.stringify( [ ]  );

var xhr = new XMLHttpRequest();

xhr.open("POST", url);


xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");



xhr.onreadystatechange = function () {
   if (xhr.readyState === 4) {

      json = xhr.responseText;

      const rows = JSON.parse(json);

      callback(rows,thex, they);


   }};


xhr.send();

//console.log(" readurl2 ");


} // readasset()

//-----


function callback_readasset( value, params )
{

//console.log(value);
/*
console.log("TTT");
console.log(params);
console.log(value);
*/

/*
if ( value.more == false )
   {
    loadobjects_cnt++;
   return;
   }
*/

//var data = value.rows[0].immutable_serialized_data;
//var data = value.rows[0].mutable_serialized_data;
var idata = value.rows[0].immutable_serialized_data;
var mdata = value.rows[0].mutable_serialized_data;


decoded_data = mydecoder( idata, mdata );

/*
console.log("Decoded:");
console.log(decoded_data);
console.log("---");
*/
// ---
//document.getElementById('debugout').innerHTML = "[" + decoded_data['name'] + "]" ;

x = params['x'];
y = params['y'];

/*console.log("x: " + x);
console.log("y: " + y);
*/

//a = decoded_data['attack'];
//console.log("a: " + a);

tilearray[x][y]['attack']   = decoded_data['attack'];
tilearray[x][y]['atype']    = decoded_data['atype'];
   // tilearray[x][y]['config']    = decoded_data['config'];
    tilearray[x][y]['eos']    = decoded_data['eos'];
    tilearray[x][y]['name']    =decoded_data['name'];

    tilearray[x][y]['nick']    = decoded_data['nick'];
    tilearray[x][y]['ori']    = decoded_data['ori'];
    tilearray[x][y]['race']    = decoded_data['race'];
    tilearray[x][y]['shield']    = decoded_data['shield'];
    tilearray[x][y]['shield_max']    = decoded_data['shield_max'];
    tilearray[x][y]['sov']    = decoded_data['sov'];
    tilearray[x][y]['config']    = decoded_data['config'];



    loadobjects_cnt++;
       if (loadobjects_cnt == loadobjects_size)
          {
          console.log("loadobjects_size reached! ");
          renderboard();
          } else
            {
            //console.log("loadobjects_cnt: ", loadobjects_cnt, " of ", loadobjects_size );
            }



} // callback_readasset

function mydecoder( idata, mdata )
{
var ret = Object();
//console.log("Decoder");



// ---
// idata
//



var bytearray = Array();
len = unsignedFromVarintBytes( idata, 1 );
//console.log( "len_: " + len['number']);


for (var i=0; i<len['number']; i++)
    {
    bytearray[i] = idata[i+2];
    } // for i...

var thename = utf8BytesToString(bytearray);

i2 = len['number']+3;
//console.log(" - i2 vor ipfs " + i2);

lenipfs = unsignedFromVarintBytes( idata, i2 );
//console.log( "lenipfs: " + lenipfs['number']);
i2++;


bytearray = Array();



for (var i=0; i<lenipfs['number']; i++)
    {
    bytearray[i] = idata[i+i2];
    //console.log(" - " + nick);
    }




var ipfs = utf8BytesToString(bytearray);



/*
l = mdata.length;
console.log("L: " + l);

console.log("------");
for (var i=0; i<l; i++)
    {
    ch =   String.fromCharCode( mdata[i]   );

    ret2 = unsignedFromVarintBytes( mdata, i );
    var value = ret2['number'];
    var index = ret2['index'];

    console.log(i+" | "+ch + " - " + "["+value+"] index:"+index+" ");
    }
console.log("-fin -----");
*/


// ---
// mdata
//

// 1) nick
var bytearray = Array();
len = unsignedFromVarintBytes( mdata, 1 );
//console.log( "len: " + len['number']);

for (var i=0; i<len['number']; i++)
    {
    bytearray[i] = mdata[i+2];
    }

var nick = utf8BytesToString(bytearray);


// shield
i2 = len['number']+3;
ret2 = unsignedFromVarintBytes( mdata, i2 );
var shield = ret2['number'];
i2 = ret2['index'];
i2++;

// shield-max
ret2 = unsignedFromVarintBytes( mdata, i2 );
var shield_max = ret2['number'];
i2 = ret2['index'];
i2++;


// attack
ret2 = unsignedFromVarintBytes( mdata, i2 );
var attack = ret2['number'];
i2 = ret2['index'];
i2++;

// race
ret2 = unsignedFromVarintBytes( mdata, i2 );
var race = ret2['number'];
i2 = ret2['index'];
i2++;

// atype
ret2 = unsignedFromVarintBytes( mdata, i2 );
var atype = ret2['number'];
i2 = ret2['index'];
i2++;

// sov
ret2 = unsignedFromVarintBytes( mdata, i2 );
var sov = ret2['number'];
i2 = ret2['index'];
i2++;

// eos
ret2 = unsignedFromVarintBytes( mdata, i2 );
var eos = ret2['number'];
i2 = ret2['index'];
i2++;

// ori
ret2 = unsignedFromVarintBytes( mdata, i2 );
var ori = ret2['number'];
i2 = ret2['index'];
i2++;



// config
var bytearray = Array();
len = unsignedFromVarintBytes( mdata, i2 );
//console.log( "++++ len : " + len['number']);
i2++;
for (var i=0; i<len['number']; i++)
    {
    //ch =   String.fromCharCode( mdata[i+i2]   );
    //console.log(" * " + (i+i2)+ " ("+ch+") " , mdata[i]);
    bytearray[i] = mdata[i+i2];
    }

var config = utf8BytesToString(bytearray);



//console.log("--i2_b "+i2+"----");
ret["name"] = thename;
ret["ipfs"] = ipfs;

ret['nick'] = nick;
ret['shield'] = shield;
ret['shield_max'] = shield_max;
ret['attack'] = attack;
ret['race'] = race;
ret['atype'] = atype;
ret['sov'] = sov;
ret['eos'] = eos;
ret['ori'] = ori;
ret["config"] = config;

return (ret);
} // mydecoder








function unsignedFromVarintBytes( buffer, index )
{
var ret = Object();
ret['number'] = 0;
ret['index']  = 0;


var number     = 0;
var multiplier = 1;
var i          = index;

while ( buffer[i] >= 128 )
      {
      number += (buffer[i] - 128) * multiplier;
      i++;
      multiplier *= 128;
      }
      number += (buffer[i]) * multiplier;
      i++;

ret['number'] = number;
ret['index']  = i;

return ret;
} // unsignedFromVarintBytes


function utf8BytesToString(b) {
    return decodeURIComponent(escape(String.fromCharCode.apply(null, b)));
}


//-----


function inituser( race )
{

var theactions = [];

       memo = "This is it";




    var action = {
                 account: config_contract,
                 name: 'inituser',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "user": global_account,
                       "race": race
                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }



} //  inituser()





function setnickname()
{


newnickname = document.getElementById('newnickname').value;

if ( newnickname.toLowerCase() == "open" ) newnickname = newnickname.toLowerCase() ;


console.log("last_assetid:::::: ",globalselection['assetid']);


var theactions = [];




    var action = {
                 account: config_contract,
                 name: 'setnickname',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "assetid": globalselection['assetid'],
                       "user" : global_account,
                       "nickname" : newnickname
                       }
                 };


theactions.push(action);



if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // setnickname()


function placeobject( asset_id )
{



if (asset_id == '')
   {
   asset_id = selectednft['asset_id'];
   }


var theactions = [];



var memo = "place;"+global_account+";"+globalselection['x']+";"+globalselection['y']+"";


    var action = {
                 account: "atomicassets",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "asset_ids": [asset_id],
                       "memo": memo,


                       }
                 };


theactions.push(action);


if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // placeobject()





function callback_getinventory_mainpage( rows )
{
console.log("ROWS...(callback)");


content = "";
content += "<table><tr>";

      var size = rows.rows.length;
      console.log("size:::"+ size);

for (var i=0; i<size; i++)
          {
          var asset_id = rows.rows[i].asset_id;

          // ---
          //           
          collection_name = rows.rows[i].collection_name;          
          var idata       = rows.rows[i].immutable_serialized_data;
          var mdata       = rows.rows[i].mutable_serialized_data;                    
          decoded_data    = mydecoder( idata, mdata );
     
        
          
          // --- 

/*
          //console.log("--- url: " + url);
          var url = nft_node + asset_id;
          var jsonparam = JSON.stringify( {assetid: asset_id } );
          var mediajson = readurl_simple(url, jsonparam);
          var json_array = JSON.parse(mediajson);
          // console.log(json_array);          
          var collection_name = json_array['data']['collection']['collection_name'] ;
*/

         if (  collection_name == "sovspacegame" )
            {
            //var the_id          = json_array['data']['data']['id'];
            /*
            var hash_img        = json_array['data']['data']['img'];
            var the_race        = json_array['data']['data']['race'];
            var the_atype       = json_array['data']['data']['atype'];
            var title           = json_array['data']['data']['name'] ;
            */
            hash_img            = decoded_data['ipfs'];
            the_race            = decoded_data['race'];
            the_atype           = decoded_data['atype'];
            title               = decoded_data['name'];
            
            if (title == undefined) title = "Alien Girl";
            // console.log("hash_img: " + hash_img);
            content += "<td>";
            
            
            
            
            
            content += "<div id='nft_"+asset_id+"' onclick='selectnft("+asset_id+")' name='mynft' class='nft_cell_small' style=''>";




            var imgbuffer = "";
            /*
            if (the_atype == 14 && asset_id == 2199025130637)
               {
               imgbuffer = "<img src='img/nft_monument_1.png' style='width:100px;margin-top:10px;'>";
               }
               else
              */
                  {
                  imgbuffer = "<img src='img/nft_"+the_race+"_"+the_atype+".png' style='width:100px;margin-top:5px;'>";
                  }



            content +=   imgbuffer + "<br>";






         // --



  // if (asset_id >= 2199025218704)
   if (asset_id >= 2199025449661)
           {

           asset_link = "<a href='https://eos.atomichub.io/explorer/asset/" + asset_id + "' style='color:#eeeeee;' target='_blank'>#"+asset_id+ "</a>";

           content += "<strong>"+ title + "</strong><br>";
           content += "<small>"+ asset_link + "</small><br>";
           content += "<div onclick='placeobject("+asset_id+")' class='placenft' style=''>Place</div><br>";

           } else
              {
                  content += "[TEST-NFT]";


                 thelink = "burnasset("+asset_id+")";
                 content += "<br>";
                 content += "<span class='mintbutton' onclick='"+thelink+"' style='background:#ff3333;'>Burn NFT</span>";

               }

            //  --


            content += "</div>";
            content += "</td>";
            } // if (  collection_name == "xusogamedemo" )

          } // for i...


          content += "</tr></table>";
         document.getElementById('div_inventory_inner').innerHTML =  content;



} // callback_getinventory_mainpage()



function callback_getinventory( rows )
{
console.log("ROWS...(callback)");
//    console.log(rows);

content = "";
content += "<table><tr>";

      var size = rows.rows.length;
      console.log("size:::"+ size);

for (var i=0; i<size; i++)
          {
          var asset_id = rows.rows[i].asset_id;

 
          collection_name = rows.rows[i].collection_name;
          
          var idata   = rows.rows[i].immutable_serialized_data;
          var mdata   = rows.rows[i].mutable_serialized_data;
          
          
          decoded_data = mydecoder( idata, mdata );

/*
          var url = nft_node + asset_id;
          //          console.log("--- url: " + url);
          var jsonparam = JSON.stringify( {assetid: asset_id } );
          var mediajson = readurl_simple(url, jsonparam);
          var json_array = JSON.parse(mediajson);
          // console.log(json_array);
          var collection_name = json_array['data']['collection']['collection_name'] ;
*/

         if (  collection_name == "sovspacegame" )
            {
            /*
            var the_id          = json_array['data']['data']['id'];
            var hash_img        = json_array['data']['data']['img'];
            var hash_video      = json_array['data']['data']['video'];
            var title      = json_array['data']['data']['name'] ;
            */
            
            hash_img            = decoded_data['ipfs'];
            the_race            = decoded_data['race'];
            the_atype           = decoded_data['atype'];
            title               = decoded_data['name'];
            
            
            if (title == undefined) title = "Alien Girl";
            console.log("hash_img: " + hash_img);
            content += "<td>";
            content += "<div class='nft_cell2' style=''>";


            // var the_race        = json_array['data']['data']['race'];
            //  var the_atype       = json_array['data']['data']['atype'];
            var imgbuffer       = "";

        
                  {
                  imgbuffer = "<img src='img/nft_"+the_race+"_"+the_atype+".png' style='width:100px;margin-top:10px;'>";
                  }

            content +=   imgbuffer + "<br>";



            asset_link = "<a href='https://eos.atomichub.io/explorer/asset/" + asset_id + "' style='color:#eeeeee;' target='_blank'>#"+asset_id+ "</a>";

            content += "<strong>"+ title + "</strong><br>";
            content += "<small>"+ asset_link + "</small><br>";


           content += "&nbsp;<br>";

         thelink = "sellasset("+asset_id+")";


   if (asset_id >= 2199025449661)

           {

           if (the_atype == 6)
              {
              content += "[street]";
              } else
                 {


                 // Get current prices





                   marketid = 1;
       //
       size2 = pricedata.length;
       for (var i2=1; i2<=size2; i2++)
           {
           if (pricedata[i2]['race'] !== undefined)
              {
              if ( pricedata[i2]['race'] == the_race && pricedata[i2]['atype'] == the_atype)
                 {
                 marketid = i2;
                 i2 = size2;
                 } // if ...
              } // != undefined
           } // for...
        // pricedata[id]['race']
   var sov2 =  marketdata_item[marketid];


            content += "<span >"+sov2+" SOV</span><br>";

                 content += "<span class='mintbutton' onclick='"+thelink+"'>Sell NFT</span>";
                 }
           } else
              {
                  content += "[TEST-NFT]";


                 thelink = "burnasset("+asset_id+")";
                 content += "<br>";
                 content += "<span class='mintbutton' onclick='"+thelink+"' style='background:#ff3333;'>Burn NFT</span>";

               }



            content += "</div>";
            content += "</td>";
            } // if (  collection_name == "xusogamedemo" )

          } // for i...


         content += "</tr></table>";


         document.getElementById('div_inventory_inner2').innerHTML =  content;

} // callback_getinventory()




var pricedata = new Array();

function callback_pricedata( rows )
{

console.log("ROWS callback_pricedata ...(callback)");
    console.log(rows);

var size = rows.rows.length;
console.log("size: " + size);

for (var i=0; i<size; i++)
    {
    id = rows.rows[i].id;
//    console.log("id: "+id + " "+rows.rows[i].psov);

    pricedata[id] = new Object();
    pricedata[id]['peos']  = rows.rows[i].peos;
    pricedata[id]['psov']  = rows.rows[i].psov;
    pricedata[id]['atype'] = rows.rows[i].atype;
    pricedata[id]['race']  = rows.rows[i].race;
    } // for...

getdata(callback_getinventory, "atomicassets", global_account, "assets", "", "", "", 1112 );
getdata(callback_getinventory_mainpage, "atomicassets", global_account, "assets", "", "", "", 1112 );

} // callback_pricedata()


var selectednft = new Object();
selectednft['asset_id'] = "";

function selectnft( asset_id )
{

selectednft['asset_id'] = asset_id;

var divname = "nft_"+asset_id;

console.log(divname + " " + asset_id);


otherdivs = document.getElementsByName("mynft");

size = otherdivs.length;
console.log("size " + size);

for (var i=0; i<size; i++)
    if (otherdivs[i].id != divname )
       {
       console.log("- "+ otherdivs[i].id );
       document.getElementById( otherdivs[i].id ).style.border = "1px solid #ffffff";
       }

} // selectnft()

function loadinventory()
{

console.log("Load inventory...");
getdata(callback_pricedata, config_contract, config_contract, "atemplate", "", "", "", 1000 );

} // loadinventory()

function mintasset(id) {

    marketStuffs();

    let s = markets.rows[id - 1].circulation;
    let b = markets.rows[id - 1].startprice;
    let e = markets.rows[id - 1].epsilon;
    let nftType = markets.rows[id - 1].name;
    let singlePrice = 0;
    let totalPrice = 0;
    let sovPriceArray = [];
    let n = prompt("how many " + nftType + "s would you like to mint? (Enter 0 to cancel)");
    while (isNaN(n)) {
        n = prompt("Enter numbers only:");

    };
    n = parseInt(n);

    if (n > 0) {
    //let p = b * (1 + ((s + n - 1) / e));
    //let p1 = b * (1 + (s / e));
    for (let i = 0; i < n; i++) {
        if (e === 0) {
            singlePrice = 20;
        } else {
            singlePrice = b * (1 + ((s + i) / e));
        }
        singlePrice = Number(singlePrice.toFixed(4));
        totalPrice += singlePrice;
        sovPriceArray.push(singlePrice.toFixed(4) + " SOV");
    }

    if (confirm("pay " + totalPrice.toFixed(4) + " SOV to mint " + n + " " + nftType + "s?") == true) {

        var theactions = [];

        memo = "mint;" + global_account + ";" + id;

        //psov = pricedata[id]['psov'] / 10000;
        //peos = pricedata[id]['peos'] / 10000;

        for (let i = 0; i < n; i++) {
            if (i < n) {
                let sovAmount = sovPriceArray[i];
                var action = {
                    account: "sovmintofeos",
                    name: 'transfer',
                    authorization: [{
                        actor: global_account,
                        permission: "active"
                    }],
                    data: {
                        "from": global_account,
                        "to": config_contract,
                        "quantity": sovAmount,
                        "memo": memo,
                    }
                };

                theactions.push(action);
            }
        }
        console.log(theactions);

        if (1) {
            transact(func_success, func_error, theactions);
        }
    }}
} // mintasset()



function sellasset( asset_id )
{

var theactions = [];

var memo = "sell";

    var action = {
                 account: "atomicassets",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "asset_ids": [asset_id],
                       "memo": memo,
                       }
                 };

theactions.push(action);

if (1)
   {
   transact( func_success, func_error, theactions );
   }
} // sellasset()




function burnasset( asset_id )
{

var theactions = [];

var memo = "sell";


    var action = {
                 account: "atomicassets",
                 name: 'burnasset',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "asset_owner": global_account,
                       "asset_id": asset_id,
                       }
                 };




theactions.push(action);




if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // burnasset()




function setmenu( menu )
{

if (menu == 1)
   {
   document.getElementById('page1').style.height = "";
   document.getElementById('page2').style.height = "0px";
   document.getElementById('page3').style.height = "0px";
   document.getElementById('page4').style.height = "0px";
   document.getElementById('page5').style.height = "0px";
   document.getElementById('page6').style.height = "0px";

   document.getElementById('menu1').className = "menubutton_selected";
   document.getElementById('menu2').className = "menubutton";
   document.getElementById('menu3').className = "menubutton";
   document.getElementById('menu4').className = "menubutton";
   document.getElementById('menu5').className = "menubutton";
 //  document.getElementById('menu6').className = "menubutton";
   } else

if (menu == 2)
   {
   document.getElementById('page1').style.height = "0px";
   document.getElementById('page2').style.height = "";
   document.getElementById('page3').style.height = "0px";
   document.getElementById('page4').style.height = "0px";
   document.getElementById('page5').style.height = "0px";
   document.getElementById('page6').style.height = "0px";

   document.getElementById('menu1').className = "menubutton";
   document.getElementById('menu2').className = "menubutton_selected";
   document.getElementById('menu3').className = "menubutton";
   document.getElementById('menu4').className = "menubutton";
   document.getElementById('menu5').className = "menubutton";
 //  document.getElementById('menu6').className = "menubutton";

   marketStuffs();
   loadinventory();
   loadnftinfos();
   loadmarkets();
   }

if (menu == 3)
   {
   document.getElementById('page1').style.height = "0px";
   document.getElementById('page2').style.height = "0px";
   document.getElementById('page3').style.height = "";
   document.getElementById('page4').style.height = "0px";
   document.getElementById('page5').style.height = "0px";
   document.getElementById('page6').style.height = "0px";

   document.getElementById('menu1').className = "menubutton";
   document.getElementById('menu2').className = "menubutton";
   document.getElementById('menu3').className = "menubutton_selected";
   document.getElementById('menu4').className = "menubutton";
   document.getElementById('menu6').className = "menubutton";
//   document.getElementById('menu5').className = "menubutton";      #

   }

if (menu == 4)
   {
   document.getElementById('page1').style.height = "0px";
   document.getElementById('page2').style.height = "0px";
   document.getElementById('page3').style.height = "0px";
   document.getElementById('page4').style.height = "";
   document.getElementById('page5').style.height = "0px";
   document.getElementById('page6').style.height = "0px";

   document.getElementById('menu1').className = "menubutton";
   document.getElementById('menu2').className = "menubutton";
   document.getElementById('menu3').className = "menubutton";
   document.getElementById('menu4').className = "menubutton_selected";
   document.getElementById('menu5').className = "menubutton";
 //  document.getElementById('menu6').className = "menubutton";


   }


if (menu == 5)
   {
   document.getElementById('page1').style.height = "0px";
   document.getElementById('page2').style.height = "0px";
   document.getElementById('page3').style.height = "0px";
   document.getElementById('page4').style.height = "0px";
   document.getElementById('page5').style.height = "";
   document.getElementById('page6').style.height = "0px";

   document.getElementById('menu1').className = "menubutton";
   document.getElementById('menu2').className = "menubutton";
   document.getElementById('menu3').className = "menubutton";
   document.getElementById('menu4').className = "menubutton";
   document.getElementById('menu5').className = "menubutton_selected";
 //  document.getElementById('menu6').className = "menubutton";
   loadadminnftinfos();
   }


// Terms of Use
if (menu == 6)
   {
   document.getElementById('page1').style.height = "0px";
   document.getElementById('page2').style.height = "0px";
   document.getElementById('page3').style.height = "0px";
   document.getElementById('page4').style.height = "0px";
   document.getElementById('page5').style.height = "0px";
   document.getElementById('page6').style.height = "";

   document.getElementById('menu1').className = "menubutton";
   document.getElementById('menu2').className = "menubutton";
   document.getElementById('menu3').className = "menubutton";
   document.getElementById('menu4').className = "menubutton";
   document.getElementById('menu5').className = "menubutton";
//   document.getElementById('menu6').className = "menubutton_selected";
   }


} // setmenu


function moveobject( direction )
{

last_action				 = "moveobject";
last_attack_direction    = direction;

//var movesteps =  document.getElementById('movesteps').value * 1
var movesteps = 1;

var theactions = [];

var dir = "";
if (direction == 1) dir = "n";
if (direction == 2) dir = "e";
if (direction == 3) dir = "s";
if (direction == 4) dir = "w";

memo = "move;"+global_account+";"+globalselection['assetid']+";"+dir;


var quantitysov = globaldata['m_sov'] / 10000;
quantitysov = Number(quantitysov).toFixed(4) + " SOV";



    var action = {
                 account: "sovmintofeos",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "quantity": quantitysov,
                       "memo": memo,


                       }
                 };


 for (var i=0; i<movesteps; i++)
     {
     theactions.push(action);
     }





if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // moveobject()




function demolishobject( direction )
{

if (direction == 1) direction = "n";
if (direction == 2) direction = "e";
if (direction == 3) direction = "s";
if (direction == 4) direction = "w";





var theactions = [];




    var action = {
                 account: config_contract,
                 name: 'demolish',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "user": global_account,
                       "assetid": globalselection['assetid'],
                       "direction": direction,
                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // demolishobject()




function repeataction()
{

if (last_action == "attackobject")
   {
   attackobject( last_attack_direction, last_attack_tank_assetid, last_attack_target );
   }

if (last_action == "moveobject")
   {
   moveobject( last_attack_direction );
   }

} // repeataction


var last_action 			 = 0;
var last_attack_direction    = 0;
var last_attack_tank_assetid = 0;
var last_attack_target       = 0;

function attackobject( direction, tank_assetid, target )
{
last_action				 = "attackobject";
last_attack_direction    = direction;
last_attack_tank_assetid = tank_assetid;
last_attack_target       = target;


//  attackobject( "", tank_assetid, globalselection['assetid'] )

var theactions = [];

var dir = "";

var memo = "";

if (tank_assetid != "")
{
//  memo = "attack;gametester22;2199023338154;s"
memo = "attack;"+global_account+";"+tank_assetid+";"+target;

} else
  {
  if (direction == 1) dir = "n";
  if (direction == 2) dir = "e";
  if (direction == 3) dir = "s";
  if (direction == 4) dir = "w";
  memo = "attack;"+global_account+";"+globalselection['assetid']+";"+dir;
  }


console.log("a_sov:" + globaldata['a_sov']);
var quantitysov = globaldata['a_sov'] / 10000;
quantitysov = Number(quantitysov).toFixed(4) + " SOV";


console.log("MEMO:");
console.log(memo);

console.log("quantitysov:");
console.log(quantitysov);

    var action = {
                 account: "sovmintofeos",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "quantity": quantitysov,
                       "memo": memo,


                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // attackobject()



function plantgarden()
{
var theactions = [];


var memo = "homeworld;"+global_account+";"+globalselection['x']+";"+globalselection['y']+"";





var quantitysvx = globaldata['svx_self'] / 10000;
quantitysvx = Number(quantitysvx).toFixed(4) + " SVX";




    var action = {
                 account: "svxmintofeos",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "quantity": quantitysvx,
                       "memo": memo,
                       }
                 };


theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // plantgarden


function toggletower()
{
var config = globalselection['config'];
var configarray = split(config,";");

var disabled = 0;




if ( configarray.length > 0)
{

for (var i=0; i< configarray.length; i+=2)
{

if (configarray[i] == 'disabled' &&
    configarray[i+1] != "" && configarray[i+1] != undefined
   )
   {
   disabled = 1;
   }


} // for

} // if

//alert("Toggle tower - disabled:" + disabled);

newvalue = "";
if (disabled == 1) newvalue = "";
if (disabled == 0) newvalue = "1";

var theactions = [];


    var action = {
                 account: config_contract,
                 name: 'setnftoption',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "assetid": globalselection['assetid'],
                       "user": global_account,
                       "type": "disabled",
                       "value": newvalue
                       }
                 };


theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }

} // toggletower

function firered()
{

memo = "detonate;"+global_account+";"+globalselection['assetid'];



var quantitysov = globaldata['a_sov'] / 10000;
quantitysov = Number(quantitysov).toFixed(4) + " SOV";



var theactions = [];


    var action = {
                 account: "sovmintofeos",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "quantity": quantitysov,
                       "memo": memo,


                       }
                 };



theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // firered

function repairobject( direction )
{



var theactions = [];

var dir = "";
if (direction == 1) dir = "n";
if (direction == 2) dir = "e";
if (direction == 3) dir = "s";
if (direction == 4) dir = "w";



memo = "repair;"+global_account+";"+globalselection['assetid']+";"+dir;

// OLD
var quantitysov = (globaldata['a_sov']*3) / 10000;
quantitysov = Number(quantitysov).toFixed(4) + " SOV";


// NEW -----
   /*
   globalselection['x']
   thex = mappingarray[theid][0]  ;
they = mappingarray[theid][1] ;

   */
x = globalselection['x'];
y = globalselection['y'];
//alert("xy: " + thex + " " + they + " " );


if (direction == 1)  {   they--;    }
if (direction == 2)  {   thex++;    }
if (direction == 3)  {   they++;    }
if (direction == 4)  {   thex--;    }

target_asset_id         =  tilearray[thex][they]['asset_id'];
target_race             =  tilearray[thex][they]['race'];
target_atype            =  tilearray[thex][they]['atype'];


marketid = 1;
       //
       size2 = pricedata.length;
       for (var i2=1; i2<=size2; i2++)
           {
           if (pricedata[i2]['race'] !== undefined)
              {
              if ( pricedata[i2]['race'] == target_race && pricedata[i2]['atype'] == target_atype)
                 {
                 marketid = i2;
                 i2 = size2;
                 } // if ...
              } // != undefined
           } // for...


       var sov2 =  marketdata[marketid] * 0.50;
      // var sov2 =  marketdata_plus[marketid] * 0.50;



//alert("xy(2): " + thex + " " + they + " sov2_c:"+sov2+ " marketid:" +marketid);

/*
console.log("tilearray ---: " );
console.log(tilearray[thex][they]);
*/
// marketdata[the_id*1]

/// ---

/*

var size = mappingarray.length;

for (var i=0; i<size; i++)
    {
    var thetile = "tile" + i;

    x = mappingarray[i][0];
    y = mappingarray[i][1];




    tile         =  tilearray[x][y]['tile'];
    asset_id         =  tilearray[x][y]['asset_id'];  //
    tileid       =  tilearray[x][y]['tileid'];
    atype        =  tilearray[x][y]['atype'];
    race         =  tilearray[x][y]['race'];


lastsvgid                  = theid;
coordinatei                = tilearray[thex][they].tileid;
owner                      = tilearray[thex][they].owner;
thename                    = tilearray[thex][they].name;
nickname                   = tilearray[thex][they].nick;
globalselection['assetid'] = tilearray[thex][they].asset_id;
globalselection['atype']   = tilearray[thex][they].atype;
globalselection['ori']     = tilearray[thex][they].ori;
globalselection['ts']      = tilearray[thex][they].ts;
globalselection['race']    = tilearray[thex][they].race;
globalselection['shield']  = tilearray[thex][they].shield;
globalselection['attack']  = tilearray[thex][they].attack;
globalselection['config']  = tilearray[thex][they].config;

*/


/*
marketid = 1;
       //
       size2 = pricedata.length;
       for (var i2=1; i2<=size2; i2++)
           {
           if (pricedata[i2]['race'] !== undefined)
              {
              if ( pricedata[i2]['race'] == race && pricedata[i2]['atype'] == atype)
                 {
                 marketid = i2;
                 i2 = size2;
                 } // if ...
              } // != undefined
           } // for...
        // pricedata[id]['race']

       var sov2 =  marketdata[marketid];
       //var sov2 =  marketdata_item[marketid];
       */




/*
    marketdata[the_id*1]      = currentprice2;
    marketdata_item[the_id*1] = currentprice2_sell;


var quantitysov = (globaldata['a_sov']*3) / 10000;
quantitysov = Number(quantitysov).toFixed(4) + " SOV";

*/
var quantitysov = sov2;
quantitysov = Number(quantitysov).toFixed(4) + " SOV";


// ---

    var action = {
                 account: "sovmintofeos",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "quantity": quantitysov,
                       "memo": memo,


                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // repairobject()



function infectobject( direction )
{



var theactions = [];

var dir = "";
if (direction == 1) dir = "n";
if (direction == 2) dir = "e";
if (direction == 3) dir = "s";
if (direction == 4) dir = "w";



memo = "infect;"+global_account+";"+globalselection['assetid']+";"+dir;

var quantitysov = globaldata['a_sov'] / 10000;
quantitysov = Number(quantitysov).toFixed(4) + " SOV";




    var action = {
                 account: "sovmintofeos",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "quantity": quantitysov,
                       "memo": memo,


                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }


} // infectobject()



 
function flattenobject( direction )
{
var theactions = [];

var dir = "";
if (direction == 1) dir = "n";
if (direction == 2) dir = "e";
if (direction == 3) dir = "s";
if (direction == 4) dir = "w";

 

svxprice = 0;

var configarray   = split(globaldata['config'],";");

if ( configarray.length > 0)
{

for (var i=0; i< (configarray.length); i=i+2)
{

if (configarray[i] == 'bullsvx' &&
    configarray[i+1] != "" && configarray[i+1] != undefined
   )
   {
   svxprice = configarray[i+1];
   }


} // for

} // if
 
//alert("svxprice: " + svxprice);



var theactions = [];


var memo = "bulldoze;"+global_account+";"+globalselection['assetid']+";"+dir+"";

// ame","quantity":"50.0000 SVX","memo":"bulldoze;sovtrader111;2199025451974;e"}' -p sovtrader111

 



var quantitysvx = svxprice / 10000;
quantitysvx = Number(quantitysvx).toFixed(4) + " SVX";




    var action = {
                 account: "svxmintofeos",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": config_contract,
                       "quantity": quantitysvx,
                       "memo": memo,
                       }
                 };


theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }



//   n = prompt("Enter numbers only:"); 
 /*
if (confirm(' this action costs about 404 bytes of ram unrefundable, confirm?')) 
{
  // Save it!
  
}  // confirm
else
 {
 return;
 }
 */
 
 /*
 globalselection['assetid']
 */

/*
initarea( 
        			 name 		user, 
                     uint64_t 	assetid, 
                     string   	direction // n,e,s,w  
                   ) 
*/


//console.log("global_account: "+ global_account);


 
 

} // flattenobject()




nav_mode = 1;

function nav_selection( mode )
{
nav_mode = mode;

if (mode == 1)
   {
   document.getElementById('navbutton_scroll').className = "navbutton_on";
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";
   document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
   document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
   document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
   document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";





   // buildings
   if (
      globalselection['atype'] == 1 || // lander
      globalselection['atype'] == 2 || // residence
      globalselection['atype'] == 3 || // agri
      globalselection['atype'] == 4 || // factory
      globalselection['atype'] == 7 || // wall
      globalselection['atype'] == 8 ||// collector
      globalselection['atype'] == 13 // wall ii
      )
      {
        document.getElementById('navbutton_garden').className = "navbutton_off_inactive";
        document.getElementById('navbutton_fire').className = "navbutton_off_inactive";
        document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";

      } 
      
      else
        {
        document.getElementById('navbutton_garden').className = "navbutton_off_inactive";
        document.getElementById('navbutton_fire').className = "navbutton_off_inactive";
        }

   document.getElementById('path924').style.visibility = "visible";
   document.getElementById('path929').style.visibility = "visible";
   document.getElementById('path931').style.visibility = "visible";
   document.getElementById('path933').style.visibility = "visible";

   document.getElementById('circ1').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ2').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ3').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ4').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ5').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ6').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ7').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ8').style.cssText = "visibility: visible; fill: #009900;";
  

   // movesteps_div
   /*
   document.getElementById('movesteps_div').   style.visibility = "hidden";
   document.getElementById('movesteps_div').   style.height = "0px";
   */
   }

if (mode == 2)
      
   {  
   if (( globalselection['owner'] != global_account && global_account != globalselection['auth'] ) 
      ||
      (globalselection['atype'] == "" || // non nft occupied tile
      globalselection['atype'] == 1 || // lander
      globalselection['atype'] == 2 || // residence
      globalselection['atype'] == 3 || // agri
      globalselection['atype'] == 4 || // factory
      globalselection['atype'] == 7 || // wall
      globalselection['atype'] == 8 || // collector
      globalselection['atype'] == 9 || //tower
      globalselection['atype'] == 13 || // wall ii
      globalselection['atype'] == 14 // R.E.D
      )) {
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";
   document.getElementById('navbutton_scroll').className = "navbutton_off";
   document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
   document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
   document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
   document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";

   document.getElementById('circ1').style.cssText = "visibility: hidden;";
   document.getElementById('circ2').style.cssText = "visibility: hidden;";
   document.getElementById('circ3').style.cssText = "visibility: hidden;";
   document.getElementById('circ4').style.cssText = "visibility: hidden;";
   document.getElementById('circ5').style.cssText = "visibility: hidden;";
   document.getElementById('circ6').style.cssText = "visibility: hidden;";
   document.getElementById('circ7').style.cssText = "visibility: hidden;";
   document.getElementById('circ8').style.cssText = "visibility: hidden;";
   document.getElementById('path924').style.visibility = "hidden";
   document.getElementById('path929').style.visibility = "hidden";
   document.getElementById('path931').style.visibility = "hidden";
   document.getElementById('path933').style.visibility = "hidden";


      } else {
         document.getElementById('navbutton_move').className = "navbutton_on";
         document.getElementById('navbutton_scroll').className = "navbutton_off";
         document.getElementById('circ2').style.cssText = "visibility: visible; fill: #009900;";
         document.getElementById('circ4').style.cssText = "visibility: visible; fill: #009900;";
         document.getElementById('circ6').style.cssText = "visibility: visible; fill: #009900;";
         document.getElementById('circ8').style.cssText = "visibility: visible; fill: #009900;";
         document.getElementById('circ1').style.visibility = "hidden";
         document.getElementById('circ3').style.visibility = "hidden";
         document.getElementById('circ5').style.visibility = "hidden";
         document.getElementById('circ7').style.visibility = "hidden";
         document.getElementById('path931').style.visibility = "visible";
         document.getElementById('path933').style.visibility = "visible";
         document.getElementById('path924').style.visibility = "hidden";
         document.getElementById('path929').style.visibility = "hidden";
         }

   document.getElementById('navbutton_repeat').className = "navbutton_off";
   
  /*
   document.getElementById('navbutton_attack').className = "navbutton_off";
   document.getElementById('navbutton_demolish').className = "navbutton_off";
   document.getElementById('navbutton_repair').className = "navbutton_off";
//   document.getElementById('navbutton_infect').className = "navbutton_off";
   document.getElementById('navbutton_repeat').className = "navbutton_off";
   document.getElementById('navbutton_garden').className = "navbutton_off";
   document.getElementById('navbutton_disable').className = "navbutton_off";
   document.getElementById('navbutton_fire').className = "navbutton_off";
   */


// navbutton_repeat navbutton_garden navbutton_disable navbutton_fire





   // movesteps_div
   /*
   document.getElementById('movesteps_div').   style.visibility = "visible";
   document.getElementById('movesteps_div').   style.height = "";
   */

   }

if (mode == 3)
   { if (( globalselection['owner'] == global_account || global_account == globalselection['auth'] )
   && (globalselection['atype'] == 5 // Bulldozer
   || globalselection['atype'] == 11 // tank
   ))
{
   document.getElementById('navbutton_scroll').className = "navbutton_off";
   document.getElementById('navbutton_attack').className = "navbutton_on";
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";
   document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
   document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
   document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";
//   document.getElementById('navbutton_infect').className = "navbutton_off";


   document.getElementById('path924').style.visibility = "hidden";
   document.getElementById('path929').style.visibility = "hidden";
   document.getElementById('path931').style.visibility = "visible";
   document.getElementById('path933').style.visibility = "visible";

         document.getElementById('circ1').style.visibility = "hidden";
         document.getElementById('circ3').style.visibility = "hidden";
         document.getElementById('circ5').style.visibility = "hidden";
         document.getElementById('circ7').style.visibility = "hidden";

         document.getElementById('circ2').style.cssText = "visibility: visible; fill: #ff0000;";
         document.getElementById('circ4').style.cssText = "visibility: visible; fill: #ff0000;";
         document.getElementById('circ6').style.cssText = "visibility: visible; fill: #ff0000;";
         document.getElementById('circ8').style.cssText = "visibility: visible; fill: #ff0000;";
         } else {
         
         document.getElementById('navbutton_scroll').className = "navbutton_off";
         document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
         document.getElementById('navbutton_move').className = "navbutton_off_inactive";
         document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
         document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
         document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";
         
         document.getElementById('circ1').style.cssText = "visibility: hidden;";
         document.getElementById('circ2').style.cssText = "visibility: hidden;";
         document.getElementById('circ3').style.cssText = "visibility: hidden;";
         document.getElementById('circ4').style.cssText = "visibility: hidden;";
         document.getElementById('circ5').style.cssText = "visibility: hidden;";
         document.getElementById('circ6').style.cssText = "visibility: hidden;";
         document.getElementById('circ7').style.cssText = "visibility: hidden;";
         document.getElementById('circ8').style.cssText = "visibility: hidden;";

         document.getElementById('path924').style.visibility = "hidden";
         document.getElementById('path929').style.visibility = "hidden";
         document.getElementById('path931').style.visibility = "hidden";
         document.getElementById('path933').style.visibility = "hidden";

         }
   // movesteps_div
   /*
   document.getElementById('movesteps_div').   style.visibility = "hidden";
   document.getElementById('movesteps_div').   style.height = "0px";
   */



   if (globalselection['atype'] == 11 &&  ( globalselection['owner'] == global_account || global_account == globalselection['auth'] ))
      {
         document.getElementById('navbutton_scroll').className = "navbutton_off";
         document.getElementById('navbutton_attack').className = "navbutton_on";
         document.getElementById('navbutton_move').className = "navbutton_off_inactive";
         document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
         document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
         document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";

         document.getElementById('circ1').style.cssText = "visibility: hidden;";
         document.getElementById('circ2').style.cssText = "visibility: hidden;";
         document.getElementById('circ3').style.cssText = "visibility: hidden;";
         document.getElementById('circ4').style.cssText = "visibility: hidden;";
         document.getElementById('circ5').style.cssText = "visibility: hidden;";
         document.getElementById('circ6').style.cssText = "visibility: hidden;";
         document.getElementById('circ7').style.cssText = "visibility: hidden;";
         document.getElementById('circ8').style.cssText = "visibility: hidden;";

         document.getElementById('path924').style.visibility = "hidden";
         document.getElementById('path929').style.visibility = "hidden";
         document.getElementById('path931').style.visibility = "hidden";
         document.getElementById('path933').style.visibility = "hidden";
      settanktarget();
      } // if atype == 1


   }


if (mode == 4)
   {
   if ((globalselection['owner'] == global_account || global_account == globalselection['auth'])
   && (
      globalselection['atype'] == 1 || // lander
      globalselection['atype'] == 2 || // residence
      globalselection['atype'] == 3 || // agri
      globalselection['atype'] == 4 || // factory
      globalselection['atype'] == 7 || // wall
      globalselection['atype'] == 8 || // collector
      globalselection['atype'] == 9 || //tower
      globalselection['atype'] == 13 || // wall ii
      globalselection['atype'] == 14  // RED
      ))
   {
   document.getElementById('navbutton_scroll').className = "navbutton_off";
   document.getElementById('navbutton_demolish').className = "navbutton_on";
   document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";
   document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
   document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";
//   document.getElementById('navbutton_infect').className = "navbutton_off";

   document.getElementById('path924').style.visibility = "hidden";
   document.getElementById('path929').style.visibility = "hidden";
   document.getElementById('path931').style.visibility = "visible";
   document.getElementById('path933').style.visibility = "visible";

   document.getElementById('circ1').style.visibility = "hidden";
   document.getElementById('circ3').style.visibility = "hidden";
   document.getElementById('circ5').style.visibility = "hidden";
   document.getElementById('circ7').style.visibility = "hidden";
   document.getElementById('circ2').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ4').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ6').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ8').style.cssText = "visibility: visible; fill: #009900;";

   } else {

         document.getElementById('navbutton_scroll').className = "navbutton_off";
         document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
         document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
         document.getElementById('navbutton_move').className = "navbutton_off_inactive";
         document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
         document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";

         document.getElementById('path924').style.visibility = "hidden";
         document.getElementById('path929').style.visibility = "hidden";
         document.getElementById('path931').style.visibility = "hidden";
         document.getElementById('path933').style.visibility = "hidden";

         document.getElementById('circ1').style.cssText = "visibility: hidden;";
         document.getElementById('circ2').style.cssText = "visibility: hidden;";
         document.getElementById('circ3').style.cssText = "visibility: hidden;";
         document.getElementById('circ4').style.cssText = "visibility: hidden;";
         document.getElementById('circ5').style.cssText = "visibility: hidden;";
         document.getElementById('circ6').style.cssText = "visibility: hidden;";
         document.getElementById('circ7').style.cssText = "visibility: hidden;";
         document.getElementById('circ8').style.cssText = "visibility: hidden;";

      }

   // movesteps_div
   /*
   document.getElementById('movesteps_div').   style.visibility = "hidden";
   document.getElementById('movesteps_div').   style.height = "0px";
   */

   }


if (mode == 5)
   {
   if (( globalselection['owner'] == global_account || global_account == globalselection['auth'])
   && (globalselection['atype'] == 4 || globalselection['atype'] == 10 ))
   {
   document.getElementById('navbutton_scroll').className = "navbutton_off";
   document.getElementById('navbutton_repair').className = "navbutton_on";
   document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
   document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";
   document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";
//   document.getElementById('navbutton_infect').className = "navbutton_off";

   document.getElementById('path924').style.visibility = "hidden";
   document.getElementById('path929').style.visibility = "hidden";
   document.getElementById('path931').style.visibility = "visible";
   document.getElementById('path933').style.visibility = "visible";

   document.getElementById('circ1').style.visibility = "hidden";
   document.getElementById('circ3').style.visibility = "hidden";
   document.getElementById('circ5').style.visibility = "hidden";
   document.getElementById('circ7').style.visibility = "hidden";
   document.getElementById('circ2').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ4').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ6').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ8').style.cssText = "visibility: visible; fill: #009900;";
   } else {

   document.getElementById('navbutton_scroll').className = "navbutton_off";
   document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
   document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
   document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";
   document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";

   document.getElementById('circ1').style.cssText = "visibility: hidden;";
   document.getElementById('circ2').style.cssText = "visibility: hidden;";
   document.getElementById('circ3').style.cssText = "visibility: hidden;";
   document.getElementById('circ4').style.cssText = "visibility: hidden;";
   document.getElementById('circ5').style.cssText = "visibility: hidden;";
   document.getElementById('circ6').style.cssText = "visibility: hidden;";
   document.getElementById('circ7').style.cssText = "visibility: hidden;";
   document.getElementById('circ8').style.cssText = "visibility: hidden;";

   document.getElementById('path924').style.visibility = "hidden";
   document.getElementById('path929').style.visibility = "hidden";
   document.getElementById('path931').style.visibility = "hidden";
   document.getElementById('path933').style.visibility = "hidden";

   }
   // movesteps_div
   /*
   document.getElementById('movesteps_div').   style.visibility = "hidden";
   document.getElementById('movesteps_div').   style.height = "0px";
   */

   }


if (mode == 6)
   {if 
      ( globalselection['atype'] == 5 && (globalselection['owner'] == global_account || global_account == globalselection['auth']))
{
   document.getElementById('navbutton_scroll').className = "navbutton_off";
   document.getElementById('navbutton_flatten').className = "navbutton_on";
   document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
   document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
   document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";
//   document.getElementById('navbutton_infect').className = "navbutton_on";

   document.getElementById('path924').style.visibility = "hidden";
   document.getElementById('path929').style.visibility = "hidden";
   document.getElementById('path931').style.visibility = "visible";
   document.getElementById('path933').style.visibility = "visible";

   document.getElementById('circ1').style.visibility = "hidden";
   document.getElementById('circ3').style.visibility = "hidden";
   document.getElementById('circ5').style.visibility = "hidden";
   document.getElementById('circ7').style.visibility = "hidden";
   document.getElementById('circ2').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ4').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ6').style.cssText = "visibility: visible; fill: #009900;";
   document.getElementById('circ8').style.cssText = "visibility: visible; fill: #009900;";
} else {

   document.getElementById('navbutton_scroll').className = "navbutton_off";
   document.getElementById('navbutton_flatten').className = "navbutton_off_inactive";
   document.getElementById('navbutton_repair').className = "navbutton_off_inactive";
   document.getElementById('navbutton_demolish').className = "navbutton_off_inactive";
   document.getElementById('navbutton_attack').className = "navbutton_off_inactive";
   document.getElementById('navbutton_move').className = "navbutton_off_inactive";

document.getElementById('circ1').style.cssText = "visibility: hidden;";
document.getElementById('circ2').style.cssText = "visibility: hidden;";
document.getElementById('circ3').style.cssText = "visibility: hidden;";
document.getElementById('circ4').style.cssText = "visibility: hidden;";
document.getElementById('circ5').style.cssText = "visibility: hidden;";
document.getElementById('circ6').style.cssText = "visibility: hidden;";
document.getElementById('circ7').style.cssText = "visibility: hidden;";
document.getElementById('circ8').style.cssText = "visibility: hidden;";

document.getElementById('path924').style.visibility = "hidden";
document.getElementById('path929').style.visibility = "hidden";
document.getElementById('path931').style.visibility = "hidden";
document.getElementById('path933').style.visibility = "hidden";
}
   // movesteps_div
   /*
   document.getElementById('movesteps_div').   style.visibility = "hidden";
   document.getElementById('movesteps_div').   style.height = "0px";
   */

   }


} // nav_selection



function toggle_info()
{
checkbox_shield = document.getElementById('checkbox_shield').checked;
checkbox_owner  = document.getElementById('checkbox_owner').checked;

var size = mappingarray.length;



value_shield = 'hidden';
if (checkbox_shield) value_shield = 'visible';

value_owner = 'hidden';
if (checkbox_owner) value_owner = 'visible';

for (var i=0; i<size; i++)
    {
    var divid_shieldinfo = "shieldinfo_" + i;
    if ( document.getElementById(divid_shieldinfo) != undefined )
       {
       document.getElementById(divid_shieldinfo).style.visibility = value_shield;
       }

    var divid_shieldinfobar = "shieldbar_" + i;
    if ( document.getElementById(divid_shieldinfobar) != undefined )
       {
       document.getElementById(divid_shieldinfobar).style.visibility = value_shield;
       }

    var divid_ownderinfo = "ownerinfo_" + i;
    if ( document.getElementById(divid_ownderinfo) != undefined )
       {
       document.getElementById(divid_ownderinfo).style.visibility = value_owner;
       }

    } // for i...


} // toggle_info


function history_callback( value )
{
console.log("HIST:");
//console.log(value);

var buffer = "";

size = value.actions.length;

for (var i=0; i<size; i++)
    {
    action = value.actions[i].act.name;
    console.log("A: "+action);
    
    if (action == "logmsg")
       {
       message = value.actions[i].act.data.message;
       
       parsearray = message.split(" ");
       
       
       if ( parsearray[0] == "destroyed" )
          {
          attacker = parsearray[2].split(":")[1];
          nft      = parsearray[4].split(":")[1];
          coor     = parsearray[5].split(":")[1];
  
  
          if (attacker != undefined)
             { 
             link = "https://eos.atomichub.io/explorer/asset/"+nft;
          
             width = 1000000;
             they2 = parseInt ( coor / width );
             thex2 = coor - (they2*width);
             
             
             if ( !isNaN(they2) && !isNaN(thex2) )
             {
               link2 = "<span onclick='setcenter2(" +thex2+ "," +they2+ ")' style='cursor:pointer;color:#ffb800;'>[center]</span>";

             buffer +=  "Destroyed: by "+attacker+" NFT: <a href='"+link+"' target='_blank' style='color:9999ff'>"+nft+"</a>  x:"+thex2+" y:"+they2+" "+link2+" <br>";


             } else
               {
                 link2 = "<span   style='cursor:pointer;color:#ffb800;'></span>";

             buffer +=  "Destroyed: by "+attacker+" NFT: <a href='"+link+"' target='_blank' style='color:9999ff'>"+nft+"</a>  <br>";

               }
             
           
  
           
             } // if (attacker != undefined)

          }
       } // if
       
    } // for i..

document.getElementById("historyinfo").innerHTML = buffer;

} // history_callback




var history_info_cnt = 0;

async  function history_info( mode )
{

if (mode == 0)
   {
   document.getElementById("historyinfo").innerHTML = "";
     document.getElementById("historyinfo").style.height = "20px";
   } else
     {
     document.getElementById("historyinfo").style.height = "";
     }

history_info_cnt++;
console.log("H: " + history_info_cnt);
 
limit = 1000;

start = "2023-03-16T03:00Z";
start = "2023-03-13T03:00Z";

var now = new Date().getTime() / 1000;
now -= 60*60*24 * 1.5;

  var a = new Date(now * 1000);
                       
 var year = a.getFullYear();
  var month = a.getMonth()+1;
  if (month < 10) month = "0" + month;
  var day = a.getDate();
  if (day < 10) day = "0" + day;  
  
start = year+ "-" +month+ "-" +day+ "T00:00Z";  

 

var url = "https://eos.hyperion.eosrio.io/v2/history/get_actions?account="+config_contract+"&sort=asc&limit="+limit+"&after="+start+"";

console.log("URL: " + url);
 
var jsonparam = JSON.stringify( {} );
 

const options = {
  headers: {
     
  }
};

fetch(url, options)
  .then( res => res.json() )
  .then( data =>   history_callback(data) );


} // history_info



function callback_loadnftinfos( value )
{

console.log("NFT-INFOS");
//console.log( value.rows );


if (value.rows.length == 0) return;

var size = value.rows.length;

var buffer_humans   = "";
var buffer_greys    = "";
var buffer_sirians  = "";
var buffer_reptos   = "";

for (var i=0; i<size; i++)
    {
    the_id     = value.rows[i].id;
    the_name   = value.rows[i].name;
    the_race   =  value.rows[i].race;
    the_sov    =  value.rows[i].psov;
    the_ipfs   = value.rows[i].ipfs;
    the_atype  =  value.rows[i].atype;
    //the_sov    = the_sov / 10000;

    pricespan  = "pricespan_"+the_id;

    var imgbuffer = "<img src='img/nft_"+the_race+"_"+the_atype+".png' style='width:100px;margin-top:10px;'>";

    var blockedview = 0;

  //  if (the_atype == 11 ) blockedview = 1;
  //  if (the_atype == 12 ) blockedview = 1;



    if (blockedview == 0)
    {
    if (the_race == 1)
       {
       mintlink = "mintasset("+the_id+")";

       buffer_humans += "<div class='nft_cell' style='height:260px;'>";
       buffer_humans += "<div style='height:60px'>"+the_name + "</div>";
       buffer_humans += imgbuffer + "<br>";
       buffer_humans += "<span id='"+pricespan+"'>..." + "</span> SOV<br>";
       buffer_humans += "<span class='mintbutton' onclick='"+mintlink+"'>Mint NFT</span>";

       buffer_humans += "</div>";

       }

    if (the_race == 2)
       {
       mintlink = "mintasset("+the_id+")";

       buffer_greys += "<div class='nft_cell' style='height:260px;'>";
       buffer_greys += "<div style='height:60px'>"+the_name + "</div>";
       buffer_greys += imgbuffer + "<br>";
       buffer_greys += "<span id='"+pricespan+"'>..." + "</span> SOV<br>";

       buffer_greys += "<span class='mintbutton' onclick='"+mintlink+"'>Mint NFT</span>";

       buffer_greys += "</div>";
       }

    if (the_race == 4)
       {
       mintlink = "mintasset("+the_id+")";

       buffer_sirians += "<div class='nft_cell' style='height:260px;'>";
       buffer_sirians += "<div style='height:60px'>"+the_name + "</div>";
       buffer_sirians += imgbuffer + "<br>";
       buffer_sirians += "<span id='"+pricespan+"'>..." + "</span> SOV<br>";

       buffer_sirians += "<span class='mintbutton' onclick='"+mintlink+"'>Mint NFT</span>";

       buffer_sirians += "</div>";
       }

    if (the_race == 5)
       {
       mintlink = "mintasset("+the_id+")";

       buffer_reptos += "<div class='nft_cell' style='height:260px;'>";
       buffer_reptos += "<div style='height:60px'>"+the_name + "</div>";
       buffer_reptos += imgbuffer + "<br>";
       buffer_reptos += "<span id='"+pricespan+"'>..." + "</span> SOV<br>";

       buffer_reptos += "<span class='mintbutton' onclick='"+mintlink+"'>Mint NFT</span>";

       buffer_reptos += "</div>";
       }


    } // if (the_atype != 8)

    } // for i...


buffer_humans += "<div style='clear:both'></div><small>(Please wait a few seconds after a mint for price update!)</small>";
buffer_humans += "<br><div onclick='callback_loadmarkets()' class='refreshboard' style='margin-left:auto;margin-right:auto;width:250px;margin-top:20px;margin-bottom:2px;cursor:pointer;'>Update Prices &#8634;</div>";

buffer_greys += "<div style='clear:both'></div><small>(Please wait a few seconds after a mint for price update!)</small>";
buffer_greys += "<br><div onclick='callback_loadmarkets()' class='refreshboard' style='margin-left:auto;margin-right:auto;width:250px;margin-top:20px;margin-bottom:2px;cursor:pointer;'>Update Prices &#8634;</div>";

buffer_sirians += "<div style='clear:both'></div><small>(Please wait a few seconds after a mint for price update!)</small>";
buffer_sirians += "<br><div onclick='callback_loadmarkets()' class='refreshboard' style='margin-left:auto;margin-right:auto;width:250px;margin-top:20px;margin-bottom:2px;cursor:pointer;'>Update Prices &#8634;</div>";

buffer_reptos += "<div style='clear:both'></div><small>(Please wait a few seconds after a mint for price update!)</small>";
buffer_reptos += "<br><div onclick='callback_loadmarkets()' class='refreshboard' style='margin-left:auto;margin-right:auto;width:250px;margin-top:20px;margin-bottom:2px;cursor:pointer;'>Update Prices &#8634;</div>";

document.getElementById("mintarea").innerHTML = "<br><h2>Human-NFT's</h2>" + buffer_humans + "<br><div style='clear:both'></div><br><h2>Grey-NFT's</h2>" + buffer_greys + ""  + "<div style='clear:both'></div><br><h2>Sirian-NFT's</h2>" + buffer_sirians + ""     + "<div style='clear:both'></div><br><h2>Repto-NFT's</h2>" + buffer_reptos + "";

} // callback_render_balance1




function loadnftinfos()
{

getdata(callback_loadnftinfos, config_contract, config_contract, "atemplate", "", "", "", 212 );

} // loadnftinfos




var marketdata           = new Array();
var marketdata_item      = new Array();
var marketdata_plus      = new Array();

async function callback_loadmarkets( value )
{

console.log("MARKET-INFOS");
console.log( value );

if (value == undefined) return;
if (value.rows.length == 0) return;

var size = value.rows.length;

for (var i=0; i<size; i++)
    {
   // console.log("i: " + i+  " " + value.rows[i].id + " sp:"  + value.rows[i].startprice );

    the_id             = value.rows[i].id;
    the_circulation    = value.rows[i].circulation;
    the_startprice     = value.rows[i].startprice;
    the_epsilon        = value.rows[i].epsilon;


    currentprice2 = 0;
    currentprice2_sell = 0;
    currentprice2_plus = 0;

    if (the_epsilon > 0)
    {
    // OLD
    /*
    powresult = Math.pow( 2, (the_circulation / the_epsilon ) );
    var currentprice_f = the_startprice * powresult;
    console.log("powresult: " + powresult + "  currentprice_f:"+currentprice_f  );
      */

    // NEW
    // currentprice_f = (float)iterator_markets->startprice + (float)iterator_markets->startprice * (  (float)( (circulation) / (float)epsilon )    );
    var currentprice_f = the_startprice + ( the_startprice *  (the_circulation / the_epsilon ) );
    currentprice2 = toFixed2(currentprice_f, 4);

    currentprice_f = the_startprice + ( the_startprice *  ( (the_circulation-1) / the_epsilon ) );
    currentprice2_sell = toFixed2(currentprice_f, 4);

    currentprice_fb = the_startprice + ( the_startprice *  ( (the_circulation+2) / the_epsilon ) );
    currentprice2_plus = toFixed2(currentprice_fb, 4);

    } else
      {
      var currentprice_f = the_startprice * 1;
      //console.log("powresult: " + powresult + "  currentprice_f:"+currentprice_f  );

      currentprice2 = toFixed2(currentprice_f, 4);

      currentprice2_sell = 0; // should never displayed
      currentprice2_plus = 0; // should never displayed
      }



    /*
       float powresult = pow( 2,  (float)( (circulation) / (float)epsilon )  )  ;
         //print(" powresult: ", powresult ," " );

         float currentprice_f = (float)iterator_markets->startprice * (  powresult    );

         uint64_t   currentprice  = currentprice_f * 10000;
    */




    marketdata     [the_id*1] = currentprice2;
    marketdata_item[the_id*1] = currentprice2_sell;
    marketdata_plus[the_id*1] = currentprice2_plus;




    pricespan  = "pricespan_"+the_id;

    if ( document.getElementById(pricespan) )
       {
       document.getElementById(pricespan).innerHTML =  currentprice2 ;


       }
    } // for i...

} // callback_loadmarkets

function callback_markets(value) {
    if (value == undefined) return;
    if (value.rows.length == 0) return;
    markets = value;
} // callback_markets

function marketStuffs() {
    getdata(callback_markets, "sovspacegame", "sovspacegame", "markets", "", "", "", 100);
} // marketStuffs


function toFixed2(num, fixed) {
    var re = new RegExp('^-?\\d+(?:\.\\d{0,' + (fixed || -1) + '})?');
    return num.toString().match(re)[0];
}



function loadmarkets()
{
marketdata      = new Array();
marketdata_item = new Array();



getdata(callback_loadmarkets, "sovspacegame", "sovspacegame", "markets", "", "", "", 212 );


} // loadmarkets


function updatemoveattackprices()
{


var new_moveprice   = document.getElementById("new_moveprice").value*1;
var new_attackprice = document.getElementById("new_attackprice").value*1;




var theactions = [];

param = "editprices;"+new_moveprice+";0;"+new_attackprice+";0";



    var action = {
                 account: "sovspacegame",
                 name: 'admin',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "param": param
                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // updatemoveattackprices


function callback_loadadminnftinfos( value )
{

console.log("NFT-INFOS");
console.log( value.rows );


var buffer = "";

buffer += "<br>";
buffer += "edit price:<br>";
buffer += "<br>";
buffer += "Move Price (msov) <input type='text' id='new_moveprice' value='"+globaldata['m_sov']+"'><br>";
buffer += "Attack Price (msov) <input type='text' id='new_attackprice' value='"+globaldata['a_sov']+"'><br>";
buffer += "<div onclick='updatemoveattackprices();'>[update move/attack-prices]</div>";


document.getElementById("admin_edit_move_attac_prices").innerHTML = buffer;




if (value.rows.length == 0) return;

var size = value.rows.length;

var buffer_humans  = "";
var buffer_greys   = "";
var buffer_sirians = "";
var buffer_reptos  = "";

for (var i=0; i<size; i++)
    {
    the_id     = value.rows[i].id;
    the_name   = value.rows[i].name;
    the_race   =  value.rows[i].race;
    the_sov    =  value.rows[i].psov;
    the_ipfs   = value.rows[i].ipfs;
    the_atype  =  value.rows[i].atype;
    the_sov_raw = the_sov ;
    the_sov    = the_sov / 10000;


    var imgbuffer = "<img src='img/nft_"+the_race+"_"+the_atype+".png' style='width:100px;margin-top:10px;'>";


    if (the_race == 1)
       {
       setpricelink = "setassetprice("+the_id+")";

       buffer_humans += "<div class='nft_cell' style='height:270px;'>";
       buffer_humans += "<div style='height:40px'>"+the_name + "</div>";
       buffer_humans += imgbuffer + "<br>";
       buffer_humans += the_sov_raw+ " SOV<br>";
       buffer_humans += "("+the_sov+ " SOV)<br>";

       elm = "admin_setsov_" + the_id;
       buffer_humans += "<input id='"+elm+"' type='text' > <br>";
       buffer_humans += "<span class='mintbutton' onclick='"+setpricelink+"'>Set Price</span>";

       buffer_humans += "</div>";

       }

    if (the_race == 2)
       {

       setpricelink = "setassetprice("+the_id+")";

       buffer_greys += "<div class='nft_cell' style='height:270px;'>";
       buffer_greys += "<div style='height:40px'>"+the_name + "</div>";
       buffer_greys += imgbuffer + "<br>";
       buffer_greys += the_sov_raw+ " SOV<br>";
       buffer_greys += "("+the_sov+ " SOV)<br>";

       elm = "admin_setsov_" + the_id;
       buffer_greys += "<input id='"+elm+"' type='text' > <br>";
       buffer_greys += "<span class='mintbutton' onclick='"+setpricelink+"'>Set Price</span>";

       buffer_greys += "</div>";
       }


    if (the_race == 4)
       {

       setpricelink = "setassetprice("+the_id+")";

       buffer_sirians += "<div class='nft_cell' style='height:270px;'>";
       buffer_sirians += "<div style='height:40px'>"+the_name + "</div>";
       buffer_sirians += imgbuffer + "<br>";
       buffer_sirians += the_sov_raw+ " SOV<br>";
       buffer_sirians += "("+the_sov+ " SOV)<br>";

       elm = "admin_setsov_" + the_id;
       buffer_sirians += "<input id='"+elm+"' type='text' > <br>";
       buffer_sirians += "<span class='mintbutton' onclick='"+setpricelink+"'>Set Price</span>";

       buffer_sirians += "</div>";
       }


    if (the_race == 5)
       {

       setpricelink = "setassetprice("+the_id+")";

       buffer_reptos += "<div class='nft_cell' style='height:270px;'>";
       buffer_reptos += "<div style='height:40px'>"+the_name + "</div>";
       buffer_reptos += imgbuffer + "<br>";
       buffer_reptos += the_sov_raw+ " SOV<br>";
       buffer_reptos += "("+the_sov+ " SOV)<br>";

       elm = "admin_setsov_" + the_id;
       buffer_reptos += "<input id='"+elm+"' type='text' > <br>";
       buffer_reptos += "<span class='mintbutton' onclick='"+setpricelink+"'>Set Price</span>";

       buffer_reptos += "</div>";
       }


    } // for i...

document.getElementById("admin_mintarea").innerHTML = "<br><h2>Human-NFT's</h2>" + buffer_humans + "<br><div style='clear:both'></div><br><h2>Grey-NFT's</h2>" + buffer_greys + ""  +   "<br><div style='clear:both'></div><br><h2>Sirian-NFT's</h2>" + buffer_sirians + ""       +   "<br><div style='clear:both'></div><br><h2>Repto-NFT's</h2>" + buffer_reptos + "";

} // callback_render_balance1




function loadadminnftinfos()
{

getdata(callback_loadadminnftinfos, "sovspacegame", "sovspacegame", "atemplate", "", "", "", 112 );

} // loadnftinfos





// --
// Admin
//
function initarea()
{

tile = document.getElementById('areatile').value;



width = 1000000;
they = parseInt ( globalselection['coordinate'] / width );

thex = globalselection['coordinate'] - (they*width);





var theactions = [];

param = "initarea;"+thex+";"+they+";"+tile;



    var action = {
                 account: config_contract,
                 name: 'admin',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "param": param

                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // initarea
// end - admin


function delarea()
{

tile = document.getElementById('areatile').value;



width = 1000000;
they = parseInt ( globalselection['coordinate'] / width );

thex = globalselection['coordinate'] - (they*width);





var theactions = [];

param = "delarea;"+thex+";"+they;



    var action = {
                 account: config_contract,
                 name: 'admin',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "param": param

                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // delarea
// end - admin

function selfdestruct()
{
console.log("SELFDESTRUCT");

console.log(global_account);
console.log(globalselection['owner'] );

if ( global_account != config_contract )
   {
   if ( globalselection['owner'] != global_account ) return;
   } // if



//tile = document.getElementById('areatile').value;


var theactions = [];




    var action = {
                 account: config_contract,
                 name: 'selfdestruct',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "assetid": globalselection['assetid'],
                       "user" : global_account

                       }
                 };


theactions.push(action);



if (1)
   {
   transact( func_success, func_error, theactions );
   }



//alert("");
} // selfdestruct()




function setassetprice( id )
{


elm = "admin_setsov_" + id;
var psov = document.getElementById(elm).value*1;




var theactions = [];

param = "editasset;"+id+";0;"+psov;



    var action = {
                 account: config_contract,
                 name: 'admin',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "param": param

                       }
                 };


    theactions.push(action);





if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // setassetprice


function callback_render_balance_eos( value )
{

if (value.rows.length == 0) return;
balance = value.rows[0].balance;

buffer = "" + balance;
last_balance1 = balance;
document.getElementById('balance_eos').innerHTML = buffer;

} // callback_render_balance1


function getbalance_eos()
{
//alert("test getdata");

getaccount(global_account).then(function(value) {
             
               var cpu_available = value.cpu_limit.available;

                                var cpu_max = value.cpu_limit.max;

                                var cpu_used = value.cpu_limit.used;

                                var net_max = value.net_limit.max;

                                var net_used = value.net_limit.used;

                                var balance = value.core_liquid_balance;
console.log("BBBB:" + balance);
                                var balance1 = value.core_liquid_balance;

                                var balance2 = value.core_liquid_balance;

                                var cpu_proz = (cpu_used / cpu_max) * 100;
                                cpu_proz = Number(cpu_proz).toFixed(1);

                                var net_proz = (net_used / net_max) * 100;
                                net_proz = Number(net_proz).toFixed(1);
                                
                             
                                document.getElementById('balance_eos').innerHTML = balance;


  if (document.getElementById('div_cpu')) {
                                    cpu_proz = Number(cpu_proz).toFixed(0) * 1;
                                    document.getElementById('div_cpu').innerHTML =  ""+ cpu_proz + "% CPU ⚡";
                                  //  set_circle_element("mycpu", cpu_proz);
                                }
                                
  if (document.getElementById('div_net')) {
                                    net_proz = Number(net_proz).toFixed(0) * 1;
                                    document.getElementById('div_net').innerHTML = ""+ net_proz + "% NET&nbsp;&nbsp;&nbsp;&nbsp;";
                                  //  set_circle_element("mycpu", cpu_proz);
                                }                                
/*
                                if (document.getElementById('balance')) {
                                    document.getElementById('balance').innerHTML = "" + balance;
                                }

                                if (document.getElementById('balance1')) {
                                    document.getElementById('balance1').innerHTML = "" + balance;
                                }

                                if (document.getElementById('balance2')) {
                                    document.getElementById('balance2').innerHTML = "" + balance;
                                }

                                if (document.getElementById('mycpu')) {
                                    cpu_proz = Number(cpu_proz).toFixed(0) * 1;
                                    document.getElementById('div_cpu').innerHTML =  cpu_proz + "%";
                                  //  set_circle_element("mycpu", cpu_proz);
                                }

                                if (document.getElementById('mynet')) {
                                    net_proz = Number(net_proz).toFixed(0) * 1;

                                    // document.getElementById('div_net').innerHTML =  net_proz + "%";
                                    set_circle_element("mynet", net_proz);
                                }
*/

             }  );


//getdata(callback_render_balance_eos, "eosio.token", global_account, "accounts", "", "", "", 1 );
} // getbalance_eos




function callback_render_balance_sov( value )
{

if (value.rows.length == 0) return;
balance = value.rows[0].balance;

buffer = "" + balance;
last_balance1 = balance;
document.getElementById('balance_sov').innerHTML = buffer;

} // callback_render_balance_sov




function getbalance_sov()
{
//alert("test getdata");
getdata(callback_render_balance_sov, "sovmintofeos", global_account, "accounts", "", "", "", 1 );
}





function callback_render_balance_svx( value )
{

if (value.rows.length == 0) return;
balance = value.rows[0].balance;

buffer = "" + balance;
last_balance1 = balance;
document.getElementById('balance_svx').innerHTML = buffer;

} // callback_render_balance_svx




function getbalance_svx()
{
getdata(callback_render_balance_svx, "svxmintofeos", global_account, "accounts", "", "", "", 1 );
}

function buysov_sovdex()
{
value = document.getElementById('eos_for_sov').value;


eostobuy = Number(value).toFixed(4) + " EOS";




var theactions = [];




    var action = {
                 account: "svxmintofeos",
                 name: 'open2',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "user": global_account
                       }
                 };


theactions.push(action);




memo = "SOV";

    var action = {
                 account: "eosio.token",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "to": "sovdexrelays",
                       "quantity": eostobuy,
                       "memo": memo
                       }
                 };


theactions.push(action);

if (1)
   {
   transact( func_success, func_error, theactions );
   }

} // buysov_sovdex




function buysov_newdex()
{
value = document.getElementById('eos_for_sov').value;



eostobuy = Number(value).toFixed(4) + " EOS";




var theactions = [];

var theaction =  {
              "type": "buy-market",
              "symbol":"sovmintofeos-sov-eos",
              "price":"0.000000",
              "channel":"web"
            };

var memo = JSON.stringify(theaction);


    var action = {
                 account: "eosio.token",
                 name: 'transfer',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                  "from": global_account,
                       "to": "newdexpublic",
                       "quantity": eostobuy,
                       "memo": memo
                       }
                 };


theactions.push(action);

if (1)
   {
   transact( func_success, func_error, theactions );
   }

} // buysov_newdex



function update_claimdata()
{

var now = new Date().getTime() / 1000;

var seconds = now - global_tslastclaim;
var interval = (24*60*60);


  var towait_sec = interval - seconds;

  // Find the distance between now and the count down date
    var hours = towait_sec / 3600;
    hours = Math.floor(hours);
    if (hours < 10) hours = "0" + hours;
     var minute =   (towait_sec % 3600) / 60;
    minute = Math.floor(minute);
    if (minute < 10) minute = "0" + minute;

      var second = towait_sec % 60;
    second = Math.floor(second);
    if (second < 10) second = "0" + second;

 if (towait_sec > 0)
    {
    document.getElementById("claim_svx").innerHTML =  ""+hours+ ":" + minute + ":" + second;
    document.getElementById("claim_svx").className =  "claim_off";
    } else
      {
      
      var lang = document.getElementById("language-selector").value;
      if (lang === "en") document.getElementById("claim_svx").innerHTML =  "Claim SVX";
      if (lang === "cn") document.getElementById("claim_svx").innerHTML =  "宣称";
      
//      document.getElementById("claim_svx").innerHTML =  "Claim";
      document.getElementById("claim_svx").className =  "claim";
      }
      
      
      
// --- Lastrepair for factory

var render_repaircountdown = "";
var now = new Date().getTime() / 1000;

 

 var now = new Date().getTime() / 1000;

 var seconds = now -  globalselection['lastrepair'];
 var interval = (24*60*60);

var towait_sec = interval - seconds;
 

// Find the distance between now and the count down date
      var hours = towait_sec / 3600;
    hours = Math.floor(hours);
    if (hours < 10) hours = "0" + hours;
     var minute =   (towait_sec % 3600) / 60;
    minute = Math.floor(minute);
    if (minute < 10) minute = "0" + minute;

      var second = towait_sec % 60;
    second = Math.floor(second);
    if (second < 10) second = "0" + second;

 if (towait_sec > 0)
    {
//    render_repaircountdown =  " ("+hours+ ":" + minute + ":" + second+")";
    render_repaircountdown = "<div style='margin-left:30%;'>(free repair: "+hours+ ":" + minute + ":" + second+")</div>";
    } else
      {
      //render_repaircountdown = "";
      if ( globalselection['atype'] ==  4) render_repaircountdown = "<div style='margin-left:30%;'>(free repair)</div>";
                       

      }

if (document.getElementById("factorylastclaim"))
   {
   document.getElementById("factorylastclaim").innerHTML = render_repaircountdown;
   }


// ---
      

} // update_claimdata


var updatecnt = -3;
function update_thread()
{
var time = setTimeout("update_thread()", 1000);

// roaming
if (autonode == 1)
   {   
   if ( (updatecnt % 10) == 0 )
      {
      changeautonode();
      }      
   }
if (document.getElementById('roamingnode'))
{
document.getElementById('roamingnode').innerHTML = thenode;
}   
   
   

if ( (updatecnt % 20) == 0 )
   {
   getbalance_eos();
   getbalance_sov();
   getbalance_svx();
   getuserinfo();
   }


if ( (updatecnt % 21) == 0 )
   {
   loadmarkets();
   }


if ( (updatecnt % 60*5) == 0 )
   {
   load_my_assets();
   }


if (refreshcounter == 1) refreshboard();
if (refreshcounter > 0) refreshcounter--;

update_claimdata();

updatecnt++;
} //// update_thread






</script>

<script>


loadglobals();
initgameboard();


init_wallets( config_contract,setaccountname, logoutall );

update_thread();
board_update();


refreshcounter = 3;
loadinventory();

//alert("DEMO-MODE - NFT-prices will change, Rules will change!");
</script>





 <script>



// --------- CANVAS

function getXYpos(elm)
{
x = elm.offsetLeft;
y = elm.offsetTop;

elm = elm.offsetParent;

while(elm != null)
{
    x = parseInt(x) + parseInt(elm.offsetLeft);
    y = parseInt(y) + parseInt(elm.offsetTop);
    elm = elm.offsetParent;
}

return {'xp':x, 'yp':y};
} // getXYpos


var mousex=0;
var mousey=0;
var mousex2=0;
var mousey2=0;
var mousebutton = 0;

var globalmapoffsetx = 100;
var globalmapoffsety = 100;


// Get X, Y coords, and displays Mouse coordinates
function getCoords(e) {
var xy_pos = getXYpos(this);

// if IE
if(navigator.appVersion.indexOf("MSIE") != -1)
{
var standardBody = (document.compatMode == 'CSS1Compat') ? document.documentElement : document.body;

x = event.clientX + standardBody.scrollLeft;
y = event.clientY + standardBody.scrollTop;
}
  else {
       x = e.pageX;
       y = e.pageY;
       }

mousex = x - xy_pos['xp'];
mousey = y - xy_pos['yp'];


var elmw = document.getElementById('canvasmain').clientWidth;
var elmh = document.getElementById('canvasmain').clientHeight;

var fw = 400 / elmw;
var fh = 200 / elmh;

mousex2 = mousex * fw;
mousey2 = mousey * fw;

if (mousebutton)
   {
   //setpixel(mousex2, mousey2,  0,255,0 );

   /*

   */


   } // mouseclick


grabtocanvans();

//console.log("mausx " + mousex2 + " elmw:"+elmw + " elmh:"+elmh+ " - "+ fw +" " + fh);
} //getCoords


function setmousebuttondown()
{
mousebutton = 1;


document.getElementById('xcoor').value = Math.floor( 500000+ mousex2  - globalmapoffsetx - 10 );
document.getElementById('ycoor').value = Math.floor( 500000+ mousey2  - globalmapoffsety );
refreshboard();

}

function setmousebuttonup()
{
mousebutton = 0;
}



document.getElementById('canvasmain').onmousemove = getCoords;
document.getElementById('canvasmain').ontouchmove = getCoords;

document.getElementById('canvasmain').onmousedown = setmousebuttondown;
document.getElementById('canvasmain').onmouseup   = setmousebuttonup;

document.getElementById('canvasmain').ontouchstart = setmousebuttondown;
document.getElementById('canvasmain').ontouchend   = setmousebuttonup;


document.addEventListener('canvasmain', function (e) { e.preventDefault(); }, false);




// --




nvmapelement = document.getElementById("navmaphidden");
var canvas = nvmapelement.getContext('2d');
width = nvmapelement.width;
height = nvmapelement.height;
canvas.fillStyle = '#000044';
canvas.fillRect(0, 0, width, height);

var nvmapelementvisible = document.getElementById("navmap").getContext('2d');


black = {
    r: 0,
    g: 0,
    b: 0,
    a: 255
};




function setpixel (x,y, r,g,b)
{
    var p=canvas.createImageData(1,1);
    p.data[0]=r;
    p.data[1]=g;
    p.data[2]=b;
    p.data[3]=255;
    canvas.putImageData(p,x,y);
}


function setpixel2 (x,y, r,g,b)
{
    var p=nvmapelementvisible.createImageData(1,1);
    p.data[0]=r;
    p.data[1]=g;
    p.data[2]=b;
    p.data[3]=255;
    nvmapelementvisible.putImageData(p,x,y);
}


function grabtocanvans()
{

/*

// Mapping-array

let mappingarray =
[
                                                                                [10, 0],
                                                                        [ 9, 1],[10, 1],[11, 1],
                                                                [ 8, 2],[ 9, 2],[10, 2],[11, 2],[12, 2],
                                                        [ 7, 3],[ 8, 3],[ 9, 3],[10, 3],[11, 3],[12, 3],[13, 3],
                                                [ 6, 4],[ 7, 4],[ 8, 4],[ 9, 4],[10, 4],[11, 4],[12, 4],[13, 4],[14, 4],
                                        [ 5, 5],[ 6, 5],[ 7, 5],[ 8, 5],[ 9, 5],[10, 5],[11, 5],[12, 5],[13, 5],[14, 5],[15, 5],
                                [ 4, 6],[ 5, 6],[ 6, 6],[ 7, 6],[ 8, 6],[ 9, 6],[10, 6],[11, 6],[12, 6],[13, 6],[14, 6],
                        [ 3, 7],[ 4, 7],[ 5, 7],[ 6, 7],[ 7, 7],[ 8, 7],[ 9, 7],[10, 7],[11, 7],[12, 7],[13, 7],
                [ 2, 8],[ 3, 8],[ 4, 8],[ 5, 8],[ 6, 8],[ 7, 8],[ 8, 8],[ 9, 8],[10, 8],[11, 8],[12, 8],
        [ 1, 9],[ 2, 9],[ 3, 9],[ 4, 9],[ 5, 9],[ 6, 9],[ 7, 9],[ 8, 9],[ 9, 9],[10, 9],[11, 9],
[ 0,10],[ 1,10],[ 2,10],[ 3,10],[ 4,10],[ 5,10],[ 6,10],[ 7,10],[ 8,10],[ 9,10],[10,10],
        [ 1,11],[ 2,11],[ 3,11],[ 4,11],[ 5,11],[ 6,11],[ 7,11],[ 8,11],[ 9,11],
                [ 2,12],[ 3,12],[ 4,12],[ 5,12],[ 6,12],[ 7,12],[ 8,12],
                        [ 3,13],[ 4,13],[ 5,13],[ 6,13],[ 7,13],
                                [ 4,14],[ 5,14],[ 6,14],
                                        [ 5,15]
];
*/

var offx = (xcoor-500000)   + globalmapoffsetx;
var offy = (ycoor-500000)   + globalmapoffsety;

/*
setpixel(10, 10,  100,100,255 );
setpixel(11, 10,  100,100,255 );
setpixel(11, 11,  100,100,255 );
setpixel(10, 11,  100,100,255 );
*/

var size = mappingarray.length;

for (var i=0; i<size; i++)
    {
    var thetile = "tile" + i;

    x = mappingarray[i][0];
    y = mappingarray[i][1];




    tile         =  tilearray[x][y]['tile'];
    asset_id         =  tilearray[x][y]['asset_id'];  //
    tileid       =  tilearray[x][y]['tileid'];
    atype        =  tilearray[x][y]['atype'];
    race         =  tilearray[x][y]['race'];
    ori          =  tilearray[x][y]['ori'];
    nick         =  tilearray[x][y]['nick'];
    sov          =  tilearray[x][y]['sov'];
    svx_balance  =  tilearray[x][y]['svx_balance']+" SVX2";
    sov  = sov  / 10000;
    owner        =  tilearray[x][y]['owner'];
    shield       =  tilearray[x][y]['shield'];
    shield_max   =  tilearray[x][y]['shield_max'];
    config       =  tilearray[x][y]['config'] + "";


   /*
    // config
//    let configarray = config.split(";");
    let configarray = split(config,";");

    if ( tile != "tile10" &&  tile != "tile11")
       {
       var buffer = "<img src='img/"+tile+".png?s=4442' style='position:absolute;border:none;width:100%;'>" ;
       document.getElementById(thetile).innerHTML = buffer;
       }



    // Object
    var theobject = "obj" + i;
*/

//    if (tile != "tile00" && tile != "tile00b" && tile != "tile00c" && tile != "tile00d"   )
    
    // text.substring(1, 4);
    if ( tile.substring(0, 6) != "tile00" )
    
    setpixel(x+offx, y+offy,  60,60,60 );

    if (race == 1)
       {
       setpixel(x+offx, y+offy,  200,200,200 );
       }

    if (race == 2)
       {
       setpixel(x+offx, y+offy,  0,200,0 );
       }

    if (race == 4)
       {
       setpixel(x+offx, y+offy,  100,100,255 );
       }

    if (race == 5)
       {
       setpixel(x+offx, y+offy,  255,50,50 );
       }

  //  if (tile != "tile00" && tile != "tile00b" && tile != "tile00c" && tile != "tile00d"   )
    if ( tile.substring(0, 6) == "tile00" )
  
       {
       setpixel(x+offx, y+offy,  30,30,120 );
       }

    // console.log("t: " + tile + " " + tileid);

    } // for i...

  //  console.log("xcoor: " + xcoor + " offx" + offx);
    /*
    xcoor = xcoor + offx;
ycoor = ycoor + offy;
    */

    /*
    //grab the context from your destination canvas
var destCtx = destinationCanvas.getContext('2d');

//call its drawImage() function passing it the source canvas directly
destCtx.drawImage(sourceCanvas, 0, 0);
    */

// Copy hidden Canvas to new one



nvmapelementvisible.drawImage(nvmapelement, 0, 0);



var size = mappingarray_frame.length;

for (var i=0; i<size; i++)
    {


    x = mappingarray_frame[i][0];
    y = mappingarray_frame[i][1];

    setpixel2(x+offx, y+offy,  0,255,0 );
    } // for i...

//for (var i=0; i<=10; i++)
//setpixel2 (30,5+i, 0,255,0) ;

} // grabtocanvas

// --------- CANVAS




// 
// Admin-Actions
//
function dospecial( mode )
{

xcoor = globalselection['x'] ;
ycoor = globalselection['y'] ;

 
 

var theactions = [];






if (mode == 1)
{


rand = getrandom( 1, 4);

var memo = "killarea;"+xcoor+";"+ycoor;


    var action = {
                 account: config_contract,
                 name: 'admin',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "param": memo 
                       }
                 };




  theactions.push(action);    
    
    
rand = getrandom( 1, 4);
var memo = "initarea;"+xcoor+";"+ycoor+";"+rand;

    var action = {
                 account: config_contract,
                 name: 'admin',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "param": memo 
                       }
                 };




    theactions.push(action);
} // if mode == 1


if (mode == 2)
{
 
var memo = "killarea;"+xcoor+";"+ycoor;

    var action = {
                 account: config_contract,
                 name: 'admin',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "param": memo 
                       }
                 };




    theactions.push(action);
    

} // if mode == 2




if (mode == 3)
{

rand = getrandom( 1, 4);
var memo = "initarea;"+xcoor+";"+ycoor+";"+rand;

    var action = {
                 account: config_contract,
                 name: 'admin',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "param": memo 
                       }
                 };




    theactions.push(action);
} // if mode == 3



/*
   void cleanarea (
                     uint64_t coordinatei,  // coordinatei 
                     name     user     //                                           
                     ) 
*/


if (mode == 4)
{

coordinatei = globalselection['coordinate'];

 
    var action = {
                 account: config_contract,
                 name: 'cleanarea',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "coordinatei": coordinatei, 
                       "user": global_account, 
                       }
                 };




    theactions.push(action);
} // if mode == 4




if (1)
   {
   transact( func_success, func_error, theactions );
   }



} // dospecial()


function getrandom( min, max)
{
max++;

var random = Math.floor(Math.random() * (+max - +min)) + +min; 
return(random);
}

// BEGINN CHAT -----

  function timeConverter(UNIX_timestamp) {
                        var a = new Date(UNIX_timestamp * 1000);
                        var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                        var year = a.getFullYear() + 356;
                        var month = months[a.getMonth()];
                        var date = a.getDate();
                        var hour = a.getHours();
                        var min = a.getMinutes();
                        var sec = a.getSeconds();
                        var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec;
                        return time;
                    }


var chat_id = 0;
var chat_all_last = "";



function callback_load_all( value )
{
console.log("callback_load_all");

//var max = 10;

console.log( value );

size = value.rows.length;

console.log("size: " + size);

var buffer = "";


for (var i=0; i<size; i++)
    {

  //  if (i >= (size-max) )
       {
       user       = value.rows[i]['user'];
       race       = value.rows[i]['race'];
       txt        = value.rows[i]['text'];
       time       = value.rows[i]['time'];

    var col = "#ffffff";

    if (race == "Human") col = "#aaaaaa";
    if (race == "Grey") col = "#bbffbb";
    if (race == "Sirian") col = "#bbbbff";
    if (race == "Repto") col = "#ffbbbb";

    rendertime = timeConverter( time );

     buffer += "<div style='color:"+col+"'>";
           buffer += "<strong>"+ user + " (" + race + ") - " +  rendertime + "</strong>";
     buffer += "</div>";

    buffer += "<div class='chatbox_bubble'>"+txt+"";
    buffer += "</div>"


       }

      
    } // for i...

document.getElementById("chatbox_all_content").innerHTML = buffer ;



// Update scrolling
if (chat_all_last != value.rows[size-1]['time'])
   {
   document.getElementById("chatbox_all_content_outer").scrollTop = document.getElementById("chatbox_all_content_outer").scrollHeight;
   }
chat_all_last = value.rows[size-1]['time']

} // callback_load_all


var chat_myrace_last = "";


function callback_load_myrace( value )
{
console.log("callback_load_myrace");



console.log( value );

size = value.rows.length;

console.log("size: " + size);



var buffer = "";

if ( userdata['race'] == 1 ) buffer += "<strong>Human Chat</strong><br>";
if ( userdata['race'] == 2 ) buffer += "<strong>Grey Chat</strong><br>";
if ( userdata['race'] == 4 ) buffer += "<strong>Sirian Chat</strong><br>";
if ( userdata['race'] == 5 ) buffer += "<strong>Repto Chat</strong><br>";

document.getElementById("chatbox_myrace_title").innerHTML = buffer ;


buffer = "";

for (var i=0; i<size; i++)
    {
    user       = value.rows[i]['user'];
    txt        = value.rows[i]['text'];
    time        = value.rows[i]['time'];

    rendertime = timeConverter( time );

    buffer += "<strong>"+ user + " " + " - "+rendertime+"</strong>";
    buffer += "<div class='chatbox_bubble'>"+txt+"";
    buffer += "</div>"

    } // for i...

document.getElementById("chatbox_myrace_content").innerHTML = buffer ;





// Update scrolling
if (chat_myrace_last != value.rows[size-1]['time'])
   {
   document.getElementById("chatbox_myrace_content_outer").scrollTop = document.getElementById("chatbox_myrace_content_outer").scrollHeight;
   }
chat_myrace_last = value.rows[size-1]['time']

} // callback_load_myrace





function chat_update_thread()
{


if (chat_toggle == 1)
{

chat_id++;
console.log("chat_id: " + chat_id  + " UR:" + userdata['race'] + " chat_toggle:" + chat_toggle );


getdata(callback_load_all, "invaderschat", "invaderschat", "allmessages", "", "", "", 500 );


if (userdata['race'] >= 1)
   {
   getdata(callback_load_myrace, "invaderschat", userdata['race'], "racemessages", "", "", "", 500 );
   }

} 

var time = setTimeout("chat_update_thread()", 10000);





} // chat_update_thread()


function chatsend( type )
{

chatinput_all    = document.getElementById('chatinput_all').value;
chatinput_myrace = document.getElementById('chatinput_myrace').value;

document.getElementById('chatinput_all').value = "";
document.getElementById('chatinput_myrace').value = "";


var theactions = [];




var memo = global_account+"";



//var quantityeos = globaldata['a_sov'] / 10000;
//quantitysov = Number(quantitysov).toFixed(4) + " SOV";



if (type == 1)
{

message = chatinput_all;

    var action = {
                 account: "invaderschat",
                 name: 'allmsg',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "message": message
                       }
                 };


theactions.push(action);

} // if (type == 1)




if (type == 2)
{

message = chatinput_myrace;

    var action = {
                 account: "invaderschat",
                 name: 'racemsg',
                 authorization: [{
                                actor: global_account,
                                permission: "active"
                                }],
                 data: {
                       "from": global_account,
                       "message": message
                       }
                 };


theactions.push(action);

} // if (type == 2)


if (1)
   {
   transact( func_success, func_error, theactions );
   }

} // chatsend()



// END CHAT -----


chat_update_thread();
 </script>




<script>
// Define a function to change the language of the page
function changeLanguage(lang) {
  // Get all elements with a "data-lang" attribute
  var elements = document.querySelectorAll("[data-lang]");
  // Loop through each element and set its text to the corresponding language
  for (var i = 0; i < elements.length; i++) {
    var element = elements[i];
    var text = element.getAttribute("data-lang");
    if (text === lang) {
      element.style.display = "block";
    } else {
      element.style.display = "none";
    }
  }
}

// Listen for changes to the language selector
var selector = document.getElementById("language-selector");
selector.addEventListener("change", function(event) {
  var lang = event.target.value;
  changeLanguage(lang);

  var jumpToNftOption = document.querySelector("option[value='500000500000']");
  if (lang === "cn") {
   jumpToNftOption.innerHTML = "跳到昵称";
  } else {
   jumpToNftOption.innerHTML = "Jump to Nickname";
  }
});

// Set the initial language based on the user's browser settings
var lang = navigator.language.substring(0, 2);
//alert("Lang: " + lang);
if (lang != 'en' && lang != 'cn') lang = 'en';
changeLanguage(lang);
var jumpToNftOption = document.querySelector("option[value='500000500000']");
if (lang === "cn") {
   jumpToNftOption = "跳到昵称";
} else {
   jumpToNftOption = "Jump to Nickname";
}

</script>



</body>
</hmtl>
